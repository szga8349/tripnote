/*! dujz1@lenovo.com Thu Jul 19 2018 17:50:48 GMT+0800 (中国标准时间) */!function(e){function t(t){for(var n,s,o=t[0],u=t[1],i=t[2],d=0,m=[];d<o.length;d++)s=o[d],l[s]&&m.push(l[s][0]),l[s]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);for(c&&c(t);m.length;)m.shift()();return r.push.apply(r,i||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var u=a[o];0!==l[u]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},l={1:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var i=0;i<o.length;i++)t(o[i]);var c=u;r.push([1184,0]),a()}({1042:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=b(a(39)),l=b(a(106)),r=b(a(17)),s=b(a(78)),o=b(a(26)),u=b(a(25)),i=b(a(12)),c=b(a(4)),d=b(a(6)),m=b(a(3)),f=b(a(5)),p=b(a(14)),h=b(a(2)),v=b(a(70));a(38),a(122),a(20),a(99),a(22),a(79);var E=a(1),g=b(E),y=a(11),_=a(141),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(891)),N=a(360),C=b(a(825));function b(e){return e&&e.__esModule?e:{default:e}}a(352);var M=v.default.SubMenu,k=g.default.createElement(v.default,null,g.default.createElement(v.default.Item,{key:"0"},g.default.createElement("div",null,"过去两个小时")),g.default.createElement(v.default.Item,{key:"1"},g.default.createElement("div",null,"过去三个小时"))),A=[{title:"类型",dataIndex:"type",key:"type"},{title:"内容",dataIndex:"content",width:"60%",key:"content"}],L=(0,_.SortableElement)(function(e){var t=e.value,a=(e.threshold,e.metricViewData),n=N.widgetsMapper[t].view,l=S[n],r=a[n];return g.default.createElement("div",{className:"sortItemContent"},g.default.createElement(l,(0,h.default)({sourceData:r},e)),g.default.createElement(p.default,{type:"close-circle",className:"closeIcon",onClick:function(){return y.actions.monitor.deleteWidgetComplete({value:t})}}),N.showEdit.indexOf(t)>-1&&g.default.createElement(p.default,{type:"form",className:"edit",onClick:function(){return y.actions.monitor.toggleEditDialog({value:t})}}))}),R=(0,_.SortableContainer)(function(e){var t=e.items;e.metricViewData;return g.default.createElement("div",{className:"sortContainer"},t.map(function(t,a){return g.default.createElement(L,(0,h.default)({key:"item-"+a,index:a,value:t},e))}))}),w=function(e){function t(e){var a=this;(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.needLoad=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.actions.app.getAllService();case 2:return e.next=4,y.actions.monitor.getClusterInfoComponent();case 4:return e.next=6,y.actions.monitor.getServiceMetric();case 6:return e.next=8,y.actions.monitor.getClusterInfo();case 8:case"end":return e.stop()}},e,a)})),n.onSortEnd=function(e){var t=e.oldIndex,a=e.newIndex;y.actions.monitor.onSortMonitorInfoEnd({oldIndex:t,newIndex:a})},n.handleMenuClick=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({showDropdown:!1})},n.handleVisibleChange=function(e){e.nativeEvent.stopImmediatePropagation(),n.setState({showDropdown:!n.state.showDropdown})},n.onChange=function(e){n.setState({visibleComponent:e})},n.ChangeMonitorCOmponent=function(){y.actions.monitor.addMonitorComponentInfo(n.state.visibleComponent)},n.state={showDropdown:!1,visibleComponent:[]},n.currentClusterName=null,n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.currentCluster&&e.currentCluster.clusterName!=this.currentClusterName&&(this.currentClusterName=e.currentCluster.clusterName,this.componentWillMount())}},{key:"componentWillMount",value:function(){var e=this;this.props.currentCluster?e.needLoad():y.actions.app.getClusterList().then(function(t){t&&t.length>0&&e.needLoad()})}},{key:"render",value:function(){var e=this.props,t=e.threshold,a=e.hidden,o=e.metricViewData,u=(e.currentCluster,e.clusterInfoLoading),i=e.clusterInfo,c=g.default.createElement(v.default,{onClick:this.handleMenuClick},g.default.createElement(M,{title:g.default.createElement("span",null,g.default.createElement(p.default,{type:"plus"}),g.default.createElement("span",{className:"menuName"},"添加"))},g.default.createElement("div",{className:"compsAble"},g.default.createElement(s.default.Group,{style:{width:"100%"},onChange:this.onChange},a.map(function(e,t){return g.default.createElement("div",{className:"checkDiv",key:t},g.default.createElement(s.default,{value:e[0]},e[1]))})),0===a.length&&g.default.createElement("div",{className:"checkDiv"},"没有可添加的组件")),g.default.createElement("div",{className:"menuButtonWrap"},g.default.createElement(r.default,{type:"default"},"取消"),a.length>0&&g.default.createElement(r.default,{type:"primary",onClick:this.ChangeMonitorCOmponent},"确定"))),g.default.createElement(M,{title:g.default.createElement("span",null,g.default.createElement(p.default,{type:"edit"}),g.default.createElement("span",{className:"menuName"},"编辑"))},g.default.createElement(v.default.Item,null,g.default.createElement(p.default,{type:"sync"}),g.default.createElement("span",null,"将所有控件重置为默认值 "))));return g.default.createElement("div",{className:"clusterStateWrap"},g.default.createElement("div",{className:"clusterHeader"},g.default.createElement(l.default,{overlay:c,trigger:["hover"],onClick:this.handleVisibleChange,visible:this.state.showDropdown},g.default.createElement("span",{className:"ant-dropdown-link deal"},"操作 ",g.default.createElement(p.default,{type:"down"}))),g.default.createElement(l.default,{overlay:k,trigger:["click"]},g.default.createElement("span",{className:"ant-dropdown-link"},"过去一个小时 ",g.default.createElement(p.default,{type:"down"})))),g.default.createElement(R,{items:this.props.visible,metricViewData:o,threshold:t,onSortEnd:this.onSortEnd,axis:"xy",distance:10}),g.default.createElement(C.default,{className:"dialogStyle"}),g.default.createElement("div",{className:"componentInfo"},g.default.createElement("p",null,"集群信息"),g.default.createElement(n.default,{loading:u,dataSource:i,columns:A,bordered:!0,pagination:!1})))}}]),t}(E.Component),I=(0,y.connect)(function(e){return{hidden:e.monitor.hidden,visible:e.monitor.visible,threshold:e.monitor.threshold,status:e.monitor.status,showDialog:e.monitor.showDialog,metricViewData:e.monitor.metricViewData,currentCluster:e.app.currentCluster,clusterInfo:e.monitor.clusterInfo,clusterInfoLoading:e.monitor.clusterInfoLoading}})(w);t.default=I},1056:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(12)),l=E(a(4)),r=E(a(6)),s=E(a(3)),o=E(a(5)),u=E(a(57));a(56);var i=a(1),c=E(i),d=E(a(1042)),m=E(a(801)),f=E(a(351)),p=E(a(66)),h=a(11),v=E(a(69));function E(e){return e&&e.__esModule?e:{default:e}}var g=u.default.TabPane,y=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={curTab:1},a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.props.currentCluster||h.actions.app.getClusterList()}},{key:"tabChange",value:function(e){this.setState({curTab:e})}},{key:"render",value:function(){return c.default.createElement("div",null,c.default.createElement(v.default,null),this.props.loading?"":this.props.currentCluster?c.default.createElement(u.default,{onChange:this.tabChange.bind(this),value:this.state.curTab,type:"card",className:"pageContent"},c.default.createElement(g,{tab:"集群状态",key:"1"},c.default.createElement(d.default,null)),c.default.createElement(g,{tab:"组件状态",key:"2"},2==this.state.curTab&&c.default.createElement(f.default,null)),c.default.createElement(g,{tab:"开发工具状态",key:"3"},3==this.state.curTab&&c.default.createElement(m.default,{currentType:"tools"}))):c.default.createElement(p.default,null))}}]),t}(i.Component),_=(0,h.connect)(function(e){return{loading:e.monitor.loading,currentCluster:e.app.currentCluster}})(y);t.default=_},1057:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(1)),l=a(11),r=o(a(1056)),s=o(a(773));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return n.default.createElement(l.Switch,null,n.default.createElement(l.Route,{path:"/monitor/dashboard",component:r.default}),n.default.createElement(l.Route,{path:"/monitor/services/:servicesName",component:s.default}),n.default.createElement(l.Redirect,{to:"/monitor/dashboard"}))}},1060:function(e,t){},1066:function(e,t){},1076:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(12)),l=m(a(4)),r=m(a(6)),s=m(a(3)),o=m(a(5)),u=m(a(27));a(29);var i=a(1),c=m(i),d=(m(a(88)),a(11),a(103),m(a(1057)));a(352);m(a(756));function m(e){return e&&e.__esModule?e:{default:e}}u.default.Option;var f=function(e){function t(e){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return c.default.createElement("div",{className:"MonitorWrap"},c.default.createElement(d.default,null))}}]),t}(i.Component);t.default=f},1078:function(e,t,a){},1124:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=k(a(50)),l=k(a(1122)),r=k(a(17)),s=k(a(106)),o=k(a(14)),u=k(a(1116)),i=k(a(70));a(49),a(1096),a(20),a(122),a(22),a(1089),a(79);var c=k(a(1)),d=k(a(0)),m=a(11),f=(k(a(69)),k(a(1076))),p=k(a(754)),h=k(a(725)),v=k(a(66)),E=k(a(718)),g=k(a(712)),y=k(a(707)),_=k(a(589)),S=k(a(588)),N=k(a(585)),C=k(a(579)),b=k(a(115)),M=a(576);function k(e){return e&&e.__esModule?e:{default:e}}a(335);var A=i.default.SubMenu,L=(u.default.Header,u.default.Sider),R=u.default.Content,w=a(575),I=a(574),T=function(){(0,M.userLogout)().then(function(e){1===e.code&&(b.default.remove("LEAP-CLOUD-USERNAME"),sessionStorage.removeItem("currentCluster"),sessionStorage.removeItem("clusterList"),m.actions.user.logout())})},x=function(){return c.default.createElement(i.default,{className:"userMenu"},c.default.createElement(i.default.Item,null,c.default.createElement("a",{onClick:T},"退出")))},H=function(e){var t=e.layout,d=e.user,b=e.getClusterLoading,M=(e.currentrouter,e.taskModalVisible);return c.default.createElement(u.default,null,c.default.createElement(L,{trigger:null,collapsible:!0,collapsed:t.collapsed,width:t.width,breakpoint:"md",collapsedWidth:t.xWidth,onCollapse:m.actions.layout.toggle,className:"styledSider"},c.default.createElement("div",{className:"logo"},c.default.createElement("img",{src:t.collapsed?I:w})),c.default.createElement(i.default,{className:"layoutMenu",defaultSelectedKeys:t.selected,selectedKeys:t.selectedKeys,defaultOpenKeys:t.openKey,theme:"dark",mode:"inline"},t.menuItems.map(function(e){return e.children?c.default.createElement(A,{key:e.key,title:c.default.createElement("span",null,c.default.createElement(o.default,{className:e.icon}),c.default.createElement("span",{className:"menuName"},e.name))},e.children.map(function(e){return c.default.createElement(i.default.Item,{key:e.key},c.default.createElement(m.Link,{to:"/"+e.key},c.default.createElement("span",{className:"menuName"},e.name)))})):c.default.createElement(i.default.Item,{key:e.key,className:"topMenu"},c.default.createElement(m.Link,{to:"/"+e.key},c.default.createElement(o.default,{className:e.icon}),c.default.createElement("span",{className:"menuName"},e.name)))}))),c.default.createElement(u.default,{style:{marginLeft:t.collapsed?t.xWidth:t.width}},c.default.createElement("div",{className:"layoutHeader"},c.default.createElement("div",{className:"trigger",onClick:m.actions.layout.toggle},c.default.createElement(o.default,{type:t.collapsed?"menu-unfold":"menu-fold"})),c.default.createElement("div",{className:"rightPart"},c.default.createElement("div",{className:"newsInfo"},c.default.createElement("img",{src:a(573),onClick:function(){return m.actions.host.updateState({taskModalVisible:!0})},style:{cursor:"pointer"}})),c.default.createElement("div",{className:"userArea"},"online"===d.status?c.default.createElement(s.default,{overlay:c.default.createElement(x,null)},c.default.createElement("span",{style:{cursor:"pointer"}},decodeURIComponent(d.username)," ",c.default.createElement(o.default,{type:"down"}))):c.default.createElement(m.Link,{to:"/signIn"},c.default.createElement(r.default,null,"登录"))," ",c.default.createElement(l.default,{src:a(572)})))),c.default.createElement(n.default,{spinning:b,wrapperClassName:"getClusterLoading"},c.default.createElement(R,{className:"layoutContent"},c.default.createElement(m.Switch,null,c.default.createElement(m.Route,{path:"/monitor",component:f.default}),c.default.createElement(m.Route,{path:"/noCluster",component:v.default}),c.default.createElement(m.Route,{path:"/createCluster",component:E.default}),c.default.createElement(m.Route,{path:"/componentManage",component:h.default}),c.default.createElement(m.Route,{path:"/devTools",component:p.default}),c.default.createElement(m.Route,{exact:!0,path:"/hosts",component:g.default}),c.default.createElement(m.Route,{path:"/hosts/:host",component:y.default}),c.default.createElement(m.Route,{path:"/security",component:N.default}),c.default.createElement(m.Route,{path:"/alerts",component:S.default}),c.default.createElement(m.Route,{path:"/tools",component:C.default}),c.default.createElement(m.Redirect,{exact:!0,from:"/",to:"/monitor"}))))),M&&c.default.createElement(_.default,null))};H.propTypes={collapsed:d.default.bool,selected:d.default.array,width:d.default.number,xWidth:d.default.number,menuItems:d.default.array},H.defaultProps={xWidth:80},t.default=H},1127:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=d(a(12)),l=d(a(4)),r=d(a(6)),s=d(a(3)),o=d(a(5)),u=d(a(1)),i=a(11),c=d(a(1124));function d(e){return e&&e.__esModule?e:{default:e}}var m=(0,i.connect)(function(e){return{layout:e.layout,user:e.user,getClusterLoading:e.app.getClusterLoading,currentrouter:e.app.currentrouter,taskModalVisible:e.host.taskModalVisible}})(c.default),f=function(e){function t(e,a){(0,l.default)(this,t);var r=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return r.state={unlisten:null},r}return(0,o.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){var e=this;this.selectMenu(),i.actions.app.routeChange(this.props.location),this.unlisten=this.props.history.listen(function(t){e.selectMenu(t.pathname),i.actions.app.routeChange(t)})}},{key:"componentDidMount",value:function(){}},{key:"getPathName",value:function(e){var t=e.match(/\/([^/]+)/);return t&&t[1]?t[1]:"monitor"}},{key:"selectMenu",value:function(e){var t=this.getPathName(e||this.props.location.pathname);i.actions.layout.changeMenuSelectedKey([t])}},{key:"componentWillUnmount",value:function(){this.unlisten()}},{key:"render",value:function(){return u.default.createElement(m,null)}}]),t}(u.default.Component);t.default=f},1128:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(2)),l=p(a(15)),r=p(a(1)),s=a(11),o=(p(a(1127)),p(a(571))),u=p(a(557)),i=p(a(548)),c=p(a(545)),d=p(a(542)),m=a(89),f=p(a(115));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){var t=e.component,a=(e.status,(0,l.default)(e,["component","status"]));return r.default.createElement(s.Route,(0,n.default)({},a,{render:function(e){return f.default.get("TRIPNOTE-KEY")?r.default.createElement(t,e):r.default.createElement(s.Redirect,{to:{pathname:"/signIn",state:{from:e.location}}})}}))},v=(0,s.connect)(function(e){return{userStatus:e.user.status}})(function(e){var t=e.userStatus;return r.default.createElement(s.Router,{history:m.history},r.default.createElement(s.Switch,null,r.default.createElement(s.Route,{path:"/signIn",component:o.default}),r.default.createElement(s.Route,{path:"/register",component:i.default}),r.default.createElement(s.Route,{path:"/forgetPwd",component:u.default}),r.default.createElement(h,{path:"/product",status:t,component:c.default}),r.default.createElement(h,{path:"/productCreate",status:t,component:d.default}),r.default.createElement(h,{path:"/productEdit",status:t,component:d.default}),r.default.createElement(s.Redirect,{exact:!0,from:"/",to:"/product"})))});t.default=v},1178:function(e,t,a){"use strict";var n=i(a(1177));a(1143);var l=i(a(1)),r=a(11),s=(i(r),i(a(1128))),o=a(103);a(493),a(491);var u=i(a(477));function i(e){return e&&e.__esModule?e:{default:e}}window.appLocale=(0,u.default)(),(0,r.render)(l.default.createElement(n.default,{locale:window.appLocale.antd},l.default.createElement(o.IntlProvider,{locale:window.appLocale.locale,messages:window.appLocale.messages},l.default.createElement(s.default,null))),document.getElementById("Root"))},1183:function(e,t,a){"use strict";"undefined"==typeof Promise&&(a(1182).enable(),window.Promise=a(1180)),a(1179),Object.assign=a(127)},1184:function(e,t,a){a(1183),e.exports=a(1178)},132:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAlertsLists=t.getHostLists=t.getVersions=t.operateComponent=t.hostOperate=t.startOrStopComponents=t.setHostRack=t.openOrCloseMaintenance=t.restartAllComponents=t.installFailedComponents=t.getMasterComponent=t.getHostStatus=t.getClusterVmnodesWithComponents=t.getAvailableComponentOnVmnode=t.getTaskSummary=t.getTaskLogs=t.getTaskProgress=t.openOrCloseMaintenanceState=t.getSummaryInfo=t.restartComponents=t.startComponents=t.getClusterList=void 0;var n=r(a(76)),l=r(a(75));function r(e){return e&&e.__esModule?e:{default:e}}(new Date).getTime();var s="/api/v1/clusters/LEAP/stack_versions?fields=*,repository_versions/*,repository_versions/operating_systems/OperatingSystems/*,repository_versions/operating_systems/repositories/*&_="+(new Date).getTime();t.getClusterList=function(){return(0,l.default)({url:"/platform/getUsersCluster",method:"get"})},t.startComponents=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/hosts/"+e.host_name+"/host_components/"+e.component_name,clusterName:e.cluster_name,method:"put",params:(0,n.default)({RequestInfo:{context:e.text,operation_level:{level:"HOST_COMPONENT",cluster_name:e.cluster_name,host_name:e.host_name,service_name:e.service_name}},Body:{HostRoles:{state:"INSTALLED"==e.state?"STARTED":"INSTALLED"}}})}})},t.restartComponents=function(e){return(0,l.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/"+e.cluster_name+"/requests",clusterName:e.cluster_name,method:"post",params:(0,n.default)({RequestInfo:{command:"RESTART",context:e.text,operation_level:{level:e.level||"HOST_COMPONENT",cluster_name:e.cluster_name,service_name:e.service_name,hostcomponent_name:e.component_name}},"Requests/resource_filters":e.filter||[{service_name:e.service_name,component_name:e.component_name,hosts:e.host_name}]})}})},t.getSummaryInfo=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/hosts?fields=Hosts/rack_info,Hosts/host_name,Hosts/maintenance_state,Hosts/public_host_name,Hosts/cpu_count,Hosts/ph_cpu_count,alerts_summary,Hosts/host_status,Hosts/last_heartbeat_time,Hosts/ip,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/service_name,host_components/HostRoles/display_name,host_components/HostRoles/desired_admin_state,metrics/disk,metrics/load/load_one,Hosts/total_mem,Hosts/os_arch,Hosts/os_type,metrics/cpu/cpu_system,metrics/cpu/cpu_user,metrics/memory/mem_total,metrics/memory/mem_free,stack_versions/HostStackVersions,stack_versions/repository_versions/RepositoryVersions/repository_version,stack_versions/repository_versions/RepositoryVersions/id,stack_versions/repository_versions/RepositoryVersions/display_name",clusterName:e.cluster_name,method:"get",params:(0,n.default)({RequestInfo:{query:"Hosts/host_name.in("+e.host_name+")"}})}})},t.openOrCloseMaintenanceState=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"//hosts/"+e.host_name+"/host_components/"+e.component_name,clusterName:e.cluster_name,method:"put",params:(0,n.default)({RequestInfo:{context:e.text},Body:{HostRoles:{maintenance_state:e.text.indexOf("打开")>=0?"ON":"OFF"}}})}})},t.getTaskProgress=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/requests?to=end&page_size="+(e.page_size||10)+"&fields=Requests",clusterName:e.cluster_name,method:"get"}})},t.getTaskLogs=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/requests/"+e.request_id+"/tasks/"+e.task_id,clusterName:e.cluster_name,method:"get"}})},t.getTaskSummary=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/requests/"+e.request_id+"?fields=*,tasks/Tasks/request_id,tasks/Tasks/command,tasks/Tasks/command_detail,tasks/Tasks/host_name,tasks/Tasks/id,tasks/Tasks/role,tasks/Tasks/status&minimal_response=true",clusterName:e.cluster_name,method:"get"}})},t.getAvailableComponentOnVmnode=function(e){return(0,l.default)({url:"/platform/getAvailableComponentOnVmnode",data:e})},t.getClusterVmnodesWithComponents=function(e){return(0,l.default)({url:"/platform/getClusterVmnodesWithComponents",data:e})},t.getHostStatus=function(){var e,t,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+a.cluster_name+"/hosts/"+a.host_name+"?fields="+encodeURIComponent((e=a.start,t=a.end,t=t&&"number"==typeof+t?t:+String((new Date).getTime()).substr(0,10),"metrics/cpu/cpu_user["+(e=e&&"number"==typeof+e?String(e).substr(0,10):t-3600)+","+t+",15],metrics/cpu/cpu_wio["+e+","+t+",15],metrics/cpu/cpu_nice["+e+","+t+",15],metrics/cpu/cpu_aidle["+e+","+t+",15],metrics/cpu/cpu_system["+e+","+t+",15],metrics/cpu/cpu_idle["+e+","+t+",15],metrics/disk/disk_total["+e+","+t+",15],metrics/disk/disk_free["+e+","+t+",15],metrics/load/load_fifteen["+e+","+t+",15],metrics/load/load_one["+e+","+t+",15],metrics/load/load_five["+e+","+t+",15],metrics/memory/swap_free["+e+","+t+",15],metrics/memory/mem_shared["+e+","+t+",15],metrics/memory/mem_free["+e+","+t+",15],metrics/memory/mem_cached["+e+","+t+",15],metrics/memory/mem_buffers["+e+","+t+",15],metrics/network/bytes_in["+e+","+t+",15],metrics/network/bytes_out["+e+","+t+",15],metrics/network/pkts_in["+e+","+t+",15],metrics/network/pkts_out["+e+","+t+",15],metrics/process/proc_total["+e+","+t+",15],metrics/process/proc_run["+e+","+t+",15]")),clusterName:a.cluster_name,method:"get"}})},t.getMasterComponent=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"//components/?ServiceComponentInfo/component_name=FLUME_HANDLER|ServiceComponentInfo/component_name=APP_TIMELINE_SERVER|ServiceComponentInfo/component_name=JOURNALNODE|ServiceComponentInfo/component_name=ZKFC|ServiceComponentInfo/category=MASTER&fields=ServiceComponentInfo/service_name,host_components/HostRoles/display_name,host_components/HostRoles/host_name,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/ha_state,host_components/HostRoles/desired_admin_state,,host_components/metrics/jvm/memHeapUsedM,host_components/metrics/jvm/HeapMemoryMax,host_components/metrics/jvm/HeapMemoryUsed,host_components/metrics/jvm/memHeapCommittedM,host_components/metrics/mapred/jobtracker/trackers_decommissioned,host_components/metrics/cpu/cpu_wio,host_components/metrics/rpc/client/RpcQueueTime_avg_time,host_components/metrics/dfs/FSNamesystem/*,host_components/metrics/dfs/namenode/Version,host_components/metrics/dfs/namenode/LiveNodes,host_components/metrics/dfs/namenode/DeadNodes,host_components/metrics/dfs/namenode/DecomNodes,host_components/metrics/dfs/namenode/TotalFiles,host_components/metrics/dfs/namenode/UpgradeFinalized,host_components/metrics/dfs/namenode/Safemode,host_components/metrics/runtime/StartTime,host_components/metrics/yarn/Queue,host_components/metrics/yarn/ClusterMetrics/NumActiveNMs,host_components/metrics/yarn/ClusterMetrics/NumLostNMs,host_components/metrics/yarn/ClusterMetrics/NumUnhealthyNMs,host_components/metrics/yarn/ClusterMetrics/NumRebootedNMs,host_components/metrics/yarn/ClusterMetrics/NumDecommissionedNMs&minimal_response=true",clusterName:e.clusterName,method:"get"}})},t.installFailedComponents=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"/host_components",clusterName:e.clusterName,method:"post",params:(0,n.default)({RequestInfo:{context:e.context,operation_level:{level:"CLUSTER",cluster_name:e.clusterName},query:"HostRoles/host_name.in("+e.hostsStr+")&HostRoles/state=INSTALL_FAILED"},Body:{HostRoles:{state:"INSTALLED"}}})},method:"get"})},t.restartAllComponents=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"/requests",clusterName:e.clusterName,method:"post",params:(0,n.default)({RequestInfo:{command:"RESTART",context:e.context||"重启已选择主机上的全部组件",operation_level:e.context?"":{level:"HOST",cluster_name:e.clusterName}},"Requests/resource_filters":e.filters})},method:"post"})},t.openOrCloseMaintenance=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"/hosts",clusterName:e.clusterName,method:"PUT",params:(0,n.default)({RequestInfo:{context:e.context,query:"Hosts/host_name.in("+e.hostsStr+")"},Body:{Hosts:{maintenance_state:e.isOpen}}})},method:"get"})},t.setHostRack=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/hosts",clusterName:e.cluster_name,method:"PUT",params:(0,n.default)({RequestInfo:{context:e.context,query:"Hosts/host_name.in("+e.hosts+")"},Body:{Hosts:{rack_info:e.rack}}})},method:"get"})},t.startOrStopComponents=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:e.fromHost?"/api/v1/clusters/"+e.clusterName+"/hosts/"+e.host_name+"/host_components":"/api/v1/clusters/"+e.clusterName+"/host_components",clusterName:e.clusterName,method:"put",params:(0,n.default)({RequestInfo:{context:e.context,operation_level:{level:e.level,cluster_name:e.clusterName,host_names:e.host_name||""},query:e.query},Body:{HostRoles:{state:e.state}}})},method:"get"})},t.hostOperate=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"/host_components",clusterName:e.clusterName,method:"post",params:(0,n.default)({RequestInfo:{context:e.context,operation_level:{level:e.level,cluster_name:e.clusterName},query:e.query},Body:{HostRoles:{state:e.state}}})},method:"get"})},t.operateComponent=function(e){return(0,l.default)({url:"/api/v1/clusters/LEAP/host_components",data:{RequestInfo:{context:e.context,operation_level:{level:e.level,cluster_name:e.cluster_name},query:"(HostRoles/component_name.in(APP_TIMELINE_SERVER,DATANODE,ELASTICSEARCH,FLUME_HANDLER,HBASE_MASTER,HBASE_REGIONSERVER,HISTORYSERVER,IMPALA_DAEMON,KAFKA_BROKER,KIBANA_SERVER,LOGSEARCH_LOGFEEDER,LOGSTASH_AGENT,METRICS_MONITOR,NAMENODE,NFS_GATEWAY,NODEMANAGER,RESOURCEMANAGER,SQLS,ZOOKEEPER_SERVER)&HostRoles/host_name=demo1.leap.com)"},Body:{HostRoles:{state:e.state}}},method:"put",isDataString:1})},t.getVersions=function(){return(0,l.default)({url:s,method:"get"})},t.getHostLists=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"/hosts?fields=Hosts/rack_info,Hosts/host_name,Hosts/maintenance_state,Hosts/public_host_name,Hosts/cpu_count,Hosts/ph_cpu_count,alerts_summary,Hosts/host_status,Hosts/last_heartbeat_time,Hosts/ip,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/service_name,host_components/HostRoles/display_name,host_components/HostRoles/desired_admin_state,metrics/disk,metrics/load/load_one,Hosts/total_mem,stack_versions/HostStackVersions,stack_versions/repository_versions/RepositoryVersions/repository_version,stack_versions/repository_versions/RepositoryVersions/id,stack_versions/repository_versions/RepositoryVersions/display_name&minimal_response=true,host_components/logging&page_size=10&from=0&sortBy=Hosts/host_name.asc",clusterName:e.clusterName,method:"get",params:e.params||'{"RequestInfo":{"query":"page_size=10&from=0"}}'},method:"get"})},t.getAlertsLists=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/alerts?fields=*&Alert/host_name="+e.hosts,clusterName:e.cluster_name,method:"get"}})}},160:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(14));a(22);var l=r(a(1));r(a(553));function r(e){return e&&e.__esModule?e:{default:e}}a(552),t.default=function(){return l.default.createElement("header",null,l.default.createElement("div",{className:"headerInner maxWidth1200"},l.default.createElement("h1",{className:"leapCloudLogo fl"},"TripNote PC"),l.default.createElement("div",{className:"otherOperate fr"},l.default.createElement("span",null,l.default.createElement(n.default,{type:"question"})," 退出登录"))))}},166:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.startAllService=t.uninstallService=t.getHostInfo=t.getComponentsInstalledList=t.getComponentsList=void 0;var n,l=a(75),r=(n=l)&&n.__esModule?n:{default:n};t.getComponentsList=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e+"/stack_versions?fields=*,repository_versions/*,repository_versions/operating_systems/OperatingSystems/*,repository_versions/operating_systems/repositories/*",clusterName:e,method:"get"}})},t.getComponentsInstalledList=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e+"/services?fields=ServiceInfo/state,ServiceInfo/maintenance_state,components/ServiceComponentInfo/component_name&minimal_response=true",clusterName:e,method:"get"}})},t.getHostInfo=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e+"/hosts?fields=Hosts/rack_info,Hosts/host_name,Hosts/maintenance_state,Hosts/public_host_name,Hosts/cpu_count,Hosts/ph_cpu_count,alerts_summary,Hosts/host_status,Hosts/last_heartbeat_time,Hosts/ip,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/service_name,host_components/HostRoles/display_name,host_components/HostRoles/desired_admin_state,metrics/disk,metrics/load/load_one,Hosts/total_mem,Hosts/os_arch,Hosts/os_type,metrics/cpu/cpu_system,metrics/cpu/cpu_user,metrics/memory/mem_total,metrics/memory/mem_free,stack_versions/HostStackVersions,stack_versions/repository_versions/RepositoryVersions/repository_version,stack_versions/repository_versions/RepositoryVersions/id,stack_versions/repository_versions/RepositoryVersions/display_name&minimal_response=true,host_components/logging&page_size=10&from=0&sortBy=Hosts/host_name.asc",clusterName:e,method:"get"}})},t.uninstallService=function(e,t){return(0,r.default)({url:"/platform/deleteService",method:"post",data:{clusterName:t,serviceName:e}})},t.startAllService=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.cluster_name+"/services?",clusterName:e.cluster_name,params:{RequestInfo:{context:"_PARSE_."+e.type.toUpperCase()+".ALL_SERVICES",operation_level:{level:"CLUSTER",cluster_name:e.cluster_name}},Body:{ServiceInfo:{state:"start"==e.type?"STARTED":"INSTALLED"}}},method:"PUT"}})}},169:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.services={HBASE:{releaseVersion:null,name:"HBASE",display_name:"HBase",comment:"一个非关系型的、分布式的、面向列的开源数据库",versions:["1.2.0+3.4.4.0"]},AMBARI_METRICS:{releaseVersion:null,name:"AMBARI_METRICS",display_name:"Metrics",comment:"一个负责监控集群状态的功能组件",versions:["2.4.0+3.4.4.0"]},HDFS:{releaseVersion:null,name:"HDFS",display_name:"HDFS",comment:"Apache Hadoop 分布式文件系统",versions:["2.6.0+3.4.4.0"]},LEAPPROCESS:{releaseVersion:null,name:"LEAPPROCESS",display_name:"Task Scheduler",comment:"PriestProcess是一个大数据处理流程建立的工具.",versions:["5.2.1+3.4.4.0"]},LEAPID:{releaseVersion:null,name:"LEAPID",display_name:"User Admin",comment:"Leap系统的帐号中心，管理leap生态的帐号信息以及统一的登录入口。",versions:["1.0.0+3.4.4.0"]},SPARK2:{releaseVersion:null,name:"SPARK2",display_name:"Spark2",comment:"Apache Spark 2.0 is a fast and general engine for large-scale data processing. This service is Technical Preview.",versions:["2.0.0+3.4.4.0"]},YARN:{releaseVersion:null,name:"YARN",display_name:"YARN",comment:"一种新的 Hadoop 资源管理器",versions:["2.6.0+3.4.4.0"]},MAPREDUCE2:{releaseVersion:null,name:"MAPREDUCE2",display_name:"MapReduce2",comment:"一种新的 Hadoop 资源管理器",versions:["2.6.0+3.4.4.0"]},STORM:{releaseVersion:null,name:"STORM",display_name:"Storm",comment:"Apache Hadoop Stream processing framework",versions:["1.0.2+3.4.4.0"]},ZOOKEEPER:{releaseVersion:null,name:"ZOOKEEPER",display_name:"ZooKeeper",comment:"一个提供高依赖分布协调的集中服务",versions:["3.4.5+3.4.4.0"]},ELK:{releaseVersion:null,name:"ELK",display_name:"ELK",comment:"基于ELK服务的日志分析(Elasticsearch, Logstash, Kibana)",versions:["1.1.0+3.4.4.0"]},AMBARI_INFRA:{releaseVersion:null,name:"AMBARI_INFRA",display_name:"Leap Infra",comment:"Core shared service used by Leap managed components.",versions:["0.1.0+3.4.4.0"]},SENTRY:{releaseVersion:null,name:"SENTRY",display_name:"Sentry",comment:"Apache Sentry 是一个加强的细粒度的基于角色的授权系统，针对存储在 Hadoop 集群中的数据和元数据",versions:["1.5.1+3.4.4.0"]},FLUME:{releaseVersion:null,name:"FLUME",display_name:"Flume",comment:"一个高可用的，高可靠的，分布式的海量日志采集、聚合和传输的系统",versions:["1.6.0+3.4.4.0"]},SQOOP:{releaseVersion:null,name:"SQOOP",display_name:"Sqoop",comment:"一个用于在Apache Hadoop和结构化数据存储批量转换数据的工具，比如相关的数据库之间",versions:["1.4.6+3.4.4.0"]},KAFKA:{releaseVersion:null,name:"KAFKA",display_name:"Kafka",comment:"高吞吐量的分布式发布-订阅消息系统",versions:["0.9.0+3.4.4.0"]},HIVE:{releaseVersion:null,name:"HIVE",display_name:"Hive",comment:"数据仓库系统即席查询、大型数据集和表分析及存储管理服务",versions:["1.1.0+3.4.4.0"]},LOGSEARCH:{releaseVersion:null,name:"LOGSEARCH",display_name:"Log Search",comment:"Leapmanager里所管理的服务的日志聚合、分析和可视化查看",versions:["0.5.0+3.4.4.0"]},HADOOP_KMS:{releaseVersion:null,name:"HADOOP_KMS",display_name:"KMS",comment:"Key Management Server",versions:["2.6.0+3.4.4.0"]},KERBEROS:{releaseVersion:null,name:"KERBEROS",display_name:"Kerberos",comment:"工作在基于一个允许节点在非安全网络中以一种安全的方式通讯来相互检验各自身份的tickets的计算机网络认证协议",versions:["1.10.3-10"]},LEAPDATAHUB:{releaseVersion:null,name:"LEAPDATAHUB",display_name:"DATA HUB",comment:"Load data from RS DB to hadoop cluster",versions:["1.0.0+3.4.4.0"]},LEAPSQL:{releaseVersion:null,name:"LEAPSQL",display_name:"SQL Editor",comment:"PriestSQL是一个数据查询工具.",versions:["1.0.0+3.4.4.0"]},IMPALA:{releaseVersion:null,name:"IMPALA",display_name:"Impala",comment:"Impala是一种新型查询系统，它提供SQL语义，能查询存储在Hadoop的HDFS和HBase中的PB级大数据",versions:["1.2.0+3.4.4.0"]}}},209:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getServicesStatusInfo=t.getSummaryBaseInfoMaster=t.getSummaryWidgeInfo=t.getSummaryBaseInfo=t.postDisplayWidgetNameId=t.getSummeryLayout=t.getHostComponentsMetrics=t.loadRacks=t.getUserDropDownWidgetLayouts=t.getUserServiceLayout=t.getUserActiveWidgetLayouts=t.getHostListInfo=void 0;var n,l=a(75),r=(n=l)&&n.__esModule?n:{default:n};t.getHostListInfo=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e+"/hosts?fields=Hosts/rack_info,Hosts/host_name,Hosts/maintenance_state,Hosts/public_host_name,Hosts/cpu_count,Hosts/ph_cpu_count,alerts_summary,Hosts/host_status,Hosts/last_heartbeat_time,Hosts/ip,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/service_name,host_components/HostRoles/display_name,host_components/HostRoles/desired_admin_state,metrics/disk,metrics/load/load_one,Hosts/total_mem,Hosts/os_arch,Hosts/os_type,metrics/cpu/cpu_system,metrics/cpu/cpu_user,metrics/memory/mem_total,metrics/memory/mem_free,stack_versions/HostStackVersions,stack_versions/repository_versions/RepositoryVersions/repository_version,stack_versions/repository_versions/RepositoryVersions/id,stack_versions/repository_versions/RepositoryVersions/display_name&minimal_response=true,host_components/logging&page_size=10&from=0&sortBy=Hosts/host_name.asc",clusterName:e,method:"get"}})},t.getUserActiveWidgetLayouts=function(e,t){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/users/internaladmin/activeWidgetLayouts?WidgetLayoutInfo/section_name="+e+"_HEATMAPS",clusterName:t,method:"get"}})},t.getUserServiceLayout=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"api/v1/users/internaladmin?fields=*,privileges/PrivilegeInfo/cluster_name,privileges/PrivilegeInfo/permission_name",clusterName:e,method:"get"}})},t.getUserDropDownWidgetLayouts=function(e,t){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+t+"/widgets?WidgetInfo/widget_type=HEATMAP&WidgetInfo/scope=CLUSTER&WidgetInfo/metrics.matches(.*%22service_name%22:%22"+e+"%22.*)&fields=WidgetInfo/metrics",clusterName:t,method:"get"}})},t.loadRacks=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e+"/hosts?fields=Hosts/rack_info,Hosts/host_name,Hosts/public_host_name,Hosts/os_type,Hosts/ip,host_components,metrics/disk,metrics/cpu/cpu_system,metrics/cpu/cpu_user,metrics/memory/mem_total,metrics/memory/mem_free&minimal_response=true",clusterName:e,method:"get"}})},t.getHostComponentsMetrics=function(e,t){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.currentCluster+"/services/"+e.serviceName+"/components/"+e.component_name+"?"+t,clusterName:e.currentCluster,method:"get"}})},t.getSummeryLayout=function(e,t){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/users/internaladmin/activeWidgetLayouts?WidgetLayoutInfo/section_name="+e+"_SUMMARY",clusterName:t,method:"get"}})},t.postDisplayWidgetNameId=function(e,t,a){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+a+"/widget_layouts/"+e,clusterName:a,method:"put",params:t}})},t.getSummaryBaseInfo=function(e,t){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e+"/"+t,clusterName:e,method:"get"}})},t.getSummaryWidgeInfo=function(e,t){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e+"/"+t,clusterName:e,method:"get"}})},t.getSummaryBaseInfoMaster=function(e,t){return(0,r.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/"+e+"/components/?ServiceComponentInfo/component_name=APP_TIMELINE_SERVER|ServiceComponentInfo/category=MASTER&fields=ServiceComponentInfo/service_name,host_components/HostRoles/display_name,host_components/HostRoles/host_name,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/ha_state,host_components/HostRoles/desired_admin_state,&minimal_response=true",clusterName:e,method:"get"}})},t.getServicesStatusInfo=function(e){return(0,r.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/"+e+"/components/?ServiceComponentInfo/component_name=FLUME_HANDLER%7CServiceComponentInfo/component_name=APP_TIMELINE_SERVER%7CServiceComponentInfo/category=MASTER&fields=ServiceComponentInfo/service_name,host_components/HostRoles/display_name,host_components/HostRoles/host_name,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/ha_state,host_components/HostRoles/desired_admin_state",clusterName:e,method:"get"}})}},217:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={cpu:{cpu_idle:"CPU 闲置",cpu_nice:"CPU 良好",cpu_system:"CPU 系统",cpu_user:"CPU 使用",cpu_wio:"CPU I/O闲置"},disk:{disk_free:"可用",disk_total:"全部"},load:{load_fifteen:"15分钟的负载",load_five:"五分钟的负载",load_one:"一分钟的负载"},memory:{mem_cached:"缓存",mem_free:"闲置",mem_shared:"共享",swap_free:"交换"},network:{bytes_in:"字节输入",bytes_out:"字节输出",pkts_in:"包输入",pkts_out:"包输出"},process:{proc_run:"进程运行",proc_total:"总流程"}};t.chartName={cpu:"CPU",disk:"磁盘",load:"负载",memory:"内存",network:"网络",process:"进程"},t.categoryName=n,t.default=n},220:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkAddingStatus=t.postReServiceList=t.checkCreateStatus=t.postServiceList=t.getService=t.createCluster=t.getClusterTypes=void 0;var n,l=a(75),r=(n=l)&&n.__esModule?n:{default:n};t.getClusterTypes=function(e){return(0,r.default)({url:"/platform/getServerType",data:e})},t.createCluster=function(e){return(0,r.default)({url:"/platform/createCluster",data:e,method:"post"})},t.getService=function(e){return(0,r.default)({url:"/platform/getServiceAndComponent",data:e})},t.postServiceList=function(e){return(0,r.default)({url:"/platform/addServiceToCluster",data:e,method:"post"})},t.checkCreateStatus=function(e){return(0,r.default)({url:"/platform/checkCreatingStatus",data:e})},t.postReServiceList=function(e){return(0,r.default)({url:"/platform/addServiceToExistCluster",data:e,method:"post"})},t.checkAddingStatus=function(e){return(0,r.default)({url:"/platform/checkAddingStatus",data:e})}},221:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(14)),l=p(a(168)),r=p(a(12)),s=p(a(4)),o=p(a(6)),u=p(a(3)),i=p(a(5));a(22),a(167);var c=a(1),d=p(c),m=a(11),f=a(89);function p(e){return e&&e.__esModule?e:{default:e}}a(733);var h=function(e){function t(e){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.times=function(){if(!e)var e=setInterval(function(){var t=a.state.times-1;if(0===t)return clearInterval(e),e=null,void a.goback();a.setState({times:t})},1e3)},a.goback=function(){a.props.lastRouter;f.history.push("/")},a.state={times:5,isJump:!1},a.percent=null,a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;!e.createStatus||"SUCCESS"!=e.createStatus&&"START FAILED"!=e.createStatus||(this.setState({percent:100}),setTimeout(function(){t.setState({isJump:!0}),sessionStorage.removeItem("currentCluster"),sessionStorage.removeItem("clusterList"),t.times()},1e3))}},{key:"render",value:function(){var e=this.props.createStatus;if((e=e||"")&&e.indexOf("step")>=0){var t=e&&e.split("step")[1].split(" ")[0];this.percent=t>0?(t*(100/14)).toFixed(2):2}return!e||"SUCCESS"!=e&&"START FAILED"!=e||(this.percent=100),d.default.createElement("div",{className:"stepSuccess"},!this.state.isJump&&e?d.default.createElement("div",{className:"statusProgress"},"FAILED"!=e&&e.indexOf("SUCCESS")<0&&d.default.createElement("h2",null,"服务正在安装中",d.default.createElement("span",{className:"dotdotdot"}),d.default.createElement("p",{className:"smalltips fr"},"预计需要时间5-15分钟")),"FAILED"==e&&d.default.createElement("h2",{style:{color:"#f5222d"}},"安装失败"),d.default.createElement(l.default,{percent:+this.percent,status:e&&"FAILED"==e?"exception":"active"}),d.default.createElement("p",{style:{margint:"15px",textAlign:"left"}},e)):d.default.createElement("div",{className:"jump"},d.default.createElement(n.default,{type:"check-circle"}),d.default.createElement("h1",null,this.props.title),this.state.times,"秒后跳转, 若没有跳转, 请点击",d.default.createElement("a",{onClick:this.goback},"跳转")))}}]),t}(c.Component),v=(0,m.connect)(function(e){return{createStatus:e.create.createStatus,lastRouter:e.app.lastRouter}})(h);t.default=v},296:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uptimeProcessing=t.timeConverter=t.mapProperty=t.deepObj=void 0;var n,l=a(23),r=(n=l)&&n.__esModule?n:{default:n};var s=function(e,t){return""===t?e:(t||"string"!=typeof e||(t=e,e=null),e&&-1===t.indexOf(".")?e[t]:o(e,t))};function o(e,t){var a,n,l=void 0,r=void 0;if(null===e&&-1===t.indexOf("."))return s(window,t);for(e||(e=(l=function(e,t){var a=void 0;if(e===window&&(a=firstKey(t),e=s(e,a),t=t.slice(a.length+1)),!t||0===t.length)throw new Error("Invalid Path");return[e,t]}(e,t))[0],t=l[1],l.length=0),n=(a=t.split(".")).length,r=0;e&&r<n;r++)if((e=s(e,a[r],!0))&&e.isDestroyed)return;return e}function u(e){var t=(0,r.default)(new Date(e));return[t.format("ddd MMM DD YYYY"),t.format("HH:mm:ss")]}t.deepObj=s,t.mapProperty=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1];return e.map(function(e){return s(e,t)})},t.timeConverter=u,t.uptimeProcessing=function(e){var t=u(e),a=(new Date).getTime()-e;a<0&&(a=0);var n=function(e,t){var a=parseInt(e);if(t&&0==a)return"0 secs";if(!a)return null;var n=a.toString().length;return n<4?e+" ms":n<7?(e=(e/1e3).toFixed(2))+" secs":e<36e5?(e=(e/6e4).toFixed(2))+" mins":e<864e5?(e=(e/36e5).toFixed(2))+" hours":(e=(e/864e5).toFixed(2))+" days"}(a),l=null;if(n)switch(n.split(" ")[1]){case"secs":l="s";break;case"hours":l="hr";break;case"days":l="d";break;case"mins":l="min";break;default:l=n.split(" ")[1]}return{timeUnit:l,hiddenInfo:[n,t[0],t[1]],formatted:n}}},300:function(e,t,a){e.exports=a.p+"static/media/register_bg.741f96ad.png"},326:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=e.map(function(e){return e.Hosts.host_name}).join(",");if(1==t){var l=[];e&&e.map(function(e){var t=e.host_components;l=l.concat(t)}),l&&l.map(function(e){for(var t=e.HostRoles,n={service_name:t.service_name,component_name:t.component_name,hosts:t.host_name},l=!1,r=0,s=a.length;r<s;r++){var o=a[r];if(o.service_name==n.service_name&&o.component_name==n.component_name){o.hosts.indexOf(n.hosts)<0&&(a[r].hosts+=","+n.hosts),l=!0;break}l=!1}a.length&&l||a.push(n)})}else 2==t?(e&&e.map(function(e){var t=[],n=e.host_components;n&&n.map(function(e){t.push(e.HostRoles.component_name)}),a.push("(HostRoles/component_name.in("+t.join(",")+")&HostRoles/host_name="+e.Hosts.host_name+")")}),a=a.join("|")):a=n;return{data:a,hostsStr:n}}},327:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(a(2)),l=s(a(70));a(79);var r=s(a(1));function s(e){return e&&e.__esModule?e:{default:e}}var o=l.default.SubMenu;function u(e){return r.default.createElement(o,{className:"hostSubMenu",key:e.keys,disabled:e.disabled,title:r.default.createElement("span",null,e.title)},r.default.createElement(o,{key:"host",title:r.default.createElement("span",null,r.default.createElement("span",null,"主机"))},r.default.createElement(l.default.Item,{key:"startAll","data-text":"启动所有组件"},"启动所有组件"),r.default.createElement(l.default.Item,{key:"stopAll","data-text":"停止所有组件"},"停止所有组件"),r.default.createElement(l.default.Item,{key:"restartAll","data-text":"重启已选择主机上的全部组件"},"重启所有组件"),r.default.createElement(l.default.Item,{key:"reinstall","data-text":"重新安装失败组件"},"重新安装失败组件"),r.default.createElement(l.default.Item,{key:"open","data-text":"为hosts打开维护模式"},"打开维护模式"),r.default.createElement(l.default.Item,{key:"close","data-text":"为hosts关闭维护模式"},"关闭维护模式"),r.default.createElement(l.default.Item,{key:"setRack","data-text":"设置Rack"},"设置Rack")))}t.default=function(e){return r.default.createElement(l.default,{onClick:e.onChange,selectable:!1,style:{width:160},mode:"vertical",className:"hostOperateMenu"},u((0,n.default)({},e,{title:"已选择的主机("+(e.choose||0)+")",disabled:!e.choose,keys:"choose"})),u((0,n.default)({},e,{title:"所有主机("+(e.all||0)+")",disabled:!1,keys:"all"})))}},328:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(37)),l=f(a(44)),r=f(a(17)),s=f(a(12)),o=f(a(4)),u=f(a(6)),i=f(a(3)),c=f(a(5));a(36),a(48),a(20);var d=a(1),m=f(d);f(a(88)),a(11);function f(e){return e&&e.__esModule?e:{default:e}}a(722);var p=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.cancelBtn=function(){a.props.hideVersionModal()},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.showVersionModal;e.versionModalInfo;return m.default.createElement(n.default,{title:"版本的详细信息",visible:t,onCancel:this.cancelBtn,width:"350px",footer:m.default.createElement("div",null,m.default.createElement(r.default,{onClick:this.cancelBtn},"关闭"))},m.default.createElement("div",{className:"versionName"},"222"),m.default.createElement("div",{className:"hostInfo"},m.default.createElement("p",null,"host"),m.default.createElement("ul",null,m.default.createElement("li",null,m.default.createElement(l.default,{placement:"top",title:"没有主机列表"},"0"),m.default.createElement("br",null),"没有安装"),m.default.createElement("li",null,m.default.createElement(l.default,{placement:"top",title:"没有主机列表"},"0"),m.default.createElement("br",null),"已安装"),m.default.createElement("li",null,m.default.createElement(l.default,{placement:"top",title:"12"},"0"),m.default.createElement("br",null),"当前"))))}}]),t}(d.Component);t.default=p},329:function(e,t,a){},330:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(17)),l=y(a(39)),r=y(a(76)),s=y(a(114)),o=y(a(8)),u=y(a(105)),i=y(a(78)),c=y(a(65)),d=y(a(12)),m=y(a(4)),f=y(a(6)),p=y(a(3)),h=y(a(5));a(20),a(38),a(99);var v=a(1),E=y(v),g=a(11);y(a(116));function y(e){return e&&e.__esModule?e:{default:e}}a(738);var _=function(e){function t(e){(0,m.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this));return a.columns=function(e){if(!e)return[];var t=a.state.allKey,n=a.props.installedServices,l=e[0].slave,r=l&&(0,c.default)(l).map(function(r,s){var o=l[r],u=t[o.name]&&t[o.name].length==e.length||!1,c=!!n&&n.includes(o.serverName);return{title:E.default.createElement(i.default,{disabled:c,checked:u,onChange:a.checkboxChange.bind(a,o,"all")},"全选"),dataIndex:"slave."+o.name,render:function(e,l){var r=!!t[e.name]&&t[e.name].includes(l.host.vmHost),s=!!n&&n.includes(e.serverName);return E.default.createElement(i.default,{disabled:s,checked:r,onChange:a.checkboxChange.bind(a,l,e)},e.displayName)}}});return[{title:"主机",dataIndex:"host",fixed:"left",width:130,render:function(e){return E.default.createElement("span",null,e.vmHost)}}].concat((0,u.default)(r))},a.formatSlaveData=function(e,t){var a=[];return e&&e.map(function(e){(0,c.default)(t).map(function(a){t[a].host=e}),a.push({host:e,slave:t})}),a.length>0?a:void 0},a.checkboxChange=function(e,t,n){var l=a.state.allKey,r=a.props,s=r.hostList,o=r.hostListInstalled,u=r.installedSlave;if(s=s||o,n.target.checked)if("all"===t)l[e.name]=s.map(function(e){return e.vmHost});else{var i=t.name,c=e.host.vmHost;l[i]?l[i].includes(c)?l[i]=l[i]:l[i].push(c):l[i]=[c]}else if("all"===t)delete l[e.name],u&&u[e.name]&&(l[e.name]=u[e.name]);else{var d=t.name,m=e.host.vmHost;if(l[d]){var f=l[d].indexOf(m);l[d].splice(f,1)}l[d]&&0!=l[d].length||delete l[d]}a.setState({allKey:l})},a.onNextStep=function(){var e=a.props,t=e.master,n=e.slaveList,l=e.clustername,u=e.installedServices,i=e.currentCluster,d=a.state.allKey,m={};(0,c.default)(d).map(function(e){var t=n[e].serverName;m[t]?m[t].push((0,o.default)({},e,d[e])):m[t]=[(0,o.default)({},e,d[e])]}),t&&t.map(function(e){var t=e.serverName,a=[];e.choose&&(0,s.default)(e.choose).map(function(e){a.push(e.vmHost)}),m[t]?m[t].push((0,o.default)({},e.name,a)):m[t]=[(0,o.default)({},e.name,a)]}),a.setState({postLoading:!0}),u?((0,c.default)(m).map(function(e){u.includes(e)&&delete m[e]}),g.actions.create.postReServiceList({services:(0,r.default)(m),clustername:i.clusterName}).then(function(e){1==e.code&&setTimeout(function(){a.setState({postLoading:!1}),a.props.onsubmit(d,1,"slave")},3e3)})):g.actions.create.postServiceList({services:(0,r.default)(m),clustername:l}).then(function(e){a.setState({postLoading:!1}),a.props.onsubmit(d,1,"slave")})},a.state={allKey:{}},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.value;if(e)this.setState({allKey:e});else{var t=this.props,a=t.installedSlave,n=t.slaveList,l=t.hostListInstalled,o=t.hostList;o=l||o;var u={};if(n){var i=0,c=o.map(function(e){return e.vmHost});(0,s.default)(n).map(function(e){"DATANODE"==e.name||"NODEMANAGER"==e.name?u[e.name]=c:e.displayName.includes(" Client")?u[e.name]=c:(u[e.name]=[c[i]],3==i?i=0:i++)})}a?this.setState({allKey:JSON.parse((0,r.default)(a))}):this.setState({allKey:u})}}},{key:"componentWillReceiveProps",value:function(e){e.createStatus&&"SUCCESS"==e.createStatus&&this.props.onsubmit(this.state.postData,1,"slave")}},{key:"render",value:function(){var e=this,t=this.props,a=t.slaveList,r=t.hostList,s=t.createStatus;r=t.hostListInstalled||r;var o=this.state,u=(o.postData,o.postLoading),i=this.formatSlaveData(r,a),c=this.columns(i);return E.default.createElement("div",{className:"chooseSlaveClient stepContent"},E.default.createElement("h2",null,"指派SLAVE和CLIENT"),E.default.createElement(l.default,{bordered:!0,className:"slaveAndClient",columns:c,dataSource:i,scroll:{x:1500},pagination:!1,rowKey:function(e){return e.host.vmId}}),"FAILED"==s&&E.default.createElement("p",{style:{color:"red",margin:"10px 0 0 0"}},"配置主机失败, 请检查配置或稍候再试"),E.default.createElement("div",{className:"btnGroup"},E.default.createElement(n.default,{disabled:u,onClick:function(){return e.props.onsubmit(null,-1,"slave")}},"上一步"),E.default.createElement(n.default,{loading:u,className:"stepNext",onClick:this.onNextStep,type:"primary"},"下一步")))}}]),t}(v.Component),S=(0,g.connect)(function(e){return{slaveList:e.create.slaveList,hostList:e.create.hostList,createStatus:e.create.createStatus,currentCluster:e.app.currentCluster}})(_);t.default=S},331:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(27)),l=g(a(2)),r=g(a(8)),s=g(a(114)),o=g(a(17)),u=g(a(65)),i=g(a(12)),c=g(a(4)),d=g(a(6)),m=g(a(3)),f=g(a(5));a(29),a(20);var p=a(1),h=g(p),v=a(11),E=g(a(116));function g(e){return e&&e.__esModule?e:{default:e}}a(740);var y=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.isOverflow=function(e,t,n){var l=e[n%4];return a.hostMaxmemory[l.vmHost]+t.minMemory>=1024*l.totalMem?(n++,l=e.splice(n%4,1)[0]):e.splice(n%4,1),t.choose[l.vmHost]=l,a.hostMaxmemory[l.vmHost]+=t.minMemory,{record:t,hostIdx:n,allHosts:e}},a.addRecord=function(e,t,n){var l=a.state.master,r=((0,u.default)(e.choose).length,(0,u.default)(e.hosts)[0]),s=e.hosts[r];delete l[t].hosts[r],s.isnew=!0,l[t].choose[s.vmHost]=s,a.setState({master:l})},a.subRecord=function(e,t,n){var l=a.state.master,r=e.choose[t];delete l[n].choose[t],l[n].hosts[r.vmHost]=r,a.setState({master:l})},a.selectChange=function(e,t,n){var l=a.state.master,r=l[t].hosts[n],s=l[t].choose[e],o=l[t].choose,u=l[t].hosts;r.isnew=!0,l[t].choose=a.setObjectValue(o,n,r,e),l[t].hosts=a.setObjectValue(u,e,s,n),l=a.mustTogetherComponent(l),a.setState({master:l})},a.setObjectValue=function(e,t,a,n){var l=[],r=[],s={};for(var o in e)l.push(o),r.push(e[o]);var u=l.indexOf(n);return l[u]=t,r[u]=a,r.map(function(e,t){s[l[t]]=e}),s},a.getComponentsByHost=function(e,t){var a={};t.map(function(e){a[e.vmHost]={services:[],max:0,min:0,host:e.vmHost}});var n=[];return e&&e.map(function(e){e.choose&&(0,u.default)(e.choose).map(function(t){var l=E.default.cloneDeep(e);l.choose[t].isnew?l.isnew=!0:l.isnew=!1,a[t].services.push(l),a[t].max+=l.maxMemory,a[t].min+=l.minMemory;var r=(l.choose[t].totalMem/1024).toFixed(2);a[t].vmConfig=r,a[t].min>=1024*r*1024?(a[t].isOver=!0,n.push(t)):a[t].isOver=!1})}),{newHosts:a,memoryOverflow:0!=n.length&&n}},a.renderMasterDom=function(e,t,n){var l=e.cardinality,r=[],s=(0,u.default)(e.choose);return s.length>0&&(r=s.map(function(r,u){return h.default.createElement("li",{className:"masterRow",key:e.id+"-"+r},h.default.createElement("span",{className:"leftLabel",title:e.displayName},e.displayName,":"),h.default.createElement(S,{disabled:e.choose[r].isInstall||a.needntSelect.includes(e.displayName),data:e.hosts,current:e.choose[r],value:e.choose[r].vmHost,onChange:a.selectChange.bind(a,r,t)}),(l.includes("-")||l.includes("+"))&&!l.includes("0-")&&!e.choose[r].isInstall&&h.default.createElement("span",{className:"addOrSubBtn"},"1+"==l&&s.length<n.length&&u+1==s.length&&h.default.createElement(o.default,{onClick:a.addRecord.bind(a,e,t)},"+"),s.length>1&&h.default.createElement(o.default,{onClick:a.subRecord.bind(a,e,r,t)},"-")))})),r},a.renderHostService=function(e){return h.default.createElement("div",{className:"servicesBox"},e.map(function(e){return h.default.createElement("label",{key:e.id,style:{background:e.isnew?"#69be28":"#a9b4bb"}},e.displayName)}))},a.mustTogetherComponent=function(e){var t={HiveServer2:"WebHCat Server","Metrics Collector":"Grafana"},a={},n={},l=(0,s.default)(t);e&&e.map(function(e,r){t[e.displayName]&&(a[t[e.displayName]]=e),l.includes(e.displayName)&&(e.idx=r,n[e.displayName]=e)});var o=(0,u.default)(n);return o.length>0&&o&&o.map(function(t){var l=n[t],s=(0,u.default)(a[t].choose);e[l.idx].choose=(0,r.default)({},s[0],a[t].choose[s[0]]),e[l.idx].hosts=a[t].hosts}),e},a.onNextStep=function(){var e=a.state.master,t={};e&&e.map(function(e){var a=t[e.name]||[];e.choose&&(0,s.default)(e.choose).map(function(e){a.push(e.vmHost)}),t[e.name]=a}),a.props.onsubmit(e,1,"master")},a.state={},a.needntSelect=["Grafana","WebHCat Server"],a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.value;if(!t||(this.setState({master:t}),this.props.installedMaster)){var a=this.props,n=a.masterList,r=a.hostList,s=a.hostListInstalled,o=a.installedMaster;r=s||r;var u=0,i={};this.hostMaxmemory={},r.map(function(t){e.hostMaxmemory[t.vmHost]=0,i[t.vmHost]=t}),n=n&&n.map(function(t,a){if(i=E.default.cloneDeep(i),t.choose={},o&&o[t.name])o[t.name].map(function(e){var a=(0,l.default)({},i[e]);a.isInstall=!0,t.choose[e]=a});else{var n=E.default.cloneDeep(r);if("number"==typeof+t.cardinality&&!isNaN(+t.cardinality)||"ALL"==t.cardinality){var s="ALL"==t.cardinality?r.length:+t.cardinality;if(1==+t.cardinality){var c=e.isOverflow(n,t,u);t=c.record,u=c.hostIdx,n=c.allHosts}else"0".repeat(s).split("").map(function(a,l){var r=e.isOverflow(n,t,u);t=r.record,u=r.hostIdx,n=r.allHosts})}else{var d=e.isOverflow(n,t,u);t=d.record,u=d.hostIdx,n=d.allHosts}u++;var m={};n.map(function(e){m[e.vmHost]=e}),t.hosts=m}return t}),n=this.mustTogetherComponent(n),this.setState({master:n,hosts:r})}}},{key:"render",value:function(){var e=this,t=this.state,a=t.master,n=(t.hosts,this.props),l=n.hostList,r=n.hostListInstalled;l=r||l;var u=this.getComponentsByHost(a,l)||{},i=u.newHosts,c=u.memoryOverflow;return h.default.createElement("div",{className:"chooseMasterSlave stepContent"},h.default.createElement("h2",null,"指派 MASTER"),h.default.createElement("div",{className:"choosemasterContent clearfix"},h.default.createElement("ul",{className:"chooseMaster fl"},a&&a.map(function(t,a){return e.renderMasterDom(t,a,l)})),h.default.createElement("ul",{className:"hostComponentDetail fr"},i&&(0,s.default)(i).map(function(t){return h.default.createElement("li",{key:t.host},h.default.createElement("p",null,t.host,"(",t.vmConfig,"GB)"),h.default.createElement("p",null,"所有组件所需最大内存: ",t.max?(t.max/1024/1024).toFixed(2):0,"GB"),h.default.createElement("p",{style:{color:t.isOver?"red":"#666"}},"所有组件所需最小内存: ",t.min?(t.min/1024/1024).toFixed(2):0,"GB"),t.services.length>0&&e.renderHostService(t.services))}))),h.default.createElement("div",{className:"btnGroup"},c&&h.default.createElement("p",{style:{color:"red",fontSize:12}},"主机 ",c.shift()," 内存超出, 请重新分配服务"),h.default.createElement(o.default,{onClick:function(){return e.props.onsubmit(null,-1,"master")}},"上一步"),h.default.createElement(o.default,{disabled:c,className:"stepNext",onClick:this.onNextStep,type:"primary"},"下一步")))}}]),t}(p.Component),_=(0,v.connect)(function(e){return{masterList:e.create.masterList,hostList:e.create.hostList}})(y);function S(e){var t=e.data,a=e.onChange,l=e.value,r=e.current,s=e.disabled,o=void 0!==s&&s;return h.default.createElement(n.default,{value:l,onChange:a,className:"hostSel",style:{width:300},disabled:o},h.default.createElement(n.default.Option,{value:r.vmHost},r.vmHost),t&&(0,u.default)(t).map(function(e,a){return h.default.createElement(n.default.Option,{value:e,key:e},t[e].vmHost)}))}t.default=_},332:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(17)),l=S(a(44)),r=S(a(14)),s=S(a(78)),o=S(a(26)),u=S(a(25)),i=S(a(2)),c=S(a(114)),d=S(a(12)),m=S(a(4)),f=S(a(6)),p=S(a(3)),h=S(a(5));a(20),a(48),a(22),a(99);var v=a(1),E=S(v),g=a(11),y=a(169);function S(e){return e&&e.__esModule?e:{default:e}}var N=function(e){function t(e){(0,m.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.checkboxHandle=function(e,t,n){if("errorDom"!=n.target.className){var l=_.cloneDeep(a.state.selectComponent)||{},r=_.cloneDeep(a.state.devTools);(t?!l[e.name]:n.target.checked)?l[e.name]=+e.id:delete l[e.name];var s=a.hasRequired(l,r);a.setState({selectComponent:l,devTools:s})}},a.hasRequired=function(e,t){if(t){var n=(0,c.default)(e),l={};return a.errMsgId={},t.map(function(e){e.requiredServiceName=null,l[e.id]=e}),n&&n.map(function(e){var t={},r=l[e];r&&r.requiredServices&&(r.requiredServices.split(",").map(function(e){n.includes(+e)||(t[e]=l[e].displayName,a.errMsgId[e]=l[e].displayName)}),l[e].requiredServiceName=t)}),(0,c.default)(l)}},a.nextStepHandle=function(){var e=a.state.selectComponent;if(a.props.serviceName){var t=a.props,n=t.serviceList,l=t.installedServices,r={};n.map(function(e,t){l&&l.includes(e.name)&&(r[e.name]=+e.id)});var s=(0,i.default)({},e,r);return g.actions.create.getComponents(s),void a.props.onsubmit(r,1,"installDevTools")}var o=a.props.components,u=(0,i.default)({},o,e);g.actions.create.getComponents(u),a.props.onsubmit(a.state.selectComponent,1,"installDevTools")},a.state={},a}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentWillMount",value:function(){var e=(0,u.default)(o.default.mark(function e(){var t,a,n,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.value,a=this.props.serviceName,n=this.props.devTools){e.next=6;break}return e.next=6,g.actions.create.getService();case 6:n=this.props.devTools,l=this.props.installedServices,t=t||{},n.map(function(e,n){l?(l.includes(e.name)||a==e.name)&&(t[e.name]=+e.id):e.necessary&&(t[e.name]=+e.id)}),this.setState({selectComponent:t,devTools:n});case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.selectComponent||{},a=this.props,o=a.devTools,u=a.installedServices;return E.default.createElement("div",{className:"installComponent stepContent"},E.default.createElement("h2",null,"请选择需要安装的LEAP开发工具"),E.default.createElement("div",{className:"componentBox"},E.default.createElement("div",{className:"selectGroup"},o&&o.map(function(a,n){return E.default.createElement("div",{className:"selectItem",key:a.id,onClick:a.necessary?function(){}:e.checkboxHandle.bind(e,a,"click")},E.default.createElement(s.default,{disabled:u?u.includes(a.name):a.necessary,onChange:e.checkboxHandle.bind(e,a,""),checked:t[a.name]||!1}),E.default.createElement("span",{className:"selectItemName"},a.displayName,E.default.createElement(l.default,{title:y.services[a.name].comment},E.default.createElement(r.default,{type:"question-circle-o",className:"serviceComment"}))),E.default.createElement("span",null,"版本号: ",y.services[a.name].versions))}))),E.default.createElement("div",{className:"btnGroup"},!this.props.installedServices&&E.default.createElement(n.default,{onClick:function(){return e.props.onsubmit(null,-1,"installDevTools")}},"上一步"),E.default.createElement(n.default,{type:"primary",className:"stepNext",onClick:this.nextStepHandle},"下一步")))}}]),t}(v.Component),C=(0,g.connect)(function(e){return{devTools:e.create.devTools,serviceList:e.create.serviceList}})(N);t.default=C},333:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(50)),l=S(a(17)),r=S(a(44)),s=S(a(14)),o=S(a(2)),u=S(a(65)),i=S(a(114)),c=S(a(12)),d=S(a(4)),m=S(a(6)),f=S(a(3)),p=S(a(5)),h=S(a(78));a(49),a(20),a(48),a(22),a(99);var v=a(1),E=S(v),g=a(11);a(742);var y=a(169);function S(e){return e&&e.__esModule?e:{default:e}}h.default.Group;var N=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.componentWillMount=function(){var e=a.props.value,t=a.props.serviceName;a.setState({btnLoading:!0,selectComponent:e}),g.actions.create.getService().then(function(n){var l=a.props.serviceList;e=e||{},l.map(function(n,l){var r=a.props.installedServices;r?(r.includes(n.name)||t==n.name)&&(e[n.name]=+n.id):n.necessary&&(e[n.name]=+n.id)}),l=a.hasRequired(e,l),a.setState({selectComponent:e,serviceList:l,btnLoading:!1})}).catch(function(e){a.setState({btnLoading:!1})})},a.checkboxHandle=function(e,t,n){if("errorDom"!=n.target.className){var l=_.cloneDeep(a.state.selectComponent)||{},r=_.cloneDeep(a.state.serviceList);(t?!l[e.name]:n.target.checked)?l[e.name]=+e.id:delete l[e.name];var s=a.hasRequired(l,r);a.setState({selectComponent:l,serviceList:s})}},a.hasRequired=function(e,t){if(t){var n=(0,i.default)(e),l={};return a.errMsgId={},t.map(function(e){e.requiredServiceName=null,l[e.id]=e}),n&&n.map(function(e){var t={},r=l[e];r.requiredServices&&(r.requiredServices.split(",").map(function(e){n.includes(+e)||(t[e]=l[e].displayName,a.errMsgId[e]=l[e].displayName)}),l[e].requiredServiceName=t)}),(0,i.default)(l)}},a.nextStepHandle=function(){if(!((0,u.default)(a.errMsgId).length>0)){var e=a.props,t=(e.components,e.installedServices),n=a.state.selectComponent;if(t){var l=a.props,r=l.devTools,s=l.installedServices,i={};r.map(function(e,t){s&&s.includes(e.name)&&(i[e.name]=+e.id)});var c=(0,o.default)({},n,i);return g.actions.create.getComponents(c),void a.props.onsubmit(i,1,"installComponent")}a.props.onsubmit(a.state.selectComponent,1,"installComponent")}},a.state={},a.errMsgId={},a}return(0,p.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e=this,t=this.state.selectComponent||{},a=this.props,o=a.serviceList,u=a.installedServices,c=(0,i.default)(this.errMsgId);return o=this.state.serviceList||o,E.default.createElement("div",{className:"installComponent stepContent"},E.default.createElement(n.default,{spinning:!o},E.default.createElement("h2",null,"请选择要安装的LEAP组件"),E.default.createElement("div",{className:"componentBox"},E.default.createElement("div",{className:"selectGroup"},!o&&E.default.createElement("p",null,"正在获取数据"),E.default.createElement("div",null,o&&o.map(function(a){var n=a.requiredServiceName&&(0,i.default)(a.requiredServiceName)||"";return E.default.createElement("div",{onClick:a.necessary?function(){}:e.checkboxHandle.bind(e,a,"div"),className:"selectItem",key:a.id},E.default.createElement(h.default,{disabled:u?u.includes(a.name):a.necessary,onChange:e.checkboxHandle.bind(e,a,""),checked:t[a.name]||!1}),E.default.createElement("span",{className:"selectItemName"},a.displayName,E.default.createElement(r.default,{title:y.services[a.name].comment},E.default.createElement(s.default,{type:"question-circle-o",className:"serviceComment"}))),E.default.createElement("span",null,"版本号: ",y.services[a.name].versions),E.default.createElement("span",{className:"errorDom",style:{color:"red"}},n&&n.length>0&&"此组件必须依赖于 "+n.join("、")))})),o&&0==o.length&&E.default.createElement("p",null,"暂无数据"))),c&&c.length>0&&E.default.createElement("p",{style:{color:"red",margin:0,marginTop:10}},"当前配置中, ",c.join("、")," 等依赖项尚未勾选."),E.default.createElement("div",{className:"btnGroup"},!this.props.installedServices&&E.default.createElement(l.default,{onClick:function(){return e.props.onsubmit(null,-1,"installComponent")}},"上一步"),E.default.createElement(l.default,{loading:this.state.btnLoading,className:"stepNext",onClick:this.nextStepHandle,type:"primary"},"下一步"))))}}]),t}(v.Component),C=(0,g.connect)(function(e){return{serviceList:e.create.serviceList,devTools:e.create.devTools}})(N);t.default=C},334:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,l=_(a(37)),r=_(a(8)),s=_(a(12)),o=_(a(4)),u=_(a(6)),i=_(a(3)),c=_(a(5)),d=_(a(27)),m=_(a(120)),f=_(a(136));a(36),a(29),a(142),a(135);var p=_(a(1)),h=(_(a(10)),_(a(333))),v=_(a(332)),E=_(a(331)),g=_(a(330));_(a(221));a(731),a(329);var y=a(11);function _(e){return e&&e.__esModule?e:{default:e}}var S=f.default.Step,N=(m.default.Group,d.default.Option,m.default.Button,function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.stepHandle=function(e,t,n,l){var s=a.state.currentStep;if(s+=t,document.querySelector(".createstepWrapper").scrollTop=0,e=e||a.state[n],"slave"===n)return a.handleCancel(),void y.actions.host.updateState({taskModalVisible:!0});0===l?a.setState((0,r.default)({},n,e)):a.setState((0,r.default)({currentStep:s},n,e))},a.handleCancel=function(){a.setState({installComponent:null,installDevTools:null,slave:null,master:null,currentStep:0}),a.props.callbackParent()},a.state={currentStep:0,hostList:[],installedMaster:{},installedSlave:{}},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.currentStep,a=e.config,n=e.installComponent,r=e.installDevTools,s=e.master,o=e.slave,u=this.props,i=u.modalVisible,c=u.installType,d=u.serviceName,m=u.installedServices,f=u.hostList,y=u.installedMaster,_=u.installedSlave,N=["component"==c?"安装组件":"安装开发工具","指派Master","指派slave和client"];return p.default.createElement("div",null,i&&p.default.createElement(l.default,{width:1e3,visible:i,title:"添加服务向导",onOk:this.handleOk,onCancel:this.handleCancel,footer:!1},p.default.createElement("div",{className:"createLeapPlatForm installModal"},p.default.createElement("div",{className:"createClusterInner"},p.default.createElement("div",{className:"createstepWrapper"},p.default.createElement(C,{className:"createSteps",currentStep:t||0,steps:N},function(e,t){return p.default.createElement(S,{key:t,title:e,icon:p.default.createElement("i",null,t+1)})}),0==t?"component"==c?p.default.createElement(h.default,{serviceName:d,installedServices:m,value:n,onsubmit:this.stepHandle}):p.default.createElement(v.default,{value:r,installedServices:m,serviceName:d,components:n,onsubmit:this.stepHandle}):"",1==t&&p.default.createElement(E.default,{installedMaster:y,hostListInstalled:f,value:s,onsubmit:this.stepHandle}),2==t&&p.default.createElement(g.default,{value:o,master:s,installedServices:m,installedSlave:_,hostListInstalled:f,clustername:a&&a.clustername,onsubmit:this.stepHandle}))))))}}]),t}(p.default.Component));function C(e){return p.default.createElement(f.default,{current:e.currentStep,className:e.className},e.steps.map(function(t,a){return e.children(t,a)}))}t.default=N,N.defaultProps=(n={modalVisible:!1,installType:"component",installedServices:[],installedSlave:[]},(0,r.default)(n,"installedSlave",[]),(0,r.default)(n,"serviceName",""),n)},335:function(e,t,a){},350:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.restartAllComponents=t.operateService=t.getServiceNumber=t.getMetricsSummaryChartInfo=t.getServiceSummaryChartInfo=t.getServiceSummary=t.getCOmponentStatus=t.getServiceMetric=t.getHdfsLink=t.getHbaseLink=t.Persist=t.getClusterStatteComponent=void 0;var n=r(a(76)),l=r(a(75));function r(e){return e&&e.__esModule?e:{default:e}}t.getClusterStatteComponent=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/persist/user-pref-internaladmin-dashboard",clusterName:e,method:"get"}})},t.Persist=function(e,t){return(0,l.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/persist",clusterName:t,method:"post",params:(0,n.default)(e)}})},t.getHbaseLink=function(e){return(0,l.default)({url:"/api/v1/stacks/"+cluster+"/versions/3.4.4/services/HBASE/quicklinks",data:e})},t.getHdfsLink=function(e){return(0,l.default)({url:"/api/v1/stacks/"+cluster+"/versions/3.4.4/services/HBASE/quicklinks",data:e})},t.getServiceMetric=function(e,t){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+t+"/"+e,clusterName:t,method:"get"}})},t.getCOmponentStatus=function(e){return(0,l.default)({url:"/platform/ForwardTo",method:"get",data:{url:"/api/v1/clusters/"+e.clusterName+"/alerts?fields=Alert/component_name,Alert/definition_id,Alert/definition_name,Alert/host_name,Alert/id,Alert/instance,Alert/label,Alert/latest_timestamp,Alert/maintenance_state,Alert/original_timestamp,Alert/scope,Alert/service_name,Alert/state,Alert/text,Alert/repeat_tolerance,Alert/repeat_tolerance_remaining&Alert/state.in(CRITICAL,WARNING)&Alert/maintenance_state.in(OFF)&from=0&page_size=1000",clusterName:e.clusterName,method:"get"}})},t.getServiceSummary=function(e){return(0,l.default)({url:"/platform/ForwardTo",method:"get",data:{url:"/api/v1/users/internaladmin/activeWidgetLayouts?WidgetLayoutInfo/section_name="+e.service_name+"_SUMMARY",clusterName:e.cluster_name,method:"get"}})},t.getServiceSummaryChartInfo=function(e){return(0,l.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/LPC-4-1530756137/host_components?HostRoles/component_name=RESOURCEMANAGER&HostRoles/ha_state=ACTIVE&fields="+e.params+"&format=null_padding",clusterName:e.cluster_name,method:"get"}})},t.getMetricsSummaryChartInfo=function(e){var t=e.start,a=e.end;return a=String(a||(new Date).getTime()).substr(0,10),t=String(t||a).substr(0,10)-3600,(0,l.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/"+e.cluster_name+"/services/"+(e.service_name||"AMBARI_METRICS")+"/components/"+(e.component_name||"METRICS_COLLECTOR")+"?fields=metrics/hbase/master/AverageLoad["+t+","+a+",15],metrics/hbase/regionserver/storefiles["+t+","+a+",15],metrics/hbase/regionserver/regions["+t+","+a+",15],metrics/hbase/regionserver/requests["+t+","+a+",15],metrics/hbase/regionserver/blockCacheHitPercent["+t+","+a+",15],metrics/hbase/regionserver/compactionQueueSize["+t+","+a+",15]",clusterName:e.cluster_name,method:"get"}})},t.getServiceNumber=function(e){return(0,l.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/"+e.cluster_name+"/services/"+e.service_name+"/components/"+e.component_name+"?fields="+e.fields+"&format=null_padding",clusterName:e.cluster_name,method:"get"}})},t.operateService=function(e){return(0,l.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/"+e.cluster_name+"/services/"+e.service_name,clusterName:e.cluster_name,method:"PUT",params:(0,n.default)({RequestInfo:{context:e.context,operation_level:{level:"SERVICE",cluster_name:e.cluster_name,service_name:e.service_name}},Body:{ServiceInfo:{state:e.state}}})}})},t.restartAllComponents=function(e){return(0,l.default)({url:"/platform/ForwardTo",method:"post",data:{url:"/api/v1/clusters/"+e.cluster_name+"/requests",clusterName:e.cluster_name,method:"post",params:(0,n.default)({RequestInfo:{command:"RESTART",context:"重启"+e.service_name+"的全部组件",operation_level:{level:"SERVICE",cluster_name:e.cluster_name,service_name:e.service_name}},"Requests/resource_filters":e.filters})}})}},351:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(37)),l=S(a(17)),r=S(a(39)),s=S(a(2)),o=S(a(26)),u=S(a(25)),i=S(a(14)),c=S(a(44)),d=S(a(12)),m=S(a(4)),f=S(a(6)),p=S(a(3)),h=S(a(5));a(36),a(20),a(38),a(22),a(48);var v=a(1),E=S(v),g=a(11),y=(S(a(88)),a(350)),_=S(a(778));function S(e){return e&&e.__esModule?e:{default:e}}var N=function(e){function t(e){var a=this;(0,m.default)(this,t);var n=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return n.columns1=function(){return[{title:"名称",dataIndex:"display_name"},{title:"状态",dataIndex:"maintenance_state",render:function(e,t){var a="check",n="服务已启动";"INSTALLED"==t.state&&(a="close",n="服务已停止"),("INIT"==t.state||"STARTED"==t.state&&t.alerts)&&(n="INIT"==t.state?"服务待安装":"服务有异常",a="exclamation");return E.default.createElement("div",{className:"monitor_componentState"},E.default.createElement(c.default,{placement:"right",title:n},E.default.createElement("label",{className:a,style:{border:"1px solid",padding:"3px 7px",borderRadius:"6px",fontWeight:"bold",fontSize:"12px"}},t.state.toLowerCase())))}},{title:"版本",dataIndex:"version"},{title:"告警",dataIndex:"alerts",render:function(e){var t=e?e.length:null;return E.default.createElement("div",{className:"monitor_componentAlert"},E.default.createElement("span",{onClick:n.alertInfo.bind(n,e),className:t?"error":"success"},t?t+" "+(t>1?"alerts":"alert"):"没有告警"))}},{title:"操作",dataIndex:"state",render:function(e,t){return E.default.createElement("a",{href:"javascript:;",onClick:n.reStartService.bind(n,t)},E.default.createElement(i.default,{type:"poweroff",className:"mr10 ml25"}),E.default.createElement("span",null,"重新启动"))}}]},n.alertInfo=function(e){e&&e.length>0&&n.setState({alerts:e})},n.reStartService=function(e){n.setState({operateData:e})},n.sureModal=(0,u.default)(o.default.mark(function e(){var t,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.operateData,l=t.alerts&&t.alerts.map(function(e){return{service_name:e.service_name,component_name:e.component_name,hosts:e.host_name}}),n.setState({modalloading:!0}),e.next=5,g.actions.monitor.restartComponents({text:"重启"+t.display_name+"的全部组件",level:"SERVICE",cluster_name:t.alerts[0].cluster_name,service_name:t.service_name,filter:l}).then(function(e){1==e.code&&(g.actions.host.updateState({taskModalVisible:!0}),n.setState({modalloading:!1,operateData:null}))}).catch(function(e){n.setState({modalloading:!1})});case 5:case"end":return e.stop()}},e,a)})),n.handleCancel=function(){n.setState({alerts:null,operateData:null})},n.getTimeAgo=function(e,t){var a="",n=new Date(t).getTime(),l=new Date(e).getTime(),r=Math.ceil((l-n)/864e5),s=(r/365).toFixed(1),o=Math.floor(r/30);return s>=1?a="for  "+(s>1?s+" years":" about a year")+" ":o>=1?a="for "+(o>1?o+" months":" about a month")+" ":r>=1&&(a="for "+(r>1?r+" days":" about a day")+" "),a},n.state={alerts:null},n.currentClusterName=null,n.defaultDevToolsList=["DATA HUB","User Admin","Task Scheduler","SQL Editor"],n}return(0,h.default)(t,e),(0,f.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.currentCluster&&e.currentCluster.clusterName!=this.currentClusterName&&(this.currentClusterName=e.currentCluster.clusterName,this.componentWillMount())}},{key:"componentWillMount",value:function(){var e=(0,u.default)(o.default.mark(function e(){var t,a,n,l,r,u=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,a=t.currentCluster,n=t.serviceList,l=t.currentType,this.setState({loading:!0}),r=a.clusterName,n&&0!=n.length){e.next=7;break}return e.next=6,g.actions.app.getAllService();case 6:n=this.props.serviceList;case 7:(0,y.getCOmponentStatus)({clusterName:r}).then(function(e){if(1==e.code){var t={},a=[];e.data.items.map(function(e){t[e.Alert.service_name]?t[e.Alert.service_name].push(e.Alert):t[e.Alert.service_name]=[e.Alert]}),n.map(function(e){"STARTED"!=e.ServiceInfo.state&&"INSTALLED"!=e.ServiceInfo.state||a.push((0,s.default)({},e.ServiceInfo,{version:e.StackServices.service_version,alerts:t[e.service_name],display_name:e.display_name}))}),a=l?a.filter(function(e){return u.defaultDevToolsList.includes(e.display_name)}):a.filter(function(e){return!u.defaultDevToolsList.includes(e.display_name)}),u.setState({usefulData:a,loading:!1})}});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.usefulData,a=this.state,s=a.alerts,o=a.loading,u=a.operateData,i=a.modalloading;return E.default.createElement("div",{className:"devToolWrap"},E.default.createElement(_.default,null),E.default.createElement(r.default,{loading:o,bordered:!0,pagination:!1,dataSource:t,columns:this.columns1(),rowKey:function(e){return e.service_name}}),s&&s.length>0&&E.default.createElement(n.default,{title:"告警信息",visible:!0,wrapClassName:"alertsModal",onCancel:this.handleCancel,footer:E.default.createElement(l.default,{type:"primary",onClick:this.handleCancel},"取消")},s&&s.map(function(t){return E.default.createElement("li",{key:t.id,className:"alertsModalItem"},E.default.createElement("div",{className:"alertsModalLeft"},E.default.createElement("h4",null,t.label),E.default.createElement("p",null,t.text)),E.default.createElement("div",{className:"alertsModalRight"},E.default.createElement("span",{className:t.state},t.state),E.default.createElement("label",null,e.getTimeAgo(t.latest_timestamp,t.original_timestamp))))})),u&&E.default.createElement(n.default,{title:"操作",visible:!0,wrapClassName:"operateModal",onCancel:this.handleCancel,footer:E.default.createElement(l.default,{type:"primary",loading:i,onClick:this.sureModal},"确认")},E.default.createElement("p",null,"确认重新启动 ",u.display_name,"? 该操作会触发告警, 可设置维护模式取消告警.")))}}]),t}(v.Component),C=(0,g.connect)(function(e){return{serviceList:e.app.serviceList,currentCluster:e.app.currentCluster}})(N);t.default=C},352:function(e,t,a){},360:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.widgetsMapper={1:{name:"NameNode堆",view:"NameNodeHeapPieChartView",sourceName:"HDFS"},2:{view:"NameNodeCapacityPieChartView",name:"HDFS磁盘的使用情况",sourceName:"HDFS"},3:{view:"NameNodeCpuPieChartView",name:"NameNode CPU WIO",sourceName:"HDFS"},4:{name:"活动的DataNodes",view:"DataNodeUpView",sourceName:"HDFS"},5:{name:"NameNode RPC",view:"NameNodeRpcView",sourceName:"HDFS"},10:{name:"NameNode运行时间",view:"NameNodeUptimeView"},11:{name:"HDFS链接",view:"HDFSLinksView"},12:{name:"HBase链接",view:"HBaseLinksView"},13:{view:"HBaseMasterHeapPieChartView",name:"HBase Master堆"},14:{name:"HBase的平均负荷",view:"HBaseAverageLoadView"},15:{name:"Region状态迁移",view:"HBaseRegionsInTransitionView"},16:{view:"HBaseMasterUptimeView",name:"HBase Master运行时间"},17:{name:"ResourceManager堆",view:"ResourceManagerHeapPieChartView"},18:{name:"ResourceManager运行时间",view:"ResourceManagerUptimeView",serviceName:"YARN"},19:{name:"活跃的NodeManager",view:"NodeManagersLiveView"},20:{name:"YARN内存",view:"YARNMemoryPieChartView"},21:{name:"",view:"SuperVisorUpView"},22:{name:"活动的Flume",view:"FlumeAgentUpView"},23:{view:"YARNLinksView",name:"YARN链接"},24:{name:"",view:"HawqSegmentUpView"},25:{name:"",view:"PxfUpView"}},t.showEdit=["1","2","3","4","13","14","15","17","19","20","22"]},450:function(e,t){},468:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={current:"当前集群","actions.serviceActions":"操作","dashboard.widgets.HBaseLinks":"HBase Links","dashboard.widgets.NameNodeHeap":"NameNode Heap","dashboard.widgets.NameNodeRpc":"NameNode RPC","dashboard.widgets.YARNMemory":"YARN Memory","dashboard.widgets.SuperVisorUp":"Supervisors Live","dashboard.widgets.NodeManagersLive":"NodeManagers Live","dashboard.widgets.ResourceManagerUptime":"ResourceManager Uptime","dashboard.widgets.FlumeAgentUp":"Flume Live","dashboard.widgets.YARNLinks":"YARN Links","dashboard.widgets.HawqSegmentUp":"HAWQ Segments Live","dashboard.widgets.PxfUp":"PXF Agents Live","dashboard.widgets.ResourceManagerHeap":"ResourceManager Heap","dashboard.widgets.HBaseMasterUptime":"HBase Master Uptime","dashboard.widgets.HBaseRegionsInTransition":"Region In Transition","dashboard.widgets.HBaseAverageLoad":"HBase Ave Load","dashboard.widgets.HBaseMasterHeap":"HBase Master Heap","dashboard.widgets.HDFSLinks":"HDFS Links","dashboard.widgets.NameNodeUptime":"NameNode Uptime","dashboard.widgets.DataNodeUp":"DataNodes Live","dashboard.widgets.HDFSDiskUsage":"HDFS Disk Usage","dashboard.widgets.HDFSDiskUsage.DFSused":"DFS used","dashboard.widgets.HDFSDiskUsage.nonDFSused":"non DFS used","dashboard.widgets.HDFSDiskUsage.remaining":"remaining","dashboard.widgets.HDFSDiskUsage.info":"{0} ({1}%)","dashboard.widgets.NameNodeCpu":"NameNode CPU WIO"}},469:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={"actions.serviceActions":"操作","cluster.current":"当前集群","dashboard.widgets.HBaseLinks":"HBase链接","dashboard.widgets.NameNodeHeap":"NameNode堆","dashboard.widgets.NameNodeRpc":"NameNode RPC","dashboard.widgets.YARNMemory":"YARN内存","dashboard.widgets.SuperVisorUp":"活动的Supervisors","dashboard.widgets.NodeManagersLive":"活跃的NodeManager","dashboard.widgets.ResourceManagerUptime":"ResourceManager运行时间","dashboard.widgets.FlumeAgentUp":"活动的Flume","dashboard.widgets.YARNLinks":"YARN链接","dashboard.widgets.HawqSegmentUp":"活跃的HAWQ Segments","dashboard.widgets.PxfUp":"活跃的PXF代理","dashboard.widgets.ResourceManagerHeap":"ResourceManager堆","dashboard.widgets.HBaseMasterUptime":"HBase Master运行时间","dashboard.widgets.HBaseRegionsInTransition":"Region状态迁移","dashboard.widgets.HBaseAverageLoad":"HBase的平均负荷","dashboard.widgets.HBaseMasterHeap":"HBase Master堆","dashboard.widgets.HDFSLinks":"HDFS链接","dashboard.widgets.NameNodeUptime":"NameNode运行时间","dashboard.widgets.DataNodeUp":"活动的DataNodes","dashboard.widgets.HDFSDiskUsage":"HDFS磁盘的使用情况","dashboard.widgets.HDFSDiskUsage.DFSused":"DFS使用","dashboard.widgets.HDFSDiskUsage.nonDFSused":"非DFS使用","dashboard.widgets.HDFSDiskUsage.remaining":"剩余","dashboard.widgets.HDFSDiskUsage.info":"{0} ({1}%)","dashboard.widgets.NameNodeCpu":"NameNode CPU WIO"}},477:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(2)),l=m(a(105)),r=a(103),s=m(a(476)),o=m(a(475)),u=m(a(474)),i=m(a(473)),c=m(a(469)),d=m(a(468));function m(e){return e&&e.__esModule?e:{default:e}}(0,r.addLocaleData)([].concat((0,l.default)(s.default),(0,l.default)(o.default)));(0,n.default)({},d.default),u.default,s.default;var f={messages:(0,n.default)({},c.default),antd:i.default,locale:"zh",data:o.default};t.default=function(){return f}},478:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHostComponents=t.getHostList=t.getAllStackService=t.getAllService=t.getCluster=void 0;var n,l=a(75),r=(n=l)&&n.__esModule?n:{default:n};t.getCluster=function(){return(0,r.default)({url:"/api/v1/clusters?fields=Clusters/provisioning_state"})},t.getAllService=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.currentCluster+"/services?fields=ServiceInfo/state,ServiceInfo/maintenance_state,components/ServiceComponentInfo/component_name&minimal_response=true",clusterName:e.currentCluster,method:"get"}})},t.getAllStackService=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/stacks/LEAP/versions/3.4.4/services?fields=StackServices/*,components/*,components/dependencies/Dependencies/scope,artifacts/Artifacts/artifact_name",clusterName:e.currentCluster,method:"get"}})},t.getHostList=function(e){return(0,r.default)({url:"/platform/getClusterVmnodes",data:{clusterID:e.clusterID}})},t.getHostComponents=function(e){return(0,r.default)({url:"/platform/getClusterVmnodesWithComponents",data:{clusterID:e.clusterID}})}},479:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.changeAlertStatus=t.getAlertsList=void 0;var n=r(a(76)),l=r(a(75));function r(e){return e&&e.__esModule?e:{default:e}}t.getAlertsList=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"/alerts?fields=*",clusterName:e.clusterName,method:"get"}})},t.changeAlertStatus=function(e){return(0,l.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/clusters/"+e.clusterName+"/alert_definitions/"+e.id,clusterName:e.clusterName,method:"put",params:(0,n.default)({"AlertDefinition/enabled":e.status})}})}},480:function(e,t,a){"use strict";var n=i(a(26)),l=i(a(25)),r=i(a(2)),s=a(11),o=i(s),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(479));function i(e){return e&&e.__esModule?e:{default:e}}o.default.model({name:"alerts",initialState:{status:!0,alertsList:[],alertsListRes:[],alertsListFilter:[]},reducers:{updateState:function(e,t){return(0,r.default)({},e,t)},updateAlertsList:function(e,t){return(0,r.default)({},e,t)},updateHostInfo:function(e,t){return(0,r.default)({},e,t)}},effects:{getAlertsList:function(e,t){var a=this;return(0,l.default)(n.default.mark(function e(){var l,r,o,i,c,d;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=s.actions.alerts.updateAlertsList)({status:!0}),r=t().app.currentCluster,o=r.clusterName,e.next=6,u.getAlertsList({clusterName:o});case 6:i=e.sent,c=[],d={},i.data.items.map(function(e,t){var a=c.length;void 0!=d[e.Alert.label]?c[d[e.Alert.label]].states.push(e.Alert.state):(e.Alert.states=[e.Alert.state],c.push(e.Alert),d[e.Alert.label]=a)}),l({status:!1,alertsList:c,alertsListRes:c});case 11:case"end":return e.stop()}},e,a)}))()},changeAlertStatus:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){var r,o,i,c;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=s.actions.alerts,r.updateAlertsList,o=r.getAlertsList,i=t().app.currentCluster,c=i.clusterName,a.next=5,u.changeAlertStatus({id:e.id,status:e.status,clusterName:c});case 5:a.sent,o();case 7:case"end":return a.stop()}},l,a)}))()},filterAlertsList:function(e,t){var a=s.actions.alerts.updateAlertsList,n=t().alerts.alertsListRes,l=n;""!=e.label&&(l=n.filter(function(t){return t.label.indexOf(e.label)>-1})),"all"!=e.states&&(l=n.filter(function(t){return t.states==e.states})),"all"!=e.service_name&&(l=n.filter(function(t){return t.service_name==e.service_name})),"all"!=e.latest_timestamp&&(l=n.filter(function(t){return t.latest_timestamp>(new Date).getTime()-e.latest_timestamp})),a({alertsList:l})}}})},481:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLicenseKey=t.getLicenseDetail=t.getServiceAccount=void 0;var n,l=a(75),r=(n=l)&&n.__esModule?n:{default:n};t.getServiceAccount=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/stacks/LEAP/versions/3.4.4/services?StackServices/service_name.in("+e.services+")&fields=configurations/*,configurations/dependencies/*,StackServices/config_types/*",clusterName:e.clusterName,method:"get"}})},t.getLicenseDetail=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/license/detail",clusterName:e.clusterName,method:"get"}})},t.getLicenseKey=function(e){return(0,r.default)({url:"/platform/ForwardTo",data:{url:"/api/v1/license/serverkey",clusterName:e.clusterName,method:"get"}})}},482:function(e,t,a){"use strict";var n=m(a(195)),l=m(a(26)),r=m(a(25)),s=m(a(2)),o=a(11),u=m(o),i=d(a(481)),c=d(a(166));function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function m(e){return e&&e.__esModule?e:{default:e}}u.default.model({name:"security",initialState:{status:!0,serviceAccount:[],licenseData:[]},reducers:{updateState:function(e,t){return(0,s.default)({},e,t)},updateServiceAccount:function(e,t){return(0,s.default)({},e,t)},updateLicenseData:function(e,t){return(0,s.default)({},e,t)}},effects:{getServiceAccount:function(e,t){var a=this;return(0,r.default)(l.default.mark(function e(){var n,r,s,u,d,m;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=o.actions.security.updateServiceAccount)({status:!0}),r=(r=t().app.currentCluster).clusterName,e.next=6,c.getComponentsInstalledList(r);case 6:return s=e.sent,u=[],s.data.items.forEach(function(e){u.push(e.ServiceInfo.service_name)}),u=u.join(","),e.next=12,i.getServiceAccount({clusterName:r,services:u});case 12:d=(d=e.sent).data,m=[],d.items.map(function(e,t){e.configurations.map(function(e,t){"USER"!=e.StackConfigurations.property_type[0]&&"GROUP"!=e.StackConfigurations.property_type[0]||!e.StackConfigurations.property_display_name||m.push({property_display_name:e.StackConfigurations.property_display_name,property_value:e.StackConfigurations.property_value})})}),n({status:!1,serviceAccount:m});case 17:case"end":return e.stop()}},e,a)}))()},getLicenseData:function(e,t){var a=this;return(0,r.default)(l.default.mark(function e(){var r,s,u,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.actions.security.updateLicenseData,s=(s=t().app.currentCluster).clusterName,{},e.next=6,i.getLicenseKey({clusterName:s});case 6:u=e.sent,c={},(0,n.default)(c,{},u.data.items[0].license),r({status:!1,licenseData:c});case 10:case"end":return e.stop()}},e,a)}))()}}})},483:function(e,t,a){"use strict";var n=m(a(65)),l=m(a(119)),r=m(a(8)),s=m(a(26)),o=m(a(25)),u=m(a(2)),i=a(11),c=m(i),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(132));function m(e){return e&&e.__esModule?e:{default:e}}sessionStorage.getItem("host");c.default.model({name:"host",initialState:{hostLists:null,hostStatus:null,summaryInfo:null,alertFilter:null,alertsList:null,alert_backupData:null,versions:null,vs_backupData:null,clusterList:null,taskModalVisible:!1},reducers:{updateState:function(e,t){return(0,u.default)({},e,t)}},effects:{getHostList:function(e,t){var a=this;return(0,o.default)(s.default.mark(function n(){var l,r,o,c,m,f,p;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=i.actions.host,r=l.updateState,l.getHostList,o=t().host.hostinfo,c=e.host_name,(0,u.default)({},e),delete e.host_name,a.next=7,d.getHostLists(e);case 7:if(1!==(m=a.sent).code){a.next=13;break}return f=m.data.items,p=f.filter(function(e){return e.Hosts.host_name==c}),r({hostLists:f,clusterName:e.clusterName,hostinfo:o||p[0]}),a.abrupt("return",m.data);case 13:return a.abrupt("return",m);case 14:case"end":return a.stop()}},n,a)}))()},getHostSummary:function(e,t){var a=this;return(0,o.default)(s.default.mark(function n(){var l,r,o,u,c,m,f;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=i.actions.host,r=l.updateState,l.getHostSummary,o=t().app.currentCluster,u={cluster_name:o.clusterName,host_name:e.host_name},a.next=5,d.getSummaryInfo(u);case 5:if(1!=(c=a.sent).code){a.next=14;break}return m=c.data.items,f=void 0,m&&m.map(function(t){t.Hosts.host_name==e.host_name&&(f=t)}),r({summaryInfo:f}),a.abrupt("return",f);case 14:return a.abrupt("return",!1);case 15:return a.abrupt("return",c);case 16:case"end":return a.stop()}},n,a)}))()},getHostStatus:function(e,t){var a=this;return(0,o.default)(s.default.mark(function n(){var l,r,o,u,c;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=i.actions.host,r=l.updateState,l.getHostSummary,o=t().app.currentCluster,u={cluster_name:o.clusterName,host_name:e.host_name,start:e.start||void 0,end:e.end||void 0},a.next=5,d.getHostStatus(u);case 5:if(1!=(c=a.sent).code){a.next=9;break}return r({hostStatus:c.data.metrics}),a.abrupt("return",c.data.metrics);case 9:return a.abrupt("return",null);case 10:case"end":return a.stop()}},n,a)}))()},getVersions:function(e,t){var a=i.actions.host.updateState,n={server:[],display_name:[],state:[]};e&&e.map(function(e){n.server.includes(e.stack_name)||n.server.push(e.stack_name),n.display_name.includes(e.display_name)||n.display_name.push(e.display_name),n.state.includes(e.state)||n.state.push(e.state)}),a({versions:e,versionFilter:n,version_backupData:e})},getAlertsLists:function(e,t){var a=this;return(0,o.default)(s.default.mark(function n(){var l,r;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=i.actions.host.updateState,r=t().app.currentCluster,a.next=4,d.getAlertsLists({cluster_name:r.clusterName,hosts:e.hostName}).then(function(e){if(e.success){var t=e.data.items,a={server:[]},n=t&&t.map(function(e){return a.server.includes(e.Alert.service_name)||a.server.push(e.Alert.service_name),e.Alert});l({alertsList:n,alertFilter:a,alerts_backupData:n})}});case 4:case"end":return a.stop()}},n,a)}))()},getOperateProgress:function(e,t){var a=this;return(0,o.default)(s.default.mark(function t(){var n;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.actions.host.updateState,t.next=3,d.getTaskProgress(e).then(function(e){if(1==e.code){var t=e.data.items;n({taskLists:t.reverse()})}return e});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,a)}))()},filterAlertsList:function(e,t){var a=e.type||"alerts";delete e.type;var n=t().host[a+"_backupData"],l=i.actions.host,s=l.updateState,o=(0,l.filterData)({allData:n,filter:e.filterValues?e.filterValues:e});s((0,r.default)({},a+"List",o))},setCurrentHost:function(e){return(0,i.actions.host.updateState)({hostinfo:e}),l.default.resolve(e)},postOperate:function(e,t){var a=i.actions.host.updateState;return d.startOrStopComponents(e).then(function(e){return 1==e.code&&a({taskModalVisible:!0}),e}).catch(function(e){return e})},restartAllComponents:function(e,t){var a=i.actions.host.updateState;return d.restartAllComponents(e).then(function(e){return 1==e.code&&a({taskModalVisible:!0}),e}).catch(function(e){return e})},openOrCloseMaintenance:function(e,t){return d.openOrCloseMaintenance(e).then(function(e){return e}).catch(function(e){return e})},setHostRack:function(e,t){return d.setHostRack(e).then(function(e){return e}).catch(function(e){return e})},startComponents:function(e,t){var a=this;return(0,o.default)(s.default.mark(function t(){var n,l;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.actions.host.updateState,t.next=3,d.startComponents(e).then(function(e){return 1==e.code&&n({taskModalVisible:!0}),e});case 3:return l=t.sent,t.abrupt("return",l);case 5:case"end":return t.stop()}},t,a)}))()},restartComponents:function(e,t){var a=this;return(0,o.default)(s.default.mark(function t(){var n,l,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.restartComponents(e);case 2:return 1===(n=t.sent).code&&(l=n.data.items,r=void 0,l&&l.map(function(t){t.Hosts.host_name==e.host_name&&(r=t)}),(0,i.actions.host.updateState)({summaryInfo:r,taskModalVisible:!0})),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,a)}))()},openOrCloseMaintenanceState:function(e,t){var a=this;return(0,o.default)(s.default.mark(function t(){var n,l,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.openOrCloseMaintenanceState(e);case 2:return 1===(n=t.sent).code&&(l=n.data.items,r=void 0,l&&l.map(function(t){t.Hosts.host_name==e.host_name&&(r=t)}),(0,i.actions.host.updateState)({summaryInfo:r})),t.abrupt("return",n);case 5:case"end":return t.stop()}},t,a)}))()},filterData:function(e){var t=e.allData,a=e.filter,l=t,r=(0,n.default)(a);return 0!==r.length&&(r.map(function(e){var t=a[e];t&&(l=l.filter(function(a){return-1!=e.indexOf("fuzzy_")?a[e.split("fuzzy_")[1]].toLowerCase().indexOf(t.toLowerCase())>=0:a[e].toLowerCase()===t.toLowerCase()}))}),l=l.length?l:[]),l}}})},484:function(e,t,a){"use strict";var n=i(a(26)),l=i(a(25)),r=i(a(2)),s=a(11),o=i(s),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(166));function i(e){return e&&e.__esModule?e:{default:e}}o.default.model({name:"components",initialState:{status:!0,componentsEntity:["HDFS","YARN","MAPREDUCE2","HIVE","HBASE","SQOOP","ZOOKEEPER","FLUME","AMBARI_METRICS","KAFKA","STORM","LOGSEARCH","SPARK2","AMBARI_INFRA","ELK","HADOOP_KMS","IMPALA","SENTRY"],toolsEntity:["DATA HUB","User Admin","Task Scheduler","SQL Editor"],version:"",hostSum:"",componentsListData:[],servicesList:[],componentsVersionData:[]},reducers:{updateState:function(e,t){return(0,r.default)({},e,t)},updateComponentsList:function(e,t){return(0,r.default)({},e,t)},updateHostInfo:function(e,t){return(0,r.default)({},e,t)}},effects:{getComponentsList:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){var r,o,i,c,d,m,f,p,h;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return(r=s.actions.components.updateComponentsList)({status:!0,componentsListData:[]}),t().components.componentsListData,o=t().app.currentCluster,i=o.clusterName,a.next=7,u.getComponentsList(i);case 7:return c=(c=a.sent).data,a.next=11,u.getComponentsInstalledList(i);case 11:return d=(d=a.sent).data,m=c.items[0].repository_versions[0].RepositoryVersions.stack_services,f=d.items,p={},f.map(function(e,t){p[e.ServiceInfo.service_name]=e.ServiceInfo.state}),m.map(function(e,t){!p[e.name]||"STARTED"!=p[e.name]&&"INSTALLED"!=p[e.name]?e.status=0:e.status=1,e.serviceStatus=p[e.name]?p[e.name]:null}),h=m,m=m.filter(function(a,n){return"components"==e&&-1!=t().components.componentsEntity.indexOf(a.name)?a:"tools"==e&&-1!=t().components.toolsEntity.indexOf(a.display_name)?a:void 0}),r({status:!1,componentsListData:m,servicesList:h,version:c.items[0].ClusterStackVersions.cluster_name+" "+c.items[0].ClusterStackVersions.version+".0"}),a.abrupt("return",m);case 22:case"end":return a.stop()}},l,a)}))()},uninstallService:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){var r,o,i,c,d;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=s.actions.components,r.updateHostInfo,o=r.getComponentsList,i=t().app.currentCluster,c=i.clusterName,a.next=5,u.uninstallService(e.serviceName,c);case 5:return d=a.sent,o(e.type),a.abrupt("return",d);case 8:case"end":return a.stop()}},l,a)}))()},getHostInfo:function(e,t){var a=this;return(0,l.default)(n.default.mark(function e(){var l,r,o,i;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=s.actions.components.updateHostInfo,r=t().app.currentCluster,o=r.clusterName,e.next=5,u.getHostInfo(o);case 5:i=(i=e.sent).data,l({status:!1,hostSum:i.itemTotal});case 8:case"end":return e.stop()}},e,a)}))()}}})},485:function(e,t,a){"use strict";var n=d(a(65)),l=d(a(119)),r=d(a(26)),s=d(a(25)),o=d(a(2)),u=a(11),i=d(u),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(220));function d(e){return e&&e.__esModule?e:{default:e}}var m=["STORM","LOGSEARCH"];i.default.model({name:"create",initialState:{clusterTypes:null,backupData:null,serviceList:null,hostList:null,masterList:null,slaveList:null,devTools:null,clusterFilterList:null,createStatus:null},reducers:{updateState:function(e,t){return(0,o.default)({},e,t)}},effects:{getClusterType:function(e,t){var a=this;return(0,s.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.actions.create.updateState,e.next=3,c.getClusterTypes().then(function(e){if(1==e.code){var a=e.data;return t({clusterTypes:a,createStatus:null}),a}return null});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,a)}))()},getService:function(e,t){var a=this;return(0,s.default)(r.default.mark(function e(){var n;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.actions.create.updateState,t().create.hostList,e.next=4,c.getService().then(function(e){if(1===e.code){var t=e.data,a=[],r=[];return t&&t.map(function(e){console.log(e),m.includes(e.name)||(f.includes(e.displayName)?r.push(e):a.push(e))}),n({serviceList:a,devTools:r,allServiceData:t}),l.default.resolve(!0)}});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,a)}))()},setHostList:function(e){(0,u.actions.create.updateState)({hostList:e})},getComponents:function(e,t){var a=u.actions.create.updateState,l=t().create,r=l.allServiceData,s=(l.hostList,[]),o={};r&&r.map(function(t){t.components&&e&&(0,n.default)(e).map(function(e){e===t.name&&t.components.map(function(t){t.serverName=e,"MASTER"===t.category&&s.push(t),"CLIENT"!==t.category&&"SLAVE"!==t.category||"ZKFailoverController"!==t.displayName&&(t.times=t.cardinality,o[t.name]=t)})})}),a({masterList:s,slaveList:o})},postServiceList:function(e,t){var a=this;return(0,s.default)(r.default.mark(function n(){var l,s;return r.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=u.actions.create,l.updateState,s=l.checkCreateStatus,t().create.allServiceData,a.next=4,c.postServiceList(e).then(function(t){if(1==t.code)return s(e.clustername)});case 4:return a.abrupt("return",a.sent);case 5:case"end":return a.stop()}},n,a)}))()},postReServiceList:function(e,t){var a=this;return(0,s.default)(r.default.mark(function t(){var n;return r.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=u.actions.host.updateState,delete e.noCheck,t.next=4,c.postReServiceList(e).then(function(e){if(1==e.code)return n({taskModalVisible:!0}),e});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,a)}))()},checkCreateStatus:function(e,t){var a=u.actions.create,n=a.checkCreateStatus,l=a.updateState;t().create.createStatus;return c.checkCreateStatus({clustername:e}).then(function(t){return(t.data&&"SUCCESS"!=t.data&&t.data.indexOf("FAILED")<0||"[object Null]"==Object.prototype.toString.call(t.data))&&setTimeout(function(){n(e)},3e3),l({createStatus:t.data||""}),t}).catch(function(e){l({createStatus:"FAILED"})})},checkAddingStatus:function(e,t){var a=u.actions.create,n=a.checkAddingStatus,l=a.updateState;t().create.createStatus;return c.checkAddingStatus({clustername:e}).then(function(t){return t.data&&"SUCCESS"!=t.data&&t.data.indexOf("FAILED")<0&&setTimeout(function(){n(e)},3e3),l({createStatus:t.data||""}),t}).catch(function(e){l({createStatus:"FAILED"})})}}});var f=["DATA HUB","User Admin","Task Scheduler","SQL Editor"]},486:function(e,t,a){"use strict";var n=i(a(26)),l=i(a(25)),r=i(a(2)),s=a(11),o=i(s),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(209));function i(e){return e&&e.__esModule?e:{default:e}}o.default.model({name:"summary",initialState:{loadLayout:!1,widgetLayoutInfo:[],serviceComponentMetrics:["host_components/metrics/jvm/memHeapUsedM","host_components/metrics/jvm/HeapMemoryMax","host_components/metrics/jvm/HeapMemoryUsed","host_components/metrics/jvm/memHeapCommittedM","host_components/metrics/mapred/jobtracker/trackers_decommissioned","host_components/metrics/cpu/cpu_wio","host_components/metrics/rpc/client/RpcQueueTime_avg_time","host_components/metrics/dfs/FSNamesystem/*","host_components/metrics/dfs/namenode/Version","host_components/metrics/dfs/namenode/LiveNodes","host_components/metrics/dfs/namenode/DeadNodes","host_components/metrics/dfs/namenode/DecomNodes","host_components/metrics/dfs/namenode/TotalFiles","host_components/metrics/dfs/namenode/UpgradeFinalized","host_components/metrics/dfs/namenode/Safemode","host_components/metrics/runtime/StartTime"],serviceSpecificParams:{FLUME:"host_components/processes/HostComponentProcess",YARN:"host_components/metrics/yarn/Queue,host_components/metrics/yarn/ClusterMetrics/NumActiveNMs,host_components/metrics/yarn/ClusterMetrics/NumLostNMs,host_components/metrics/yarn/ClusterMetrics/NumUnhealthyNMs,host_components/metrics/yarn/ClusterMetrics/NumRebootedNMs,host_components/metrics/yarn/ClusterMetrics/NumDecommissionedNMs",HBASE:"host_components/metrics/hbase/master/IsActiveMaster,host_components/metrics/hbase/master/MasterStartTime,host_components/metrics/hbase/master/MasterActiveTime,host_components/metrics/hbase/master/AverageLoad,host_components/metrics/master/AssignmentManger/ritCount",STORM:"metrics/api/v1/cluster/summary,metrics/api/v1/topology/summary,metrics/api/v1/nimbus/summary"},loadingBaseInfo:!0,serviceBaseInfo:{},servicesStatusLoading:!0,servicesStatusInfo:[]},reducers:{updateState:function(e,t){return(0,r.default)({},e,t)}},effects:{getConditionalFields:function(e,t){t().app.serviceList;var a=t().summary,n=a.serviceComponentMetrics,l=a.serviceSpecificParams,r=n.slice(0),s=l[e];return s&&r.push(s),r},getSummaryWidgetLayout:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){var r,o,i;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=s.actions.summary.updateState,o=t().app.currentCluster,a.next=4,u.getSummeryLayout(e,o.clusterName);case 4:i=(i=a.sent).data,r({loadLayout:!0,widgetLayoutInfo:i.items[0].WidgetLayoutInfo.widgets});case 7:case"end":return a.stop()}},l,a)}))()},getServicesStatusInfo:function(e,t){var a=this;return(0,l.default)(n.default.mark(function e(){var l,r,o,i,c;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=s.actions.summary.updateState,r=t().app.currentCluster,e.next=4,u.getServicesStatusInfo(r.clusterName);case 4:o=(o=e.sent).data.items,i={},c=["LEAPID","LEAPPROCESS","LEAPSQL","LEAPDATAHUB"],o.forEach(function(e){c.forEach(function(t){e.ServiceComponentInfo.service_name==t&&(i[t]={host:e.host_components[0].HostRoles.host_name,status:"STARTED"==e.host_components[0].HostRoles.state})})}),l({servicesStatusLoading:!1,servicesStatusInfo:i});case 10:case"end":return e.stop()}},e,a)}))()},getSummaryBaseInfo:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){var r,o,i,c,d,m,f,p,h;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=s.actions.summary,o=r.updateState,i=r.getConditionalFields,c=t().app,c.loadService,d=(d=c.currentCluster).clusterName,m=i(e),f="components/?"+(!1?"ServiceComponentInfo/component_name=FLUME_HANDLER|":"")+(!1?"ServiceComponentInfo/component_name=APP_TIMELINE_SERVER|":"")+(!1?"ServiceComponentInfo/component_name=JOURNALNODE|ServiceComponentInfo/component_name=ZKFC|":"")+"ServiceComponentInfo/category=MASTER&fields=ServiceComponentInfo/service_name,host_components/HostRoles/display_name,host_components/HostRoles/host_name,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/ha_state,host_components/HostRoles/desired_admin_state,"+m+"&minimal_response=true",a.next=6,u.getSummaryBaseInfo(d,f);case 6:p=(p=a.sent).data.items,h={},p.forEach(function(t){t.ServiceComponentInfo.service_name==e&&"HDFS"==e&&(h[t.ServiceComponentInfo.component_name]=t)}),o({loadingBaseInfo:!1,serviceBaseInfo:h});case 11:case"end":return a.stop()}},l,a)}))()}}})},487:function(e,t,a){"use strict";var n=m(a(76)),l=m(a(26)),r=m(a(25)),s=m(a(2)),o=a(11),u=m(o),i=(a(141),function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(209))),c=a(296),d=m(a(116));function m(e){return e&&e.__esModule?e:{default:e}}var f=["#0dba3e","#9fee00","#ffff00","#ffc000","#ff0000"],p=/(\w+\s+\w+)?[\w\.\,\:\=\[\]]+/g,h=/^[\d\s\+\-\*\/\(\)\.]+$/,v=/\$\{([\w\s\.\,\+\-\*\/\(\)\:\=\[\]]*)\}/g,E=function(e){var t={};return e.forEach(function(e){var a=e.rack;t[a]?t[a].hosts.push(e):t[a]={name:a,rackId:a,hosts:[e]}}),t},g=function(e){var t=[],a=0;for(var n in e)e.hasOwnProperty(n)&&t.push({name:n,rackId:n,hosts:e[n].hosts,isLoaded:!1,index:a++});return t},y=function(e,t){var a=e%1;return e>=100?e=Math.round(e):e>=10&&a>0?e=parseFloat(e.toFixed(1)):a>0&&(e=parseFloat(e.toFixed(2))),"ms"===t?e:e+t},_=function(e,t){return"MB"===t?Math.round(1048576*e):e},S=function(e,t,a,n){var l=y(e,a),r=y(t,a);return{hasBoundaries:!0,from:_(e,a),to:_(t,a),label:l+" - "+r,cssStyle:n}},N=function(e,t){return function(e,t){var a={},n=(0,c.mapProperty)(t,"hostName"),l={};return t.forEach(function(e){l[e.name+"_"+e.hostName]=e}),n.forEach(function(t){e.forEach(function(e){var n=!0,r=e.replace(p,function(e){var a=void 0;return d.default.isNaN(e-0)?(a=l[e+"_"+t])?a.data:void(n=!1):e});if(n&&h.test(r)){var s=Number(window.eval(r)).toString();"NaN"===s&&(s=0),a[t]=s}})}),a}(function(e){var t=v,a=[],n=void 0;if(!e)return a;for(;n=t.exec(e.value);)a.push(n[1]);return a}(e),t)},C=function(e,t,a,n){var l=N(e,t),r={};return l&&a&&a.forEach(function(e){var t=function(e,t,a){var n=-1,l=a;if(t in e){var r=e[t];if(isNaN(r))n=l.length-2;else{for(var s=0;s<l.length-2;s++){var o=l[s];r>=o.from&&r<=o.to&&(n=s)}n<0&&(n=l.length-3)}}else n=l.length-1;return n}(l,e,n);t>-1&&(r[e]=t)},void 0),r};u.default.model({name:"heatMap",initialState:{slotDefinitions:[],isLoaded:!0,inputMaximum:"",activeWidgetInfo:{},widgetLayoutInfo:{},hostListInfo:[],loadRack:!1,loadMetrics:!1,metrics:[],hostNames:[],serviceName:"",rackList:[],dropDownLayoutInfo:{loaded:!1,list:[]}},reducers:{updateState:function(e,t){return(0,s.default)({},e,t)},updateActiveWidgetInfo:function(e,t){return(0,s.default)({},e,{activeWidgetInfo:(0,s.default)({},e.activeWidgetInfo,t)})},updateDropDownLayoutInfo:function(e,t){return(0,s.default)({},e,{dropDownLayoutInfo:(0,s.default)({},e.dropDownLayoutInfo,t)})}},effects:{updateIptMax:function(e,t){var a=o.actions.heatMap,n=a.updateState,l=a.calSlotDefinitions;n({inputMaximum:e}),l()},getUserDropDownWidgetLayouts:function(e,t){var a=this;return(0,r.default)(l.default.mark(function n(){var r,s,u,c,d,m;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=o.actions.heatMap,s=r.updateState,u=r.updateDropDownLayoutInfo,c=t().heatMap.serviceName,d=t().app.currentCluster,u({loaded:!1,list:[]}),e?s({serviceName:e}):e=c,a.next=7,i.getUserDropDownWidgetLayouts(e,d.clusterName);case 7:m=(m=a.sent).data,u({loaded:!0,list:m.items});case 10:case"end":return a.stop()}},n,a)}))()},changeDisplayWidgetName:function(e,t){var a=this;return(0,r.default)(l.default.mark(function r(){var s,u,c,d,m,f;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o.actions.heatMap.updateState,s=t().heatMap,u=s.activeWidgetInfo,c=s.widgetLayoutInfo,d=s.serviceName,m=t().app.currentCluster,f={WidgetLayoutInfo:{display_name:u.display_name,id:c.id,layout_name:u.layout_name,section_name:c.section_name,scope:u.scope,widgets:[{id:e}]}},a.next=6,i.postDisplayWidgetNameId(c.id,(0,n.default)(f),m.clusterName);case 6:o.actions.heatMap.getActiveWidget(d),o.actions.heatMap.getRackList(),o.actions.heatMap.getUserDropDownWidgetLayouts();case 9:case"end":return a.stop()}},r,a)}))()},getActiveWidget:function(e,t){var a=this;return(0,r.default)(l.default.mark(function n(){var r,s,u,c,d,m,f,p,h,v,E;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=o.actions.heatMap,s=r.updateState,u=r.updateActiveWidgetInfo,c=r.calSlotDefinitions,d=r.getHostComponentsMetrics,m=t().app.currentCluster,a.next=4,i.getUserActiveWidgetLayouts(e,m.clusterName);case 4:return f=(f=a.sent).data,p=f.items[0].WidgetLayoutInfo,h=p.widgets[0].WidgetInfo,v=JSON.parse(h.properties).max_limit,E=JSON.parse(h.properties).display_unit,s({widgetLayoutInfo:p,activeWidgetInfo:h,inputMaximum:v}),u({inputMaximum:v,displayUnit:E}),c(),a.next=15,d(e);case 15:case"end":return a.stop()}},n,a)}))()},getHostList:function(e,t){},getRackList:function(e,t){var a=this;return(0,r.default)(l.default.mark(function e(){var n,r,s,u,d,m,f;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.actions.heatMap.updateState,r=t().heatMap.hostNames,s=t().app.currentCluster,e.next=5,i.loadRacks(s.clusterName);case 5:u=(u=e.sent).data,d=[],m={},f=[],u.items.forEach(function(e){r.push(e.Hosts.host_name),d.push({hostName:e.Hosts.host_name,publicHostName:e.Hosts.public_host_name,osType:e.Hosts.os_type,ip:e.Hosts.ip,rack:e.Hosts.rack_info,diskTotal:e.metrics?e.metrics.disk.disk_total:0,diskFree:e.metrics?e.metrics.disk.disk_free:0,cpuSystem:e.metrics?e.metrics.cpu.cpu_system:0,cpuUser:e.metrics?e.metrics.cpu.cpu_user:0,memTotal:e.metrics?e.metrics.memory.mem_total:0,memFree:e.metrics?e.metrics.memory.mem_free:0,hostComponents:(0,c.mapProperty)(e.host_components,"HostRoles.component_name")})}),m=E(d),f=g(m),n({loadRack:!0,rackList:f,hostNames:r});case 12:case"end":return e.stop()}},e,a)}))()},calSlotDefinitions:function(e,t){for(var a=o.actions.heatMap.updateState,n=t().heatMap.inputMaximum,l=t().heatMap.activeWidgetInfo.displayUnit,r=n?parseFloat(n):0,s=(r-0)/5,u=[],i=0,c=void 0,d=void 0,m=void 0,p=0;p<4;p++)m=f[i++],c=p*s,d=(p+1)*s,u.push(S(c,d,l,m));m=f[i++],c=4*s,u.push(S(c,r,l,m)),u.push({invalidData:!0,index:u.length,label:"无效的数据",cssStyle:"#e87fff"}),u.push({notApplicable:!0,index:u.length,label:"不可用",cssStyle:"#c8c8c8"}),a({slotDefinitions:u})},getHostComponentsMetrics:function(e,t){var a=this;return(0,r.default)(l.default.mark(function n(){var r,s,u,m,f,p,h,v,E,g,y,_,S;return l.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=o.actions.heatMap.updateState,s=t().heatMap,u=s.activeWidgetInfo,m=s.serviceName,f=t().app.currentCluster,p=JSON.parse(u.metrics),h=void 0,v="",e?(r({serviceName:e}),v=e):v=m,E=[],p.forEach(function(e){h=e&&e.component_name,E.push("host_components/"+(e&&e.metric_path))}),g="fields="+E.join(",")+"&format=null_padding",a.next=12,i.getHostComponentsMetrics({serviceName:v,component_name:h,currentCluster:f.clusterName},g);case 12:y=(y=a.sent).data,_=[],S=JSON.parse(u.metrics),y.host_components.forEach(function(e,t){S.forEach(function(t,a){if(t&&(0,c.deepObj)(e,t.metric_path.replace(/\//g,"."))){var n=d.default.extend({},t);n.data=(0,c.deepObj)(e,t.metric_path.replace(/\//g,".")),n.hostName=e.HostRoles.host_name,_.push(n)}})}),r({loadMetrics:!0,metrics:_}),N(JSON.parse(u.values)[0],_);case 19:case"end":return a.stop()}},n,a)}))()},hostTemperatureStyle:function(e,t){var a=e.hostName,n=t().heatMap,l=n.metrics,r=n.hostNames,s=n.slotDefinitions,o=n.activeWidgetInfo,u=JSON.parse(o.values)[0],i=C(u,l,r,s);if(i&&a){var c=i[a];if(c>-1){var d=s;if(d&&d.length>c)return d[c].cssStyle}}return""}}})},488:function(e,t,a){"use strict";var n=y(a(17)),l=y(a(8)),r=y(a(76)),s=y(a(26)),o=y(a(25)),u=y(a(2));a(20);var i=y(a(1)),c=a(11),d=y(c),m=a(141),f=g(a(350)),p=g(a(209)),h=a(132),v=a(360),E=a(296);function g(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function y(e){return e&&e.__esModule?e:{default:e}}d.default.model({name:"monitor",initialState:{dashboardVersion:"new",status:"loading",visible:[],hidden:[],threshold:[],modelInfo:{currentValue:"",range:[]},showDialog:!1,serviceComponentMetrics:["host_components/metrics/jvm/memHeapUsedM","host_components/metrics/jvm/HeapMemoryMax","host_components/metrics/jvm/HeapMemoryUsed","host_components/metrics/jvm/memHeapCommittedM","host_components/metrics/mapred/jobtracker/trackers_decommissioned","host_components/metrics/cpu/cpu_wio","host_components/metrics/rpc/client/RpcQueueTime_avg_time","host_components/metrics/dfs/FSNamesystem/*","host_components/metrics/dfs/namenode/Version","host_components/metrics/dfs/namenode/LiveNodes","host_components/metrics/dfs/namenode/DeadNodes","host_components/metrics/dfs/namenode/DecomNodes","host_components/metrics/dfs/namenode/TotalFiles","host_components/metrics/dfs/namenode/UpgradeFinalized","host_components/metrics/dfs/namenode/Safemode","host_components/metrics/runtime/StartTime"],serviceSpecificParams:{FLUME:"host_components/processes/HostComponentProcess",YARN:"host_components/metrics/yarn/Queue,host_components/metrics/yarn/ClusterMetrics/NumActiveNMs,host_components/metrics/yarn/ClusterMetrics/NumLostNMs,host_components/metrics/yarn/ClusterMetrics/NumUnhealthyNMs,host_components/metrics/yarn/ClusterMetrics/NumRebootedNMs,host_components/metrics/yarn/ClusterMetrics/NumDecommissionedNMs",HBASE:"host_components/metrics/hbase/master/IsActiveMaster,host_components/metrics/hbase/master/MasterStartTime,host_components/metrics/hbase/master/MasterActiveTime,host_components/metrics/hbase/master/AverageLoad,host_components/metrics/master/AssignmentManger/ritCount",STORM:"metrics/api/v1/cluster/summary,metrics/api/v1/topology/summary,metrics/api/v1/nimbus/summary"},loadMetric:!1,metricViewData:{},serviceMetricList:[],flumeData:{},clusterInfoLoading:!0,clusterInfo:[]},reducers:{updateState:function(e,t){return(0,u.default)({},e,t)},updateModelInfo:function(e,t){return(0,u.default)({},e,{modelInfo:(0,u.default)({},e.modelInfo,t)})},toggleDialog:function(e,t){return(0,u.default)({},e,{showDialog:t})},updateThreshold:function(e){for(var t in e.threshold)t==e.modelInfo.currentValue&&(e.threshold[t]=e.modelInfo.range);return(0,u.default)({},e)},deleteWidgetVisible:function(e,t){var a=t.value;return e.hidden.push([a,v.widgetsMapper[a].name]),(0,u.default)({},e,{visible:e.visible.filter(function(e){return e!=a})})},updateMetricViewData:function(e,t){return(0,u.default)({},e,{metricViewData:(0,u.default)({},e.metricViewData,t)})},updateClusterInfo:function(e,t){return(0,u.default)({},e,t)}},effects:{getClusterInfoComponent:function(e,t){var a=this;return(0,o.default)(s.default.mark(function e(){var n,l,r,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.actions.monitor.updateState,l=t().app.currentCluster,r=l.clusterName,e.next=5,f.getClusterStatteComponent(r);case 5:o=(o=e.sent)?o.data:{hidden:[],visible:[],threshold:[],dashboardVersion:""},n({status:"loaded",dashboardVersion:o.dashboardVersion||"new",hidden:o.hidden||[],visible:o.visible||["11","4","2","1","5","3","10"],threshold:o.threshold||{1:[80,90],2:[85,95],3:[90,95],4:[80,90],5:[1e3,3e3],6:[],7:[],8:[],9:[],10:[],11:[],12:[],13:[70,90],14:[150,250],15:[3,10],16:[],17:[70,90],18:[],19:[50,75],20:[50,75],21:[85,95],22:[85,95],23:[],24:[75,90],25:[]}});case 8:case"end":return e.stop()}},e,a)}))()},deleteWidgetComplete:function(e,t){var a=this;return(0,o.default)(s.default.mark(function t(){var n,l,r;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=c.actions.monitor,l=n.deleteWidgetVisible,r=n.changeVisibleOfComponent,l(e),r();case 3:case"end":return t.stop()}},t,a)}))()},editThreshold:function(e,t){var a=this;return(0,o.default)(s.default.mark(function n(){var l,r,o,u,i;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(l=c.actions.monitor,r=l.updateModelInfo,o=l.changeVisibleOfComponent,u=l.updateThreshold,i=t().monitor,i.threshold,i.modelInfo,!e){a.next=7;break}return r({range:e}),u(),a.next=7,o();case 7:case"end":return a.stop()}},n,a)}))()},toggleEditDialog:function(e,t){var a=c.actions.monitor,n=a.toggleDialog,l=a.updateModelInfo,r=t().monitor,s=r.showDialog,o=r.threshold;if(e){var u=e.value;l({currentValue:u,range:o[u]})}n(!s)},onSortMonitorInfoEnd:function(e,t){var a=this;return(0,o.default)(s.default.mark(function n(){var l,r,o,u,i,d,f;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=e.oldIndex,r=e.newIndex,o=t().monitor.visible,u=c.actions.monitor,i=u.updateState,d=u.changeVisibleOfComponent,f=(0,m.arrayMove)(o,l,r),i({visible:f}),a.next=7,d();case 7:case"end":return a.stop()}},n,a)}))()},addMonitorComponentInfo:function(e,t){var a=this;return(0,o.default)(s.default.mark(function n(){var l,r,o,u,i,d;return s.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=c.actions.monitor,r=l.updateState,o=l.changeVisibleOfComponent,u=t().monitor,i=u.visible,u.dashboardVersion,u.threshold,d=u.hidden,r({visible:i.concat(e),hidden:d.filter(function(t){return e.indexOf(t[0])<0})}),a.next=5,o();case 5:case"end":return a.stop()}},n,a)}))()},changeVisibleOfComponent:function(e,t){var a=this;return(0,o.default)(s.default.mark(function e(){var n,l,o,u,i,d,m,p;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t().monitor,l=n.visible,o=n.dashboardVersion,u=n.threshold,i=n.hidden,d=t().app.currentCluster,m=d.clusterName,p={"user-pref-internaladmin-dashboard":(0,r.default)({dashboardVersion:o,visible:l,threshold:u,hidden:i})},e.next=6,f.Persist(p,m);case 6:return e.next=8,c.actions.monitor.getClusterInfoComponent();case 8:case"end":return e.stop()}},e,a)}))()},getConditionalFields:function(e,t){var a=t().app.serviceList,n=t().monitor,l=n.serviceComponentMetrics,r=n.serviceSpecificParams,s=l.slice(0);return a.forEach(function(e){var t=r[e.ServiceInfo.service_name];t&&s.push(t)}),s},getServiceMetric:function(e,t){var a=this;return(0,o.default)(s.default.mark(function e(){var n,l,r,o,u,i,d,m,p,h,v;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.actions.monitor,l=n.getConditionalFields,r=n.updateState,o=n.loadMetricItemData,t().monitor.loadMetric,u=t().app,i=u.loadService,d=(d=u.currentCluster).clusterName,!i){e.next=11;break}return m=l(),p=m.length>0?","+m.join(","):"",h="components/?"+(!1?"ServiceComponentInfo/component_name=FLUME_HANDLER|":"")+(!1?"ServiceComponentInfo/component_name=APP_TIMELINE_SERVER|":"")+(!1?"ServiceComponentInfo/component_name=JOURNALNODE|ServiceComponentInfo/component_name=ZKFC|":"")+"ServiceComponentInfo/category=MASTER&fields=ServiceComponentInfo/service_name,host_components/HostRoles/display_name,host_components/HostRoles/host_name,host_components/HostRoles/state,host_components/HostRoles/maintenance_state,host_components/HostRoles/stale_configs,host_components/HostRoles/ha_state,host_components/HostRoles/desired_admin_state,"+p+"&minimal_response=true",e.next=8,f.getServiceMetric(h,d);case 8:v=e.sent,r({loadMetric:!0,serviceMetricList:v.data.items||[]}),o();case 11:case"end":return e.stop()}},e,a)}))()},loadMetricItemData:function(){var e=c.actions.monitor,t=e.getNameNodeComponentData,a=e.getFlumeData,n=e.getYarnComponentData,l=e.getHbaseServiceData;a(),t(),n(),l()},getFlumeData:function(e,t){var a=t().monitor,n=a.serviceMetricList,l=(a.flumeData,t().app.currentCluster,c.actions.monitor.updateMetricViewData);n.filter(function(e){return"FLUME_HANDLER"===e.ServiceComponentInfo.component_name});function r(e,t){return e.filter(function(e){return e.HostRoles.state===t})}var s=[];l({FlumeAgentUpView:{flumeAgentsAll:s,flumeAgentsLive:r(s,"STARTED"),flumeAgentsDead:r(s,"INSTALLED")}})},getNameNodeComponentData:function(e,t){var a=c.actions.monitor.updateMetricViewData;t().monitor.serviceMetricList.forEach(function(e){if("NAMENODE"===e.ServiceComponentInfo.component_name){var t,n=(0,E.deepObj)(e.host_components[0],"metrics.runtime.StartTime"),r=(0,E.uptimeProcessing)(n),s=r.timeUnit,o=r.hiddenInfo,u=r.formatted,i=u&&parseFloat(u.split(" ")[0]),c=u?i.toFixed(1)+" "+s:"",d=(0,E.deepObj)(e.host_components[0],"metrics.cpu.cpu_wio"),m=(0,E.deepObj)(e.host_components[0],"metrics.rpc.client.RpcQueueTime_avg_time"),f=m?m.toFixed(2)+"ms":"0ms",p=(0,E.deepObj)(e.host_components[0],"metrics.dfs.FSNamesystem"),h=[{value:d,name:""},{value:100,name:""}],v=(0,E.deepObj)(e.host_components[0],"metrics.jvm.HeapMemoryUsed"),g=(0,E.deepObj)(e.host_components[0],"metrics.jvm.HeapMemoryMax"),y=[{value:v||0,name:""},{value:g||1,name:""}];a((t={NameNodeUptimeView:{contentTime:c,hiddenInfo:o}},(0,l.default)(t,"NameNodeUptimeView",{contentTime:c,hiddenInfo:o}),(0,l.default)(t,"NameNodeCpuPieChartView",{chartData:h}),(0,l.default)(t,"NameNodeRpcView",{rpcContent:f}),(0,l.default)(t,"NameNodeHeapPieChartView",{heapChart:y}),(0,l.default)(t,"NameNodeCapacityPieChartView",{dfsInfo:p}),t))}})},getYarnComponentData:function(e,t){var a=c.actions.monitor.updateMetricViewData;t().monitor.serviceMetricList.forEach(function(e){if("RESOURCEMANAGER"===e.ServiceComponentInfo.component_name){var t=(0,E.deepObj)(e.host_components[0],"metrics.runtime.StartTime");if(t){var n=(0,E.uptimeProcessing)(t),l=n.timeUnit,r=n.hiddenInfo,s=n.formatted,o=parseFloat(s.split(" ")[0]),u=s?o.toFixed(1)+" "+l:"";a({ResourceManagerUptimeView:{contentTime:u,hiddenInfo:r}})}}})},getHbaseServiceData:function(e,t){var a=c.actions.monitor.updateMetricViewData;t().monitor.serviceMetricList.forEach(function(e){if("HBASE_MASTER"===e.ServiceComponentInfo.component_name){var t=void 0,n=void 0,l=0;e.metrics&&(e.host_components.forEach(function(e){if(e.metrics.hbase&&"true"===e.metrics.hbase.master.IsActiveMaster){l+=e.metrics.hbase.master.AverageLoad;var a=e.metrics.hbase.master.MasterStartTime,r=(0,E.uptimeProcessing)(a),s=r.timeUnit,o=r.formatted;n=(0,E.uptimeProcessing)(a);var u=o&&parseFloat(o.split(" ")[0]);t=o?u.toFixed(1)+" "+s:""}}),a({HBaseMasterUptimeView:{contentTime:t,hiddenInfo:n},HBaseAverageLoadView:{averageLoad:l}}))}})},getClusterInfo:function(e,t){var a=this;return(0,o.default)(s.default.mark(function e(){var l,r,o,u,d,m,f,h,v,E;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.actions.monitor.updateClusterInfo,r=t().app,r.clusterList,o=r.currentCluster,u=r.serviceList,d=["HDFS","YARN","MAPREDUCE2","HIVE","HBASE","SQOOP","ZOOKEEPER","FLUME","AMBARI_METRICS","KAFKA","STORM","LOGSEARCH","SPARK2","AMBARI_INFRA","ELK","HADOOP_KMS","IMPALA","SENTRY"],m=["LEAPDATAHUB","LEAPID","LEAPPROCESS","LEAPSQL"],f=u.filter(function(e){return d.indexOf(e.service_name)>-1}),h=u.filter(function(e){return m.indexOf(e.service_name)>-1}),e.next=8,p.getHostListInfo(o.clusterName);case 8:v=e.sent,E=[{key:"1",type:"集群名称",content:i.default.createElement("div",{className:"flexCenterBetween"},o.clusterName)},{key:"2",type:"节点（主机信息）",content:i.default.createElement("div",{className:"flexCenterBetween"},i.default.createElement("span",null,v.data.itemTotal,"个"),i.default.createElement(n.default,{className:"flexCenterBetween"},i.default.createElement(c.Link,{to:"/hosts"},i.default.createElement("i",{className:"hostManageIcon"}),"主机管理")))},{key:"3",type:"大数据组件",content:i.default.createElement("div",{className:"flexCenterBetween"},i.default.createElement("ul",null,f.map(function(e){return i.default.createElement("li",{key:e.service_name},i.default.createElement(c.Link,{to:"/monitor/services/"+e.service_name},e.display_name))})),i.default.createElement(n.default,{className:"flexCenterBetween"},i.default.createElement(c.Link,{to:"/componentManage"},i.default.createElement("i",{className:"componentManageIcon"}),i.default.createElement("span",null,"组件管理"))))},{key:"4",type:"开发工具",content:i.default.createElement("div",{className:"flexCenterBetween"},i.default.createElement("ul",null,h.map(function(e){return i.default.createElement("li",{key:e.service_name},i.default.createElement(c.Link,{to:"/monitor/services/"+e.service_name},e.display_name))})),i.default.createElement(n.default,{className:"flexCenterBetween"},i.default.createElement(c.Link,{to:"/devTools"},i.default.createElement("i",{className:"devToolIcon"}),i.default.createElement("span",null,"开发工具"))))}],l({clusterInfoLoading:!1,clusterInfo:E});case 11:case"end":return e.stop()}},e,a)}))()},restartComponents:function(e,t){var a=this;return(0,o.default)(s.default.mark(function t(){return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,h.restartComponents)(e);case 2:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,a)}))()}}})},489:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCookie=function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var a=document.cookie.indexOf(";",t);return-1==a&&(a=document.cookie.length),unescape(document.cookie.substring(t,a))}}return""},t.clearCookie=function(e){document.cookie=e+"=;  expires=Thu, 01 Jan 1970 00:00:01 GMT;"}},490:function(e,t,a){"use strict";var n=u(a(26)),l=u(a(25)),r=u(a(2)),s=a(11),o=u(s);function u(e){return e&&e.__esModule?e:{default:e}}var i=(0,a(489).getCookie)("LEAP-CLOUD-USERNAME")||"";o.default.model({name:"user",initialState:{status:(i?"online":"offline")||"offline",username:i||""},reducers:{updateState:function(e,t){return(0,r.default)({},e,t)}},effects:{login:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t().user.status,(0,s.actions.user.updateState)(e);case 3:case"end":return a.stop()}},l,a)}))()},logout:function(e,t){var a=this;return(0,l.default)(n.default.mark(function e(){return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,s.actions.user.updateState)({status:"offline",username:""});case 2:case"end":return e.stop()}},e,a)}))()}}})},491:function(e,t,a){"use strict";var n=d(a(26)),l=d(a(25)),r=d(a(2)),s=a(11),o=d(s);a(89);a(490),a(488),a(487),a(486),a(485),a(484),a(483),a(482),a(480);var u=c(a(478)),i=c(a(132));c(a(220));function c(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function d(e){return e&&e.__esModule?e:{default:e}}var m=sessionStorage.getItem("currentCluster"),f=sessionStorage.getItem("clusterList");o.default.model({name:"app",initialState:{clusterList:f?JSON.parse(f):[],currentCluster:m?JSON.parse(m):null,loadService:!1,serviceList:[],getClusterLoading:!1,hostList:[],hostComponentsList:[]},reducers:{updateState:function(e,t){return(0,r.default)({},e,t)}},effects:{routeChange:function(e,t){var a=s.actions.app.updateState,n=t().app.currentrouter;a({currentrouter:e.pathname,lastRouter:n})},getAllService:function(e,t){var a=this;return(0,l.default)(n.default.mark(function e(){var l,r,o,i,c,d,m,f,p,h,v,E,g;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=s.actions.app.updateState,r=t().app.currentCluster,o=r.clusterName,e.next=5,u.getAllStackService({currentCluster:o});case 5:return i=e.sent,e.next=8,u.getAllService({currentCluster:o});case 8:if(c=e.sent,d=[],m={},i=i.data,c=c.data,f=["HDFS","YARN","HBASE"],i.items)for(p=0;p<i.items.length;p++)for(h=i.items[p],v=0;v<c.items.length;v++)E=c.items[v],h.StackServices.service_name===E.ServiceInfo.service_name&&(g=h.StackServices.service_name,m[g]||(m[g]=!0,d.push({service_name:g,display_name:h.StackServices.display_name,ServiceInfo:E.ServiceInfo,StackServices:h.StackServices,artifacts:h.artifacts,hasHeatMap:f.indexOf(g)>-1,components:h.components})));l({loadService:!0,serviceList:d});case 16:case"end":return e.stop()}},e,a)}))()},getClusterList:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){var r,o,u;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=s.actions.app.updateState,o=t().app.currentCluster,r({getClusterLoading:!0}),a.next=5,i.getClusterList();case 5:if(!(u=a.sent)||1!==u.code){a.next=17;break}if(e&&e.host_name&&(o=u&&u.data.filter(function(t){return e.host_name.toLowerCase().indexOf(t.clusterName.toLowerCase())>=0})[0]),!u.data||0!=u.data.length){a.next=13;break}return sessionStorage.removeItem("currentCluster"),sessionStorage.removeItem("clusterList"),r({getClusterLoading:!1}),a.abrupt("return",u);case 13:return r({clusterList:u.data,currentCluster:o||u.data[0],getClusterLoading:!1}),a.abrupt("return",u.data);case 17:r({getClusterLoading:!1});case 18:case"end":return a.stop()}},l,a)}))()},changeCluster:function(e,t){var a=this;return(0,l.default)(n.default.mark(function l(){var r,o,u;return n.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=s.actions.app.updateState,o=t().app,u=o.clusterList,o.currentrouter,r({getClusterLoading:!0}),r(e?{currentCluster:e,getClusterLoading:!1}:{currentCluster:u[0]||{},getClusterLoading:!1}),a.abrupt("return",!0);case 5:case"end":return a.stop()}},l,a)}))()},getHostList:function(e,t){var a=this;return(0,l.default)(n.default.mark(function e(){var l,r,o;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=s.actions.app.updateState,r=t().app.currentCluster,e.next=4,u.getHostList({clusterID:r.clusterId});case 4:o=e.sent,l({hostList:o.data});case 6:case"end":return e.stop()}},e,a)}))()},getHostComponents:function(e,t){var a=this;return(0,l.default)(n.default.mark(function e(){var l,r,o,i,c,d;return n.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=s.actions.app.updateState,r=t().app.currentCluster,e.next=4,u.getHostComponents({clusterID:r.clusterId});case 4:for(c in o=(o=e.sent).data,i={master:[],slave:[]},o)for(d=0;d<o[c].length;d++)"SLAVE"==o[c][d].category||"CLIENT"==o[c][d].category?i.slave[o[c][d].name]?i.slave[o[c][d].name]=i.slave[o[c][d].name].concat(c):i.slave[o[c][d].name]=[c]:"MASTER"==o[c][d].category&&(i.master[o[c][d].name]?i.master[o[c][d].name]=i.master[o[c][d].name].concat(c):i.master[o[c][d].name]=[c]);l({hostComponentsList:i});case 9:case"end":return e.stop()}},e,a)}))()}}}),o.default.model({name:"layout",initialState:{width:200,xWidth:80,collapsed:!1,selected:["monitor"],openKey:["manage"],selectedKeys:["monitor"],menuItems:[{key:"manage",name:"集群管理",icon:"clusterManage",children:[{key:"monitor",name:"状态&监控",icon:"file-text"},{key:"hosts",name:"主机管理",icon:"file-text"},{key:"componentManage",name:"组件管理",icon:"file-text"},{key:"devTools",name:"开发工具",icon:"file-text"},{key:"security",name:"安全管理",icon:"file-text"},{key:"alerts",name:"告警管理",icon:"file-text"}]},{key:"tools",name:"开发工具",icon:"tools"},{key:"user",name:"用户管理",icon:"userManage",children:[]},{key:"db",name:"数据库管理",icon:"dbManage",children:[]}]},reducers:{toggle:function(e){return(0,r.default)({},e,{collapsed:!e.collapsed})},updateMenuSelectedKey:function(e,t){return(0,r.default)({},e,t)}},effects:{changeMenuSelectedKey:function(e,t){(0,s.actions.layout.updateMenuSelectedKey)({selectedKeys:e})}}})},493:function(e,t,a){},520:function(e,t,a){},542:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=A(a(17)),l=A(a(37)),r=A(a(541)),s=A(a(324)),o=A(a(2)),u=A(a(40)),i=A(a(14)),c=A(a(8)),d=A(a(134)),m=A(a(12)),f=A(a(4)),p=A(a(6)),h=A(a(3)),v=A(a(5)),E=A(a(528)),g=A(a(27)),y=A(a(162)),_=A(a(120));a(20),a(36),a(526),a(314),a(34),a(22),a(133),a(523),a(29),a(161),a(142);var S=a(1),N=A(S),C=(a(11),A(a(160))),b=A(a(97));a(520);var M=A(a(115)),k=A(a(518));function A(e){return e&&e.__esModule?e:{default:e}}var L=_.default.Group,R=y.default.Item,w=g.default.Option,I=E.default.Option,T=function(e){function t(e){var a;(0,f.default)(this,t);var n=(0,h.default)(this,(t.__proto__||(0,m.default)(t)).call(this,e));return n.getProductList=function(){var e=n;console.log(e),b.default.post("/token/product/doSearch",{isMy:!0},{headers:{authorization:n.state.userKey}}).then(function(t){1==t.data.code&&e.setState({loading:!1,productList:t.data.data.data})})},n.formatStatus=function(e){return 0==e?"未发布":1==e?"已发布":"已结束"},n.timestampToTime=function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},n.setStatusDown=function(e){return function(){console.log(e)}},n.setStatusUp=function(e){return function(){console.log(e)}},n.handlePreview=function(e){console.log(e),n.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},n.handleChange=function(e){var t=e.fileList,a=e.file.status;"uploading"!==a&&console.log(e.file,e.fileList),"done"===a||"error"===a&&d.default.error(e.file.name+" file upload failed."),n.setState({fileList:t})},n.handleChangeInput=function(e){console.log(e)},n.changePriceType=function(e){console.log("radio checked",e.target.value),n.setState({priceType:e.target.value})},n.handleSubmit=function(e){var t=n;e.preventDefault(),console.log(n.state.guide),n.props.form.validateFields(function(e,a){if(!e){var l=a.productName,r=a.userDate,s=a.productCount,o=a.rawPrice,u=a.discountPrice,i=a.limitTime,c=a.peopleNum1,m=a.collagePrice1,f=a.collageLimitTime1,p=a.peopleNum2,h=a.collagePrice2,v=a.collageLimitTime2,E=a.peopleNum3,g=a.collagePrice3,y=a.collageLimitTime3;n.setState({submitLoading:!0});var _=[];n.state.fileList.forEach(function(e){_.push(e.response.data.image_src)});var S={name:l,userDate:r,priceType:n.state.priceType,productCount:s,rawPrice:o,discountPrice:u,status:0,limitTime:i,commission:.1*u,introduction:n.state.introduction,costDescription:n.state.costDescription,reservationNote:n.state.reservationNote,guide:n.state.guide,imageUrls:_,imageUrl:_[0]};if(console.log(n.state.guide),2==n.state.priceType){var N=[];""!=c&&""!=m&&""!=f&&N.push({peopleNum1:c,collagePrice1:m,collageLimitTime1:f}),""!=p&&""!=h&&""!=v&&N.push({peopleNum1:p,collagePrice1:h,collageLimitTime1:v}),""!=E&&""!=g&&""!=y&&N.push({peopleNum1:E,collagePrice1:g,collageLimitTime1:y}),S.productCollages=N}b.default.post("/token/product/doAdd",S,{headers:{"Content-Type":"application/json",authorization:t.state.userKey}}).then(function(e){n.setState({submitLoading:!1}),console.log(e);var t=n.props.history;d.default.success("添加成功！"),t.push("/")}).catch(function(e){n.setState({submitLoading:!1})})}})},n.state=(a={loading:!0,userKey:M.default.get("TRIPNOTE-KEY"),autoCompleteResult:[],previewVisible:!1,previewImage:"",priceType:1,limitTime:"",rawrawPrice:"",discountPrice:""},(0,c.default)(a,"rawrawPrice",""),(0,c.default)(a,"peopleNum1",""),(0,c.default)(a,"collagePrice1",""),(0,c.default)(a,"collageLimitTime1",""),(0,c.default)(a,"peopleNum2",""),(0,c.default)(a,"collagePrice2",""),(0,c.default)(a,"collageLimitTime2",""),(0,c.default)(a,"peopleNum3",""),(0,c.default)(a,"collagePrice3",""),(0,c.default)(a,"collageLimitTime3",""),(0,c.default)(a,"introduction"," "),(0,c.default)(a,"costDescription"," "),(0,c.default)(a,"reservationNote"," "),(0,c.default)(a,"guide"," "),(0,c.default)(a,"fileList",[]),a),n}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentWillMount",value:function(){}},{key:"handleChangeintroduction",value:function(e){this.setState({introduction:e})}},{key:"handleChangecostDescription",value:function(e){this.setState({costDescription:e})}},{key:"handleChangereservationNote",value:function(e){this.setState({reservationNote:e})}},{key:"handleChangeguide",value:function(e){this.setState({guide:e})}},{key:"getIcons",value:function(){return["source | undo redo | bold italic underline strikethrough fontborder emphasis | ","paragraph fontfamily fontsize | superscript subscript | ","forecolor backcolor | removeformat | insertorderedlist insertunorderedlist | selectall | ","cleardoc  | indent outdent | justifyleft justifycenter justifyright | touppercase tolowercase | ","horizontal date time  | image emotion spechars | inserttable"]}},{key:"getImgUploader",value:function(){return{url:"/upload/common/image",type:"local",name:"file",request:"image_src"}}},{key:"render",value:function(){for(var e=this.props.form.getFieldDecorator,t=this.state,a=t.priceType,c=(t.loading,t.productList,t.submitLoading,t.autoCompleteResult),d=t.previewVisible,m=t.previewImage,f=t.fileList,p=N.default.createElement("div",null,N.default.createElement(i.default,{type:"plus"}),N.default.createElement("div",{className:"ant-upload-text"},"Upload")),h={labelCol:{xs:{span:28},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:16}}},v=(e("prefix",{initialValue:"86"})(N.default.createElement(g.default,{style:{width:70}},N.default.createElement(w,{value:"86"},"+86"),N.default.createElement(w,{value:"87"},"+87"))),c.map(function(e){return N.default.createElement(I,{key:e},e)}),this.getIcons()),E={image:{uploader:this.getImgUploader()}},S=[],b=0;b<100;b++)S.push({icons:v,plugins:E});return N.default.createElement("div",{className:"productCreateWrap"},N.default.createElement(C.default,null),N.default.createElement("div",{className:"productCreateForm"},N.default.createElement(y.default,{onSubmit:this.handleSubmit},N.default.createElement(R,(0,o.default)({},h,{label:"产品名称"}),e("productName",{rules:[{required:!0,message:"请输入产品名称"}]})(N.default.createElement(u.default,null))),N.default.createElement(R,(0,o.default)({},h,{label:"使用日期",className:"itemLeavl0"}),e("userDate",{rules:[{type:"object",required:!0,message:"请选择日期!"}]})(N.default.createElement(s.default,{className:"itemLeavl0"}))),N.default.createElement(R,(0,o.default)({},h,{label:"产品图片"}),N.default.createElement(r.default,{action:"/upload/common/image",listType:"picture-card",fileList:f,onPreview:this.handlePreview,onChange:this.handleChange},f.length>=10?null:p),N.default.createElement(l.default,{visible:d,footer:null,onCancel:this.handleCancel},N.default.createElement("img",{alt:"example",style:{width:"100%"},src:m}))),N.default.createElement(R,(0,o.default)({},h,{label:"产品介绍",className:"itemLeavl1"}),N.default.createElement(k.default,{icons:v,value:this.state.introduction,defaultValue:"",onChange:this.handleChangeintroduction.bind(this),plugins:E})),N.default.createElement(R,(0,o.default)({},h,{label:"费用说明",className:"itemLeavl2"}),N.default.createElement(k.default,{icons:v,value:this.state.costDescription,defaultValue:"",onChange:this.handleChangecostDescription.bind(this),plugins:E})),N.default.createElement(R,(0,o.default)({},h,{label:"预定须知",className:"itemLeavl3"}),N.default.createElement(k.default,{icons:v,value:this.state.reservationNote,defaultValue:"",onChange:this.handleChangereservationNote.bind(this),plugins:E})),N.default.createElement(R,(0,o.default)({},h,{label:"实用指南"}),N.default.createElement(k.default,{icons:v,value:this.state.guide,defaultValue:"",onChange:this.handleChangeguide.bind(this),plugins:E})),N.default.createElement(R,(0,o.default)({},h,{label:"价格类型"}),N.default.createElement(L,{name:"radiogroup",defaultValue:a,onChange:this.changePriceType},N.default.createElement(_.default,{value:1},"限时特价"),N.default.createElement(_.default,{value:2},"拼团"))),1==a?N.default.createElement("div",null,N.default.createElement(R,(0,o.default)({},h,{label:"时间限制"}),e("productLimitTime",{rules:[]})(N.default.createElement(u.default,{className:"inputS"}))),N.default.createElement(R,(0,o.default)({},h,{label:"商品份数"}),e("productCount",{rules:[]})(N.default.createElement(u.default,{className:"inputS"}))),N.default.createElement(R,(0,o.default)({},h,{label:"原价"}),e("rawPrice",{rules:[]})(N.default.createElement(u.default,{className:"inputS"}))),N.default.createElement(R,(0,o.default)({},h,{label:"折扣价"}),e("discountPrice",{rules:[]})(N.default.createElement(u.default,{className:"inputS"})))):"",2==a?N.default.createElement("div",null,N.default.createElement(R,(0,o.default)({},h,{label:"商品份数"}),e("productCount",{rules:[]})(N.default.createElement(u.default,{className:"inputS"}))),N.default.createElement(R,(0,o.default)({},h,{label:"原价"}),e("rawPrice",{rules:[]})(N.default.createElement(u.default,{className:"inputS"}))),N.default.createElement(R,(0,o.default)({},h,{label:"拼团价格"}),N.default.createElement("div",{className:"groupList"},N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"人数："),e("peopleNum1",{rules:[]})(N.default.createElement(u.default,null))),N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"价格："),e("collagePrice1",{rules:[]})(N.default.createElement(u.default,null))),N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"时限："),e("collageLimitTime1",{rules:[]})(N.default.createElement(u.default,null)))),N.default.createElement("div",{className:"groupList"},N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"人数："),e("peopleNum2",{rules:[]})(N.default.createElement(u.default,null))),N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"价格："),e("collagePrice2",{rules:[]})(N.default.createElement(u.default,null))),N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"时限："),e("collageLimitTime2",{rules:[]})(N.default.createElement(u.default,null)))),N.default.createElement("div",{className:"groupList"},N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"人数："),e("peopleNum3",{rules:[]})(N.default.createElement(u.default,null))),N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"价格："),e("collagePrice3",{rules:[]})(N.default.createElement(u.default,null))),N.default.createElement("div",{className:"cell"},N.default.createElement("label",null,"时限："),e("collageLimitTime3",{rules:[]})(N.default.createElement(u.default,null)))))):"",N.default.createElement(R,{wrapperCol:{xs:{span:28,offset:4},sm:{span:20,offset:4}}},N.default.createElement(n.default,{type:"primary",htmlType:"submit"},"提交")))))}}]),t}(S.Component),x=y.default.create()(T);t.default=x},544:function(e,t,a){},545:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(39)),l=E(a(134)),r=E(a(84)),s=E(a(12)),o=E(a(4)),u=E(a(6)),i=E(a(3)),c=E(a(5));a(38),a(133),a(83);var d=a(1),m=E(d),f=a(11),p=E(a(160)),h=E(a(97));a(544);var v=E(a(115));function E(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.getProductList=function(){var e=a;console.log(e),h.default.post("/token/product/doSearch",{isMy:!0},{headers:{authorization:a.state.userKey}}).then(function(t){1==t.data.code&&e.setState({loading:!1,productList:t.data.data.data})})},a.formatStatus=function(e){return-1==e||0==e?"未发布":1==e?m.default.createElement(r.default,{color:"#87d068"},"已发布"):void 0},a.timestampToTime=function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},a.setStatusDown=function(e){return function(){console.log(e),h.default.post("/token/product/status/doUpdate",{statuses:[{id:e.id,status:-1}]},{headers:{"Content-Type":"application/json",authorization:a.state.userKey}}).then(function(e){l.default.success("操作成功！"),a.getProductList()})}},a.setStatusUp=function(e){return function(){console.log(e),h.default.post("/token/product/status/doUpdate",{statuses:[{id:e.id,status:1}]},{headers:{"Content-Type":"application/json",authorization:a.state.userKey}}).then(function(e){l.default.success("操作成功！"),a.getProductList()})}},a.getColumns=function(){return[{title:"产品图片",dataIndex:"label",key:"label",width:90,render:function(e,t,a){return m.default.createElement("img",{src:t.imageUrl,className:"pic"})}},{title:"名称",dataIndex:"name",key:"name",width:300},{title:"类型",dataIndex:"priceType",key:"priceType",render:function(e,t,a){return 1==e?"限时特价":"拼团"}},{title:"原价",dataIndex:"rawPrice",key:"rawPrice",render:function(e,t,a){return m.default.createElement("span",null,"￥",e)}},{title:"折扣价",dataIndex:"discountPrice",key:"discountPrice",render:function(e,t,a){return e?m.default.createElement("span",null,"￥",e):""}},{title:"创建时间",dataIndex:"createTime",key:"createTime",render:function(e,t,n){return a.timestampToTime(e)}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t,a){return-1==e||0==e?m.default.createElement(r.default,{color:"#2db7f5"},"未发布"):1==e?m.default.createElement(r.default,{color:"#87d068"},"已发布"):void 0}},{title:"操作",dataIndex:"status",key:"opreate",render:function(e,t,n){return 0==e||-1==e?m.default.createElement("div",null,m.default.createElement("a",{href:"javascript:;"},"编辑"),"  ",m.default.createElement("a",{href:"javascript:;",onClick:a.setStatusUp(t)},"上架")):1==e?m.default.createElement("a",{href:"javascript:;",onClick:a.setStatusDown(t)},"下架"):void 0}}]},a.state={loading:!0,productList:[],userKey:v.default.get("TRIPNOTE-KEY")},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"componentWillMount",value:function(){this.getProductList()}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.productList;return m.default.createElement("div",{className:"productWrap"},m.default.createElement(p.default,null),m.default.createElement("div",{className:"productList"},m.default.createElement("div",{className:"title"},m.default.createElement("span",{className:"name"},"产品列表"),m.default.createElement(f.Link,{to:"/productCreate",className:"link"},"添加产品")),m.default.createElement(n.default,{className:"productListTable",loading:t,bordered:!0,dataSource:a,columns:this.getColumns()})))}}]),t}(d.Component);t.default=g},547:function(e,t,a){},548:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(14)),l=y(a(78)),r=y(a(17)),s=y(a(40)),o=y(a(8)),u=y(a(12)),i=y(a(4)),c=y(a(6)),d=y(a(3)),m=y(a(5)),f=y(a(162));a(22),a(99),a(20),a(34),a(161);var p=a(1),h=y(p),v=y(a(160)),E=y(a(300)),g=y(a(97));function y(e){return e&&e.__esModule?e:{default:e}}a(547);var _=f.default.Item,S=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=t.username,l=t.password;a.setState({submitLoading:!0}),g.default.post("/user/register",{username:n,password:l,nickname:"nickname"}).then(function(e){a.setState({submitLoading:!1}),1==e.data.code&&a.props.history.push("/signIn")}).catch(function(e){a.setState({submitLoading:!1}),a.props.form.setFields({password:{value:l,errors:[new Error("登录失败, 请稍候再试")]}})})}})},a.getVCode=function(){var e=a.props.form.getFieldsValue().username,t=a.props.form.getFieldsValue().vCode||"";e?(a.setState({getVCodeLoading:!0}),g.default.post("/user/getMailVcode",{username:e,forCreate:!0}).then(function(n){if(a.setState({getVCodeLoading:!1}),1!==n.data.code&&"Code has been send"!==n.data.message||a.setState({vCodeBtnDisable:!0}),1!==n.data.code){var l="Used mail address"==n.data.message?"邮箱已经被使用过":"验证码已经发送过(可查看最近 30 分钟内的邮件)",r="Used mail address"==n.data.message?"username":"vCode";a.props.form.setFields((0,o.default)({},r,{value:"username"==r?e:t,errors:[new Error(l)]}))}}).catch(function(t){a.setState({getVCodeLoading:!1}),a.props.form.setFields({username:{value:e,errors:[new Error("验证码获取失败, 请稍候再试")]}})})):a.props.form.validateFields(["username"])},a.checkThePwd=function(e,t,a){/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/.test(t)||a("请输入8~12位数字字母组成的密码"),a()},a.checkCheckbox=function(e,t,a){t||a("请确认已阅读隐私协议"),a()},a.checkVCode=function(e,t,n){var l=a.props.form.getFieldsValue().username;l&&t&&4===t.length?g.default.post("/user/checkVcode",{username:l,vcode:t}).then(function(e){console.log(e),1==e.data.code?n():n("验证码输入有误")}):n()},a.state={},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=(t.vcode,t.errInfo,t.vCodeBtnDisable),o=t.getVCodeLoading,u=t.submitLoading;return h.default.createElement("div",{className:"register"},h.default.createElement(v.default,null),h.default.createElement("div",{className:"registerContent"},h.default.createElement("div",{className:"rigisterWrapper"},h.default.createElement("div",{className:"leftContent fl"},h.default.createElement("h2",null,"注册"),h.default.createElement(f.default,{onSubmit:this.handleSubmit},h.default.createElement(_,null,e("username",{rules:[{required:!0,message:"请输入正确的邮箱地址",type:"email"}],validateFirst:!0})(h.default.createElement(s.default,{placeholder:"请输入邮箱",prefix:"邮  箱:"}))),h.default.createElement(_,{className:"registervCode"},e("vCode",{rules:[{required:!0,message:"请输入验证码"},{validator:this.checkVCode}]})(h.default.createElement(s.default,{placeholder:"请输入验证码",prefix:"验 证 码: ",className:o&&"width240"})),h.default.createElement(r.default,{loading:o,title:a?"验证码已发送":"发送验证码",disabled:a,onClick:this.getVCode},"获取验证码")),h.default.createElement(_,null,e("password",{rules:[{required:!0,message:"请输入8~12位数字字母组成的密码"},{validator:this.checkThePwd}]})(h.default.createElement(s.default,{type:"password",placeholder:"请输入密码",prefix:"新 密 码: "}))),h.default.createElement(_,null,e("rePassword",{rules:[{required:!0,message:"请输入正确的密码"},{validator:this.checkThePwd}]})(h.default.createElement(s.default,{type:"password",placeholder:"请确认密码",prefix:"确认密码: "}))),h.default.createElement(_,null,e("remember",{valuePropName:"checked",initialValue:!0,rules:[{validator:this.checkCheckbox}]})(h.default.createElement(l.default,null,"阅读并勾选")),h.default.createElement("label",null,"《",h.default.createElement("a",{href:"#"},"隐私协议"),"》")),h.default.createElement(r.default,{loading:u,type:"primary",htmlType:"submit",className:"registerBtn"},"注册")),h.default.createElement("p",{className:"hasAccount"},h.default.createElement(n.default,{type:"left"})," 已有账户, 点击",h.default.createElement("a",{href:"/signIn"},"登录"))),h.default.createElement("div",{className:"rightPic fl"},h.default.createElement("img",{src:E.default,alt:"注册"})))))}}]),t}(p.Component),N=f.default.create()(S);t.default=N},550:function(e,t,a){},552:function(e,t,a){},553:function(e,t,a){e.exports=a.p+"static/media/fulllogo.89381b0d.png"},555:function(e,t,a){},556:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(136));a(135);var l=r(a(1));function r(e){return e&&e.__esModule?e:{default:e}}a(555),t.default=function(e){return l.default.createElement(n.default,{current:e.currentStep,className:"stepComponent "+e.className},e.steps.map(function(t,a){return e.children(t,a)}))}},557:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=N(a(17)),l=N(a(40)),r=N(a(2)),s=N(a(134)),o=N(a(8)),u=N(a(12)),i=N(a(4)),c=N(a(6)),d=N(a(3)),m=N(a(5)),f=N(a(162)),p=N(a(136));a(20),a(34),a(133),a(161),a(135);var h=a(1),v=N(h),E=N(a(556)),g=N(a(160)),y=N(a(300)),_=N(a(97)),S=N(a(221));a(11);function N(e){return e&&e.__esModule?e:{default:e}}a(550);var C=p.default.Step,b=f.default.Item,M=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.inputChange=function(e,t){"username"===e&&(a.emailErr.className="rowInput"),a.setState((0,o.default)({},e,t.target.value))},a.getVCode=function(){var e=a.state.username;e?(a.setState({nextLoading:!0}),_.default.post("/user/getMailVcode",{username:e,forCreate:!1}).then(function(e){1==e.data.code?a.nextStep({nextLoading:!1}):"Code has been send"==e.data.message?setTimeout(function(){a.emailErr.className="rowInput info",a.emailErr.querySelector("p").innerHTML="邮箱已发送, 请查看最近 30 分钟内的邮件",a.nextStep({nextLoading:!1})},1500):a.setState({nextLoading:!1})}).catch(function(e){a.setState({nextLoading:!1}),a.emailErr.className="rowInput info",a.emailErr.querySelector("p").innerHTML="验证码发送失败, 请稍候再试"})):a.emailErr.className="rowInput error"},a.checkVCode=function(){var e=a.state,t=e.vcode,n=e.username;a.setState({nextLoading:!0}),_.default.post("/user/checkVcode",{username:n,vcode:t}).then(function(e){a.setState({nextLoading:!1}),1==e.data.code?a.nextStep():s.default.error("验证码有误")})},a.postNewPwd=function(){var e=a.props.form.getFieldsValue().password,t=a.state.username;a.setState({nextLoading:!0}),_.default.post("/user/resetPassword",{username:t,password:e}).then(function(e){a.setState({nextLoading:!1}),1==e.data.code&&a.nextStep()})},a.checkThePwd=function(e,t,a){/^(?![0-9]+$)(?![a-zA-Z]+$)[0-9A-Za-z]{8,16}$/.test(t)||a("请输入8~12位数字字母组成的密码"),a()},a.checkTheRePwd=function(e,t,n){var l=a.props.form.getFieldsValue().password;a.props.form.isFieldTouched("password")||a.props.form.setFields({password:{errors:[new Error("请先输入密码")]}}),l!==t&&n("两次密码输入不一致"),n()},a.nextStep=function(e){var t=a.state.currentStep;location.hash=("?step="+(+t+1))/a.setState((0,r.default)({currentStep:+t+1},e))},a.state={currentStep:0,times:5},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.currentStep,r=(t.times,t.nextLoading),s=this.props.form.getFieldDecorator;return v.default.createElement("div",{className:"changePwd"},v.default.createElement(g.default,null),v.default.createElement("div",{className:"changePwdContent"},v.default.createElement("div",{className:"changePwdWrapper"},v.default.createElement("div",{className:"leftContent fl"},v.default.createElement("h2",null,"找回密码"),v.default.createElement(E.default,{className:"createSteps",currentStep:a||0,steps:["填写邮箱","身份验证","设置新密码","修改完成"]},function(e,t){return v.default.createElement(C,{key:t,title:e,icon:v.default.createElement("i",null,t+1)})}),0==a&&v.default.createElement("div",{className:"forgetPwd forgetPwdStep1"},v.default.createElement("div",{className:"rowInput",ref:function(t){return e.emailErr=t}},v.default.createElement(l.default,{placeholder:"请输入邮箱",onChange:this.inputChange.bind(this,"username"),prefix:v.default.createElement("label",null,"邮箱:")}),v.default.createElement("p",null,"请输入正确的邮箱地址")),v.default.createElement(n.default,{loading:r,type:"primary",onClick:this.getVCode},"获取验证码")),1==a&&v.default.createElement("div",{className:"forgetPwd forgetPwdStep2"},v.default.createElement("div",{className:"rowInput"},v.default.createElement(l.default,{onChange:this.inputChange.bind(this,"vcode"),placeholder:"请输入验证码",prefix:v.default.createElement("label",null,"验证码:")}),v.default.createElement(n.default,{onClick:this.getVCode,className:"reget"},"重新获取")),v.default.createElement(n.default,{loading:r,type:"primary",onClick:this.checkVCode},"下一步")),2==a&&v.default.createElement(f.default,{className:"forgetPwd changePwdForm",onSubmit:this.handleSubmit},v.default.createElement(b,null,s("password",{rules:[{required:!0,message:"请输入密码"},{validator:this.checkThePwd}]})(v.default.createElement(l.default,{type:"password",placeholder:"请输入密码",prefix:"修改密码:"}))),v.default.createElement(b,null,s("rePassword",{rules:[{required:!0,message:"请确认密码"},{validator:this.checkTheRePwd}]})(v.default.createElement(l.default,{type:"password",placeholder:"请确认密码",prefix:"确认密码:"}))),v.default.createElement(n.default,{loading:r,type:"primary",onClick:this.postNewPwd},"确认")),3==a&&v.default.createElement(S.default,{title:"密码修改完成",pathTo:"signIn"})),v.default.createElement("div",{className:"rightPic fl"},v.default.createElement("img",{src:y.default,alt:"修改密码"})))))}}]),t}(h.Component);M=f.default.create()(M),t.default=M},559:function(e,t,a){},571:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(17)),l=v(a(40)),r=v(a(14)),s=v(a(12)),o=v(a(4)),u=v(a(6)),i=v(a(3)),c=v(a(5)),d=v(a(162));a(20),a(34),a(22),a(161);var m=v(a(1)),f=a(11),p=v(a(97)),h=v(a(115));function v(e){return e&&e.__esModule?e:{default:e}}a(559);var E=d.default.Item,g=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleSubmit=function(e){e.preventDefault(),a.props.form.validateFields(function(e,t){if(!e){var n=t.phone,l=t.smsCode;a.setState({loginLoading:!0}),p.default.post("/phone/doLogin",{phone:n,smsCode:l},{headers:{"Content-Type":"application/json"}}).then(function(e){if(a.setState({loginLoading:!1}),2==e.data.code){f.actions.user.login({status:"online"});var t=a.props.history;h.default.set("TRIPNOTE-KEY","Bearer "+e.data.data.token,{path:"/",expires:7}),t.push("/")}}).catch(function(e){console.log("err",e),e&&(a.setState({loginLoading:!1}),a.props.form.setFields({smsCode:{value:l,errors:[new Error("登录失败, 请稍候再试("+e.response.status+")")]}}))})}})},a.getCode=function(){console.log(a.props.form.getFieldsValue()),a.props.form.validateFields(function(e,t){if(!e.phone){a.setState({getCodeAble:!1,time:60});var n=t.phone;p.default.post("/sendLoginCode",{phoneNo:n}).then(function(e){console.log(e)}).catch(function(e){})}})},a.checkPhone=function(e,t,a){!t||/^(([0\+]\d{2,3}-)?(0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$/.test(t)||/^(1(([35][0-9])|(47)|[8][01236789]))\d{8}$/.test(t)||a("请输入正确的电话号码"),a()},a.state={getCodeAble:!0,time:60},a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.loginLoading;return m.default.createElement("div",{className:"loginpagewrap"},m.default.createElement("div",{className:"loginContent"},m.default.createElement("div",{className:"loginContentInner maxWidth1200"},m.default.createElement("div",{className:"loginBox"},m.default.createElement("h2",null,"登录"),m.default.createElement(d.default,{onSubmit:this.handleSubmit,className:"loginForm"},m.default.createElement(E,null,e("phone",{rules:[{required:!0,message:"请输入手机号"},{validator:this.checkPhone}]})(m.default.createElement(l.default,{placeholder:"请输入手机号",prefix:m.default.createElement(r.default,{type:"user"})}))),m.default.createElement(E,{className:"loginPwd"},e("smsCode",{rules:[{required:!0,message:"请输入验证码"}]})(m.default.createElement(l.default,{className:"inputCode",placeholder:"请输入验证码",prefix:m.default.createElement(r.default,{type:"unlock"})})),m.default.createElement("a",{href:"javascript:;",className:"getCode",onClick:this.getCode},"获取验证码")),m.default.createElement(n.default,{loading:t,type:"primary",htmlType:"submit",className:"loginBtn"},"登录"))))))}}]),t}(m.default.Component),y=d.default.create()(g);t.default=y},572:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAhCAYAAABX5MJvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDY3NTlDRjA1NUI2MTFFODkyMzVDREI2REM1QUJGNjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDY3NTlDRjE1NUI2MTFFODkyMzVDREI2REM1QUJGNjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowNjc1OUNFRTU1QjYxMUU4OTIzNUNEQjZEQzVBQkY2MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowNjc1OUNFRjU1QjYxMUU4OTIzNUNEQjZEQzVBQkY2MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgKkBUQAAAN5SURBVHjavJjLT1NBFMZP39BS+gAEWgREJBFCRCUxboxhY2KiLnRpTIgrTdyZGE2Mbtz4H7hxY1xp4iMa40KJ8bUwaoREqyKvYhHaQrmFlra09ZvLDCmFlrlQOMkvLenM3O/OOXPOGXS/hoZI0srBcdADOkArqOC/zYNB0A/6wAsQl11YJyGiEVwG54BDcl0F3Ae3wch6g/VFfrOAm8AHLmkQwKwSXAA/wS1QthER7O3fgRvcDRs1M7gGPoIWLSLawQfQTaWzLvAedMqIaAAvgZdKb3XgFQ/ogiLY1j3mQrbKasDDfBfnirgODtLW2z4e8KuOaDM/BRbaHkvxXPM7dyeuaBWwkEhRYDJCo39D9C8YoWRqUct0E7iauxN2fE4Am8zsTCZLQ2OTqoAVftXraKenipq81bJC4jxYFbYTx2QFMPP9CawSIMSNjodo2B/UUgZOCnf0yM6ajsxTaDpadMz4RJhi8YTskj1CRJfsjKnw7LpjslmiYDgqu+R+IaJV2onxpHTQSlqzECFdmIxGg9Q4FqSS5hQi5GdUWks6TpxQPa/9Ula/w0kmU/HdsJZbqNptl11yjoUREzGsxR3te7wF3VJmMVFHm5d0OunNVRseIxjQUrYddit1d+4iP45ieGaOFhczZDYb1LdvqHeT0WDQ4opvQsRr0KupUzEbaXdTrcomrU8E5nOQoO03do6fip2YAQ/AWZmZWWSjGPJFbCEJV6SXwptVJAQsC8ryMrOsiCcgmFvK23m7vqZD0+mMmq5DM1GKKDH174LlEWJcDhvVuCvJ7bQVCtIs712+ip1g9h3cARdzR7Ly7A9Mq6W62INX7HEqTVMhRcVsMpK3zkWeWhcZDCs6ybtCQP69g7Xpn0DbUp1QaHBkcnnLN2Ps6La11IskNsJrRmSt9o4lrTNglgnwDQZKIkDUkgGfn7lylj8jUqzbZjnjBPoCpdRHAQEdRZk/ha+fZe4dbzHliJZMKmFj4CgO1hvpG5jDbmOZ7AAPoOxmNgDc42t9cRQobGuKaPRWIf3qmd/Og0PgETupGh7OjtIzcJhfpMMWZFlPrVPbrVyJxukHgjORXG5QPOA0b8nY3aEp5yUyfMv7+S2LXXACYqLNaqG9rV4kM7P2fw2w5jWMBKXMxdXzz7Jlnrn4ZyTfbTo0NixPsILndlZQscL6X4ABAEJUJZPouhbRAAAAAElFTkSuQmCC"},573:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6N0VFNTE0MEI1NUI5MTFFOEE0NDZEMUNFMDFGNjE3QjEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6N0VFNTE0MEM1NUI5MTFFOEE0NDZEMUNFMDFGNjE3QjEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo3RUU1MTQwOTU1QjkxMUU4QTQ0NkQxQ0UwMUY2MTdCMSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo3RUU1MTQwQTU1QjkxMUU4QTQ0NkQxQ0UwMUY2MTdCMSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqQ0UGYAAAEgSURBVHjatNMxSMNAFMbxJgRxsuAgjooguHUproUqIgjucezSqYO7YDt2cHPqpjhYoXRXcBFxcXASoUNLRQoKgh2bNv4PXiCE3F069MFvSHL5cnnJcy4ur3OWchCaFria85toYYQZfnCDnawhJbxigiOsooxPvOA4eYOXOF5DB1W0Y+d/8YYH3GEXH7qd1HCfCIiXunaFU9Pr7OHW0mj1gH1TyDr6lpCh9Ekb4khDTRVm/cRz1UJC1CefWu4JZJ2bFnKAb7xbQr7wDD8t5Bx125xINXAW/axRyCGW0c3YhicMcBL1wJHkggzbPLWlBtOV7RclLLIkE+zLserXGPnEOhUSeJonTCRADVsTK6jgL22xZ9jqIzawjZ4uQNW/AAMAtA41ny0RoecAAAAASUVORK5CYII="},574:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACEAAAAmCAYAAABK4fLXAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODRDODA1ODg1ODQwMTFFOEE0MTBDMzQ0RkI3OTdFREMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODRDODA1ODk1ODQwMTFFOEE0MTBDMzQ0RkI3OTdFREMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4NEM4MDU4NjU4NDAxMUU4QTQxMEMzNDRGQjc5N0VEQyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4NEM4MDU4NzU4NDAxMUU4QTQxMEMzNDRGQjc5N0VEQyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgDES6UAAAVJSURBVHjavJh/TBxFFMdn9/hx1KNeEEgb8EADx1VBQEhFYg2IKEYbY40xrX9oqqlRE6spaUxqk9bQ/yzRRIwx0UajaKRp/1BTsBiw0JY2KjUICqXI0QAWaOH0lHLc7fqdu7eX6bB30DvqSz6Z3Ztl9s2b974zi/KCr4XpTGGargK04WuVBRi1YSzydRpaL1rftf3icxiDUWtA7+DvveTIRG9slgR2gQugHzzB4rBYnHgUDIK3gR3kgSOgA5TeaCfuAMfANyDXpL8K/Ag+AOmr7QQfsAn8Auqkvh7wCdCE8V4E52m5kuJ1IgG8SgO+TPeGTYJnQSV4DpSDTqHfTsv1O3gqmgNK8+GITtTRzN+lAQ2bBweAE3wKdPq9F1SDJ8GY8Pxt4Cuf998pj3t8y0ojYaz7MboW7SjYAN4E3giRWwfWiD9qAY15p2czPGOTLRdP9DSNd51Kj+QEn+17EdbdmCWfiXuZyDUJSan/PTXrGTvTz+bck0zXNJWW9fxk18mdl7q7wsur+hbZbrR/gFekdb8KXjJZb9FcESLHny+b6Hdn+n2L9bj+S8qXd7jTU90nghNWv+5ge694TMNrBY/Ti2QzEk+OHM+HbeABHsGC6hJfXtXdB2mMQ0IOscTU1LT0jRW8T1HY5y3BjpwshVVVWIYhqXmSbPshuU1gH0n0DrAf1+mGRC/6Ff3iyJzyp9tzHDnwWlFN4YCZbLt/OFthsSYftBc4kxNS7aWQbRXRUMLhd48HfSmi+n4D2ISE2wmeATNSZPSpcS8bHZpVfAsBfl/Lo9P3/a8fot2HSEwLz6bcen9FDSZ1FyZq0/TI1XGVSrAAfCGGjxLOJQlV5VDfTBkc6JSqhCfgyGDHuT2jp/t4tWwlzWgQJresWE3Q2m7yeLSA1GesOxeqnvvqcnvvffj2ahIlUSNsKWtvasgqcfJNrhk4YpXtk+2d/1h+7p1nCwvaIg8xRUOOEtv4UN5h6gvqSHZRzrSjLF9PTEleJ405t8SJzLToXuh4lXvMx9raPIm43U+qaWpltQXzJQ9u4MvpWJtxcwbPfKHbD94H+Uuc2Ixi2lSusDVWtmqG6piVfmoFxaRFM0ukFkXKnFD4nGwLv98DGqPNNkZ7ZEW7aGKoWBsoi59m/6OZJSbP4i/jOSnF7ASJh1c+KZWXWpnVqlzXoBArJSYn/P5g46SaNspPzc1JZLU1qczptBr7SVQ71/5bBZpT8SzHJMlzJSliKHsTFOZypQQnSSfrJct49rthx0/HB5vJgYrVOGP2kCPbJBU0TtbhF3W3jtpOt40YCb1V0oa4D7o6KaOLlFIs23u4mgYC+mdoh6i0U4T+4ZicUEP+20yemSellOVatVgUvnTrhWdnaBe+M8o7HRGdSAjpRLSQihuXbD7ADyj5kO1GKKbP5BmboEPXKuaCj2lJSWFnsqg6+FH/dTE5pXyRD8C7sYENh75BTWe/nRxYbzIxps4vsMwrc+xbbFTinxtlFnUL5oatfAu28uVy4CPJAS/ttsHziWpPZZfT7Owx7CGF9IkX/i4RDiN7pcSLphMqxGp7hG7+pfYx6dEBI9nF6hgAm2mzGRCPZeCtlZQgdIJH8AzNXLZOOrk/T3oUtUQjbbsOWp4lagidcECsjL5yqXuYvlmq6RtmxTohHkAa6V7Ml7BBrEyFStd0Hup6Ktej8XyVz1HdF1OEzEwWqmC5zk5cLqKy9a3W/ycGKFfkfDFbykLoRH1advqFlSpmwnXKPH9JO9hByXqL4OQunDFbQx88N/7fRUa+uPx+7RAlcDHEqjXWQ81/AgwAkCEAY/x495gAAAAASUVORK5CYII="},575:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJ0AAAAmCAYAAADeK5lgAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MDBFNTBBQTM1NUI1MTFFOEIzNDZFMTA3ODhBQUJBMjUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MDBFNTBBQTQ1NUI1MTFFOEIzNDZFMTA3ODhBQUJBMjUiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDowMEU1MEFBMTU1QjUxMUU4QjM0NkUxMDc4OEFBQkEyNSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDowMEU1MEFBMjU1QjUxMUU4QjM0NkUxMDc4OEFBQkEyNSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsG3Sl4AAAmdSURBVHja7Fx9bBTHFZ87G9ckhnKOsRIJjHNxwE7tQnqWSxFtIT5TR21UheSsJlHVKqnO6ocatUSxpTRSWxHVrtoolUpVW0pR8wdpfVFTqY2w4QgEDHYQJ4gMpQ7mik3BigNe3LolHPZt37t7cx6PZ2/3znaD8Tzpp929nd2Zm/nt+5rZdX0rFmImc7G46QbANrXvZpOMtinkyPuFsB2HbWz6ebEc3IPRloPqwHo/KClmWhaXuLO8Lg+wA3AecAbwqO5KLfNJui8D+gG/AKwAlAH+BDgIeFB3qZa5JN0DgL2AvwJKFee3AE4Afgso0l2rZTakQwLtArwHqJfO9QJ+D4gL92sEnCPzm6e7WEsmpMsFfJ8I9B065jIM+AZgE+CbgGrAIeH8CjK/fwcE0jXAteeNBLRo0tWTZvsVEYjLdcBLgLWA1wAm/X4SsBXwGGBIKH8voCM2/t+RscFL23V3a1GRjvtte2lflDcBFYAfAcYtNOPdgDvEH+OTcTb+obFybGg4dPFw765LR45pf0+TLmUOf23ht3Ethppq0EYz7hKCCPPfI8bY0Ltn2LXBYWbG424y0+eGjxx99oPuI7m6+xcp6WI32fOw/Qfgu5Lf9hHg2wp/TZRyC82I5X2XzwwWT8RuPgf7/5L8vVeQpCPdh+v1ECxC0v3lIHtxdExpLvMBXyViycIDBVkzoj/3JOAh1JDrtm6IlW35zC/pHrsFH5AtWbassKhmI55z6WFYZKQzxljBm/vMVW/3JLIeAxZm8xUiWi43kWJKJD5pmv8cuMpOvn2u/1T47HsiuVC8W6qH13yx5mmMdnPyP3HsrvVVkcL1G4rdeXkPyGW13P6SMqeDlxJjX0VkagYUCGWeBTwFuCJpPnPk0ji78L7hit2YxOM6JGnfgdPtsP0xaLoPhbJLV39hY23cdH86zlwFcedU4yXDdH872Q/wO7w3/s9Wxe+Y5umgfQNwH23t2mglYUJrJoOz+eLZILXFB/BI92rvXl1hQBnxkiZAC+3/XywItMHpf0m1TY5eP6KUyDrA61JnFkmEw8Twpvf7rviAcIckIqM2jPYfPPXChZ4+jGafYMmc3U6BzLeyiLlFD7PJNToQP3X4CYcD5ANg2Ta61qO6F5Zb0JpOksvkm+0aG4u/U7DcnSP5bagh/oCk3FxfiitItvZ0RR+HY/TRSqhcwdLld+4srij9HqVSPg5ptjkfUfymIhketzuoL6Ko00MayEdoSqfxgEhe0taiZmsnTcvbhuDlMNCL3g6k43I0fOg/OSWr81h5xdKbuXk5qAV/zpJJ4mlSs63sjeP7Bt6C3R9ix6+qWnP9ziJPERDy7vj0otfY9ITzfEprFtcEJdK2kHbxOhhcg0iiMq+jAoHTtatNIFwjmC+Z7CHBVHFCNy6oQKK40MahAgM7OBRjXV1jS+DwJyrCcfHVrbu+wV+BxCxZvvKTKyW/YgLwG8D9C8S0hggqk5upiGT0pdFyfsEfbVcQjvtRrcIDEHTYBi8R+jy5TSZpStX1TUIZKx/WpHJi+z2ANsB5gAkYpWPvNNI98hBjn692sTvy527UqmorZae7E7CeJXOBV25hwvkEUoRpYCMZDu5c+ZJ25ryBAqs6yeez8ilP0H/wSr+3CUFT1kLEkuvw0PEJ8WFzu0AXrb2Xse31CbftBYwy56EzHwb87WMgkd8G6QY9JG29GUTFKi3jT+NHMkkLGqDNIjZRYwTAI1nDpu4OIkCESIoWqFDwPwNC1JuttAlkw/sWQvtcVF9U7NuUT7cE9uJmIrpEZuIsxR9vg5TQfpvzLgt/LiQMZEgYkICFzyYGDX7FoDcpyJyOdJE57IOgoAkbBLNskG/po//FAxwjSy0nugWtwsMRhvN1ZNY9qpQJo+gTI9PFthI4KEWMXEQTG7AxZT4iughRA0SyDG5mq+052aM2wZZ/lnUo3QLMJ4oPW4p0lKwVp8O2oC2ufjCf5ednlmfsO3D6VpnactnAquNkbRSaZc6Op1KqbcpFBe04l35qOu0ZkbRyNuIRzb7Nf5si3cREYoPr5PYIUYu7dM0SVle7jK1dm4g0bMONU+GzG2FzbIFpOa9EplEhQjMlfyddQBG2IHe1Qw3HNaxXjvgUJq0FI0Rqn3chdbZsXnFFME534Yrg3pTjl+ti5eWJ+KKPJd/8mmGWj+8bKIns799DhNu4wEgXyFBzzNcgRzJoU0DQIFEH9/TZaELGsk8yR4WHwbYeq5XDvUQ8nJUQVwLzN79SxOruvFDQ0xXFAASnuZ5gC3PVSFBwrq1McaNDbZe1UF6Ok6SF5l6VWk4gvl1qJSyQ1GuRk2MKX9bK5AZsHpagRaAxM3pVCKptnH/9M0WzTUI65bOAo5OTJp7HZUz3SNcOEEHn2gQ2pTlvKAagyeaeBnWY10FkGaKggHd88zw9AI1sahqsjTQHT4vwwRPTL3akaxeCpA5qd1jIoQWEgMJQkK+F2mRQvU2KhyUK7eT1BGE/yqYWJPjldEzuVMIusSlgM5ei4wwEzkTspou/Rk++OyfH9ZRUFhO/P2PJVcg3LDqhZBaka7F5ouUBaHGgBXzpIi8FqYPC4IfmQdtFKMXQQfUELTQrz7nZpTiilCrpEKJr1QPVLN07TCQLSNrNKmXUzKaS6y2kqeW+9k8zr7lJ+qUzkXyB5ibFuRhLTvbfv8Ff8XJVbWVMUQYJzc3wrejPRR3kx8JzkF5wRDzAfaRhxJwhTz3gnGw1pSKcSJiCmXbJbwtTHQ2KaxosyjdYtNmgh6BZusagOlJ95/r6eGgyL8/llr5l0gv4wSRLbFXfMjH5/jt7L+ILO8/XbCsbkL5lYgrfMnkGtjvhXvdI3zIZGuk+vCZhy598nGlZHOK+foMVj15jb5nmtMldnvbYY2cON9eXbv/cl7wDNvW8Kvl9aMLxrbJyPQSLkHQrlrGrhSvYV1wuVsmSn4xIaUE2tfjyReZwTvZU+Ky778Dppy1O4yqn31E+8CWWZsWKltuYdMI+Tsg/wmZOziPZfuokJRLZ348a8l3SbLIcIr/iGcoHatGkS4nVMqQSMrczZht6uqIlx/cN8HPVivQJvjOL786e1F2uxSo5LC64fJmORX9vKmrpvKBMDJtxE00nvvP6KZb8OoAWLWlJxwWXlu8gzddpUUZeg5dInxiXr1ZRGiWmu1lLJqQT/b2Hmf1iTCRmZVVt5XOFq4rO6+7VopJMvyeCpMIkX5CCi7sEUu7w1a3rTObmdMdqmb2mU/l75RMT8d0UcKyv2VbWqbtTixP5nwADAGk1WAV0isMKAAAAAElFTkSuQmCC"},576:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userLogin=t.userLogout=void 0;var n,l=a(75),r=(n=l)&&n.__esModule?n:{default:n};t.userLogout=function(e){return(0,r.default)({url:"/logout",method:"get",data:e})},t.userLogin=function(e){return(0,r.default)({url:"/login",method:"post",data:e})}},578:function(e,t,a){},579:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(12)),l=h(a(4)),r=h(a(6)),s=h(a(3)),o=h(a(5)),u=h(a(27)),i=h(a(57));a(29),a(56);var c=a(1),d=h(c),m=a(11),f=h(a(66)),p=h(a(69));function h(e){return e&&e.__esModule?e:{default:e}}a(578);i.default.TabPane,u.default.Option;var v=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={keyword:"",filterValues:{},headerFilterKeywords:""},a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.props.currentCluster?m.actions.summary.getServicesStatusInfo():m.actions.app.getClusterList().then(function(e){e&&e.length>0&&m.actions.summary.getServicesStatusInfo()})}},{key:"clusterChange",value:function(){console.log(123)}},{key:"render",value:function(){var e=this.props,t=(e.status,e.clusterList),a=(e.servicesList,e.servicesStatusLoading,e.servicesStatusInfo);return t&&0!=t.length?d.default.createElement("div",null,d.default.createElement(p.default,{selectChange:this.clusterChange}),d.default.createElement("div",{className:"toolsWrap"},d.default.createElement("div",{className:"title"},"开发工具"),d.default.createElement("div",{className:"content"},a.LEAPSQL&&a.LEAPSQL.status&&d.default.createElement("a",{className:"item",href:"http://sql."+a.LEAPSQL.host+":8080",target:"_blank"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconSql"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"LEAP SQL"),d.default.createElement("div",{className:"des"},"LEAP SQL是一个数据查询工具")))),a.LEAPSQL&&!a.LEAPSQL.status&&d.default.createElement("div",{className:"item disable"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconSql"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"LEAP SQL"),d.default.createElement("div",{className:"des"},"LEAP SQL是一个数据查询工具")))),a.LEAPDATAHUB&&a.LEAPDATAHUB.status&&d.default.createElement("a",{className:"item",href:"http://datahub."+a.LEAPDATAHUB.host+":8080",target:"_blank"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconDatahub"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"LEAP Datahub"),d.default.createElement("div",{className:"des"},"Load data from RS DB to hadoop cluster")))),a.LEAPDATAHUB&&!a.LEAPDATAHUB.status&&d.default.createElement("div",{className:"item disable"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconDatahub"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"LEAP Datahub"),d.default.createElement("div",{className:"des"},"Load data from RS DB to hadoop cluster")))),a.LEAPID&&a.LEAPID.status&&d.default.createElement("a",{className:"item",href:"http://id."+a.LEAPID.host+":8080/leapid-admin/view/login.html",target:"_blank"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconId"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"LEAP ID"),d.default.createElement("div",{className:"des"},"Leap系统的帐号中心，管理leap生态的帐号信息以及统一的登录入口")))),a.LEAPID&&!a.LEAPID.status&&d.default.createElement("div",{className:"item disable"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconId"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"LEAP ID"),d.default.createElement("div",{className:"des"},"Leap系统的帐号中心，管理leap生态的帐号信息以及统一的登录入口")))),a.LEAPPROCESS&&a.LEAPPROCESS.status&&d.default.createElement("a",{className:"item",href:"http://ts."+a.LEAPPROCESS.host+":8080/TaskSchedule",target:"_blank"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconTask"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"Task Scheduler"),d.default.createElement("div",{className:"des"},"Task Scheduler是一个大数据处理流程建立的工具")))),a.LEAPPROCESS&&!a.LEAPPROCESS.status&&d.default.createElement("div",{className:"item disable"},d.default.createElement("div",{className:"con"},d.default.createElement("i",{className:"icon iconTask"}),d.default.createElement("div",{className:"info"},d.default.createElement("div",{className:"tit"},"Task Scheduler"),d.default.createElement("div",{className:"des"},"Task Scheduler是一个大数据处理流程建立的工具"))))))):d.default.createElement(f.default,null)}}]),t}(c.Component),E=(0,m.connect)(function(e){return{status:e.components.status,componentsListData:e.components.componentsListData,servicesList:e.components.servicesList,currentCluster:e.app.currentCluster,hostList:e.app.hostList,hostComponentsList:e.app.hostComponentsList,clusterList:e.app.clusterList,servicesStatusLoading:e.summary.servicesStatusLoading,servicesStatusInfo:e.summary.servicesStatusInfo}})(v);t.default=E},581:function(e,t,a){},582:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(165)),l=m(a(12)),r=m(a(4)),s=m(a(6)),o=m(a(3)),u=m(a(5));m(a(14)),m(a(84));a(164),a(22),a(83);var i=a(1),c=m(i),d=a(11);function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={bbb:123},a.currentClusterName=null,a}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.currentCluster&&e.currentCluster.clusterName!=this.currentClusterName&&(this.currentClusterName=e.currentCluster.clusterName,this.componentWillMount())}},{key:"componentWillMount",value:function(){d.actions.security.getLicenseData()}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.licenseData;return c.default.createElement("div",null,c.default.createElement("div",{className:"topTitle"},"许可证"),c.default.createElement(n.default,{loading:t,type:"inner",title:"概览"},c.default.createElement("ul",{className:"licenseDetail"},c.default.createElement("li",null,c.default.createElement("label",null,"授权给:"),a.company_name),c.default.createElement("li",null,c.default.createElement("label",null,"Server密钥:"),a.server_key),c.default.createElement("li",null,c.default.createElement("label",null,"允许安装主机的最大数量:"),a.max_host_count),c.default.createElement("li",null,c.default.createElement("label",null,"已使用主机的数量:"),a.working_hostcount),c.default.createElement("li",null,c.default.createElement("label",null,"允许安装CPU的最大数量:"),a.max_cpu_count),c.default.createElement("li",null,c.default.createElement("label",null,"已使用CPU的数量:"),a.work_cpucount),c.default.createElement("li",null,c.default.createElement("label",null,"截止日期:"),a.deadline))))}}]),t}(i.Component),p=(0,d.connect)(function(e){return{status:e.security.status,licenseData:e.security.licenseData}})(f);t.default=p},583:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(84)),l=m(a(12)),r=m(a(4)),s=m(a(6)),o=m(a(3)),u=m(a(5));a(83);var i=a(1),c=m(i),d=a(11);m(a(328));function m(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.showVersionDetail=function(){a.setState({showVersionModal:!0})},a.hideVersionModal=function(){a.setState({showVersionModal:!1})},a.getColumns=function(){return[{title:"",dataIndex:"name",key:"name",width:150},{title:c.default.createElement("div",null,a.props.version,"  ",c.default.createElement("span",{style:{color:"#999"}},"当前")),dataIndex:"versions",key:"versions",render:function(e,t,a){return c.default.createElement(n.default,{color:"#1ACB40"},e)}}]},a.state={showVersionModal:!1,versionModalInfo:123},a}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){d.actions.components.getHostInfo()}},{key:"render",value:function(){this.props.componentsListData;var e=this.state;e.showVersionModal,e.versionModalInfo;return c.default.createElement("div",null,"kerberos")}}]),t}(i.Component),p=(0,d.connect)(function(e){return{version:e.components.version,status:e.components.status,componentsListData:e.components.componentsListData}})(f);t.default=p},584:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(39)),l=m(a(12)),r=m(a(4)),s=m(a(6)),o=m(a(3)),u=m(a(5));a(38);var i=a(1),c=m(i),d=a(11);function m(e){return e&&e.__esModule?e:{default:e}}var f=[{title:"名称",dataIndex:"property_display_name",key:"property_display_name"},{title:"值",dataIndex:"property_value",key:"property_value"}],p=function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.state={bbb:123},a.currentClusterName=null,a}return(0,u.default)(t,e),(0,s.default)(t,[{key:"componentWillReceiveProps",value:function(e){e.currentCluster&&e.currentCluster.clusterName!=this.currentClusterName&&(this.currentClusterName=e.currentCluster.clusterName,this.componentWillMount())}},{key:"componentWillMount",value:function(){this.props.currentCluster?d.actions.security.getServiceAccount():d.actions.app.getClusterList().then(function(e){e&&e.length>0&&d.actions.security.getServiceAccount()})}},{key:"refreshData",value:function(){d.actions.security.getServiceAccount()}},{key:"render",value:function(){var e=this.props,t=e.status,a=e.serviceAccount;return c.default.createElement("div",null,c.default.createElement("div",{className:"topTitle"},"服务用户和组"),c.default.createElement(n.default,{loading:t,style:{width:"50%"},bordered:!0,dataSource:a,columns:f,pagination:!1}))}}]),t}(i.Component),h=(0,d.connect)(function(e){return{status:e.security.status,serviceAccount:e.security.serviceAccount,currentCluster:e.app.currentCluster}})(p);t.default=h},585:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(12)),l=g(a(4)),r=g(a(6)),s=g(a(3)),o=g(a(5)),u=g(a(27)),i=g(a(57));a(29),a(56);var c=a(1),d=g(c),m=g(a(584)),f=g(a(583)),p=g(a(582));a(581);var h=a(11),v=g(a(66)),E=g(a(69));function g(e){return e&&e.__esModule?e:{default:e}}var y=i.default.TabPane,_=(u.default.Option,function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.toggleSearchInput=function(e){var t=a.state.searchInputWidth||0;a.setState({searchInputWidth:200-t})},a.state={activeKey:"1",keyword:"",searchInputWidth:0},a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"componentWillMount",value:function(){this.props.currentCluster||h.actions.app.getClusterList()}},{key:"tabChange",value:function(e){console.log(e),this.setState({activeKey:e})}},{key:"render",value:function(){var e=this.props,t=(e.keyword,e.clusterList);return t&&0!=t.length?d.default.createElement("div",{className:"securityWrap"},d.default.createElement(E.default,null),d.default.createElement(i.default,{className:"tabContent",activeKey:this.state.activeKey,onChange:this.tabChange.bind(this),type:"card"},d.default.createElement(y,{tab:"Service账号",key:"1"},d.default.createElement(m.default,null)),d.default.createElement(y,{tab:"Kerberos",key:"2"},d.default.createElement(f.default,null)),d.default.createElement(y,{tab:"许可证管理",key:"3"},d.default.createElement(p.default,null)))):d.default.createElement(v.default,null)}}]),t}(c.Component)),S=(0,h.connect)(function(e){return{clusterList:e.app.clusterList,currentCluster:e.app.currentCluster}})(_);t.default=S},587:function(e,t,a){},588:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=_(a(39)),l=_(a(14)),r=_(a(40)),s=_(a(18)),o=_(a(84)),u=_(a(12)),i=_(a(4)),c=_(a(6)),d=_(a(3)),m=_(a(5)),f=_(a(27)),p=_(a(57));a(38),a(22),a(34),a(83),a(29),a(56);var h=a(1),v=_(h),E=a(11),g=_(a(66)),y=_(a(69));function _(e){return e&&e.__esModule?e:{default:e}}a(587);p.default.TabPane;var S=f.default.Option,N=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.changeStatus=function(e){return function(){E.actions.alerts.changeAlertStatus({id:e.definition_id,status:"OFF"!=e.maintenance_state})}},a.formatStatus=function(e){return v.default.createElement("div",null,e.indexOf("OK")>-1?v.default.createElement(o.default,{color:"#1ACB40"},"OK (",e.filter(function(e,t,a){return"OK"==e}).length,")"):"",e.indexOf("CRITICAL")>-1?v.default.createElement(o.default,{color:"#FF5858"},"CRIT (",e.filter(function(e,t,a){return"CRITICAL"==e}).length,")"):"")},a.headerFilterKeywordsChange=function(e){a.setState({headerFilterKeywords:e.target.value})},a.headerFilterKeywordsSubmit=function(e){13!=e.keyCode&&13!=e.witch||alert(a.state.headerFilterKeywords)},a.headerFilterStateChange=function(e){},a.filterValueChange=function(e,t){var n="object"==(void 0===t?"undefined":(0,s.default)(t))?t.target.value:t,l=a.state.filterValues;"all"!==n?l[e]=n:delete l[e],E.actions.alerts.filterAlertsList(l),a.setState({filterValues:l})},a.formatTimeAgo=function(e){return((new Date).getTime()-e)/864e5>1?parseInt(((new Date).getTime()-e)/864e5)+" days ago":((new Date).getTime()-e)/36e5>1?parseInt(((new Date).getTime()-e)/36e5)+" hours ago":((new Date).getTime()-e)/6e4>1?parseInt(((new Date).getTime()-e)/6e4)+" minutes ago":((new Date).getTime()-e)/1e3>1?parseInt(((new Date).getTime()-e)/1e3)+" seconds ago":void 0},a.getColumns=function(e,t){return[{title:v.default.createElement("div",{className:"tableHeaderFilter"},v.default.createElement("div",{className:"item"},"告警定义名称"),v.default.createElement("div",{className:"item"},v.default.createElement(r.default,{placeholder:"关键字搜索",style:{width:"200px"},value:e.label||"",onChange:a.filterValueChange.bind(a,"label")}))),dataIndex:"label",key:"label"},{title:v.default.createElement("div",{className:"tableHeaderFilter"},v.default.createElement("div",{className:"item"},"状态"),v.default.createElement("div",{className:"item"},v.default.createElement(f.default,{defaultValue:"all",value:e.states||"all",style:{width:120},onChange:a.filterValueChange.bind(a,"states")},v.default.createElement(S,{value:"all"},"全部"),v.default.createElement(S,{value:"OK"},"OK"),v.default.createElement(S,{value:"WARNING"},"WARNING"),v.default.createElement(S,{value:"CRITICAL"},"CRITICAL"),v.default.createElement(S,{value:"UNKNOWN"},"UNKNOWN"),v.default.createElement(S,{value:"NONE"},"NONE")))),dataIndex:"states",key:"states",render:function(e,t,n){return v.default.createElement("div",null,a.formatStatus(e))}},{title:v.default.createElement("div",{className:"tableHeaderFilter"},v.default.createElement("div",{className:"item"},"服务"),v.default.createElement("div",{className:"item"},v.default.createElement(f.default,{defaultValue:"all",value:e.service_name||"all",style:{width:120},onChange:a.filterValueChange.bind(a,"service_name")},v.default.createElement(S,{value:"all"},"全部"),t.map(function(e){return v.default.createElement(S,{key:e,value:e},e)})))),dataIndex:"service_name",key:"service_name"},{title:v.default.createElement("div",{className:"tableHeaderFilter"},v.default.createElement("div",{className:"item"},"状态改变时间"),v.default.createElement("div",{className:"item"},v.default.createElement(f.default,{defaultValue:"all",value:e.latest_timestamp||"all",style:{width:120},onChange:a.filterValueChange.bind(a,"latest_timestamp")},v.default.createElement(S,{value:"all"},"全部"),v.default.createElement(S,{value:"3600000"},"Past one hour"),v.default.createElement(S,{value:"86400000"},"Past one day"),v.default.createElement(S,{value:"172800000"},"Past 2 day"),v.default.createElement(S,{value:"604800000"},"Past 7 day"),v.default.createElement(S,{value:"1209600000"},"Past 14 day"),v.default.createElement(S,{value:"2592000000"},"Past 30 day")))),dataIndex:"latest_timestamp",key:"latest_timestamp",render:function(e,t,n){return v.default.createElement("div",null,a.formatTimeAgo(e))}},{title:v.default.createElement("div",{className:"tableHeaderFilter"},v.default.createElement("div",{className:"item"},"开启状态"),v.default.createElement("div",{className:"item"},v.default.createElement(f.default,{defaultValue:"all",value:e.status||"all",style:{width:120},onChange:a.filterValueChange.bind(a,"status")},v.default.createElement(S,{value:"all"},"全部"),v.default.createElement(S,{value:"yes"},"启用"),v.default.createElement(S,{value:"no"},"禁用")))),dataIndex:"status",key:"status",render:function(e,t,n){return"OFF"==!t.maintenance_state?v.default.createElement("a",{href:"javascript:;",style:{color:"#1ACB40"},onClick:a.changeStatus(t)},v.default.createElement(l.default,{type:"poweroff"})," 启用"):v.default.createElement("a",{href:"javascript:;",style:{color:"#FF5858"},onClick:a.changeStatus(t)},v.default.createElement(l.default,{type:"poweroff"})," 停用")}}]},a.clusterChange=function(e){E.actions.alerts.getAlertsList()},a.state={keyword:"",filterValues:{},headerFilterKeywords:""},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){this.props.currentCluster?E.actions.alerts.getAlertsList():E.actions.app.getClusterList().then(function(e){e&&e.length>0&&E.actions.alerts.getAlertsList()})}},{key:"render",value:function(){var e=this.state.filterValues,t=this.props,a=t.status,l=t.alertsList,r=t.clusterList,s=[];return l.forEach(function(e){-1==s.indexOf(e.service_name)&&s.push(e.service_name)}),r&&0!=r.length?v.default.createElement("div",{className:"alertsWrap"},v.default.createElement(y.default,{selectChange:this.clusterChange}),v.default.createElement("div",{className:"tabContent"},v.default.createElement(n.default,{loading:a,bordered:!0,dataSource:l,columns:this.getColumns(e,s)}))):v.default.createElement(g.default,null)}}]),t}(h.Component),C=(0,E.connect)(function(e){return{status:e.alerts.status,alertsList:e.alerts.alertsList,currentCluster:e.app.currentCluster,clusterList:e.app.clusterList}})(N);t.default=C},589:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(37)),l=C(a(50)),r=C(a(39)),s=C(a(17)),o=C(a(114)),u=C(a(168)),i=C(a(44)),c=C(a(14)),d=C(a(26)),m=C(a(25)),f=C(a(12)),p=C(a(4)),h=C(a(6)),v=C(a(3)),E=C(a(5));a(36),a(49),a(38),a(20),a(167),a(48),a(22);var g=a(1),y=C(g),_=a(11),S=C(a(23)),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(132));function C(e){return e&&e.__esModule?e:{default:e}}var b=function(e){function t(e){var a=this;(0,p.default)(this,t);var n,l,r,s=(0,v.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return s.getTaskLists=(n=(0,m.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.actions.host.getOperateProgress({cluster_name:t});case 2:s.timer=setTimeout(function(){s.getTaskLists(t)},3e3);case 3:case"end":return e.stop()}},e,a)})),function(e){return n.apply(this,arguments)}),s.getTaskLogs=(l=(0,m.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({loading:!0}),e.next=3,N.getTaskLogs(t).then(function(e){console.log(e),1==e.code&&s.setState({curTaskLogs:e.data.Tasks,loading:!1,curStep:4})});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,a)})),function(e){return l.apply(this,arguments)}),s.getTaskSummary=(r=(0,m.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s.setState({loading:!0}),e.next=3,N.getTaskSummary(t).then(function(e){if(1==e.code){var t=e.data.tasks,a={};t&&t.map(function(e){var t=e.Tasks;if(a[t.host_name]){var n=a[t.host_name].components,l=a[t.host_name].status;a[t.host_name].count;n.push(t),l.push(t.status),a[t.host_name]={components:n,status:l,host:t.host_name,request_id:t.id,create_time:t.create_time}}else a[t.host_name]={components:[t],status:[t.status],host:t.host_name,request_id:t.id,create_time:t.create_time}}),s.setState({taskInfo:a,curStep:2,loading:!1})}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,a)})),function(e){return r.apply(this,arguments)}),s.tableRowClick=function(e,t){var a=s.state.curStep;if(1==a){var n=e.Requests.id;s.request_id=n,s.title=e.Requests.request_context,s.getTaskSummary({request_id:n,cluster_name:s.cluster_name})}else 2==a?s.setState({curStep:3,currentHost:e.host}):3==a&&(s.title=e.host_name,s.modalTitle=e.command_detail,s.getTaskLogs({request_id:e.request_id,cluster_name:s.cluster_name,task_id:e.id}))},s.modalStepBack=function(){var e=s.state.curStep;s.setState({curStep:e>1?e-1:e})},s.closeModal=function(){clearTimeout(s.timer),s.timer=null,_.actions.host.updateState({taskModalVisible:!1})},s.column1=function(){return[{title:"操作",dataIndex:"Requests.request_context",render:function(e,t,a){var n="loading",l="LOADING",r="in_progress";if("COMPLETED"==t.Requests.request_status&&(n="check",l="COMPLETED",r="success"),"FAILED"==t.Requests.request_status&&(n="close",l="FAILED",r="failed"),"ABORTED"==t.Requests.request_status&&(n="minus",l="ABORTED",r="aborted"),e.includes("_PARSE_")){var s=e.includes("START")?"启动 ":"停止 ",o=e.split(".");e=s+("ALL_SERVICES"==o[2]?"全部服务":o[2])}return y.default.createElement("label",{className:"clearfix"},y.default.createElement(i.default,{placement:"top",title:r},y.default.createElement(c.default,{type:n,className:"statusIcon fl "+l,style:{width:30}})),y.default.createElement("span",{style:{width:"calc(100% - 30px)",float:"left"}},"_PARSE_.START.ALL_SERVICES"==e?"启动全部服务":e||"请求的名称没有指定"))}},{title:"启动时间",dataIndex:"Requests.start_time",width:130,render:function(e){return y.default.createElement("label",null,(0,S.default)(e).format("YYYY/MM/DD hh:mm"))}},{title:"时长",key:"Requests.id",width:100,render:function(e){var t=e.Requests.end_time;-1==t&&(t=(new Date).getTime());var a=((t-e.Requests.start_time)/1e3).toFixed(2);return y.default.createElement("label",null,a,y.default.createElement("i",{className:"smallFont"},"secs"))}},{title:"进度",key:"href",width:180,render:function(e){var t=e.Requests.request_status,a="exception";return"FAILED"!=t&&"ABORTED"!=t&&(a="COMPLETED"==t?"success":"active"),y.default.createElement(u.default,{percent:Math.floor(e.Requests.progress_percent),size:"small",status:a})}}]},s.column2=function(){return[{title:"",key:"request_id",width:30,render:function(e,t){var a=t.status,n="loading",l="in_progress",r="LAODING";return a.includes("FAILED")?(n="close",l="failed",r="FAILED"):a.includes("ABORTED")?(n="minus",l="aborted",r="ABORTED"):a.join(",").match(/COMPLETED/g)&&a.join(",").match(/COMPLETED/g).length==a.length&&(n="check",l="success",r="COMPLETED"),y.default.createElement("label",null,y.default.createElement(i.default,{placement:"top",title:l},y.default.createElement(c.default,{type:n,className:"statusIcon "+r})))}},{title:"主机",dataIndex:"host"},{title:"进度",key:"create_time",width:180,render:function(e){var t=e.status,a=t.join(",").match(/COMPLETED/g)&&(t.join(",").match(/COMPLETED/g).length/t.length).toFixed(2),n="exception";return t.includes("FAILED")||t.includes("ABORTED")?(n="exception",a=100):(n=t.join(",").match(/COMPLETED/g)&&t.join(",").match(/COMPLETED/g).length==t.length?"success":"active",a=t.join(",").match(/COMPLETED/g)&&t.join(",").match(/COMPLETED/g).length==t.length?100:a),y.default.createElement(u.default,{percent:+a,size:"small",status:n})}}]},s.column3=function(){return[{title:"",key:"status",width:30,render:function(e,t,a){var n=t.status,l="loading";return"FAILED"==n?l="close":"COMPLETED"==n?l="check":"ABORTED"==n?l="minus":"PENDING"!=n&&"QUEUED"!=n||(l="setting"),y.default.createElement("label",null,y.default.createElement(i.default,{placement:"top",title:n.toLowerCase()},y.default.createElement(c.default,{type:l,className:"statusIcon "+n})))}},{title:"任务",dataIndex:"command_detail"}]},s.state={page_size:10,modalVisible:!0,curStep:1},s.currentCluster={},s}return(0,E.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.cluster_name=this.props.currentCluster.clusterName,this.getTaskLists(this.props.currentCluster.clusterName)}},{key:"render",value:function(){var e=this,t=this.state,a=t.curStep,u=t.taskInfo,i=t.currentHost,c=t.curTaskLogs,d=t.loading,m=this.props,f=m.taskLists,p=m.taskModalVisible,h=void 0,v=void 0,E=this.title;return 1==a?(h=f,v=this.column1(),E="操作进度"):2==a?(h=(0,o.default)(u),v=this.column2()):3==a&&(h=u&&u[i].components,v=this.column3(),E=u&&u[i].host),y.default.createElement(n.default,{title:y.default.createElement("div",null,1!=a&&y.default.createElement(s.default,{icon:"left",onClick:this.modalStepBack},"返回"),E),visible:p,onOk:this.closeModal,onCancel:this.closeModal,wrapClassName:"taskProgressModal "+(4==a?"paddingTopNone":""),okText:"确认",cancelText:"取消",maskClosable:!1,width:800,bodyStyle:{maxHeight:"500px",overflow:"auto"},footer:y.default.createElement(s.default,{type:"primary",onClick:this.closeModal},"确定")},4==a&&y.default.createElement("p",{className:"modalHeader"},this.modalTitle),4!=a?y.default.createElement(r.default,{columns:v,dataSource:h,pagination:!1,loading:!h||d,rowKey:function(e){return e.href||e.host||e.id},onRow:function(t){return{onClick:e.tableRowClick.bind(e,t)}}}):y.default.createElement(l.default,{spinning:d,wrapperClassName:"taskProgressModalLogs"},y.default.createElement("section",null,y.default.createElement("p",null,y.default.createElement("label",null,"stderr: "),c&&c.error_log),y.default.createElement("code",null,c&&c.stderr)),y.default.createElement("section",null,y.default.createElement("p",null,y.default.createElement("label",null,"stdout: "),c&&c.output_log),y.default.createElement("code",null,c&&c.stdout))))}}]),t}(g.Component),M=(0,_.connect)(function(e){return{taskLists:e.host.taskLists,currentCluster:e.app.currentCluster,taskModalVisible:e.host.taskModalVisible}})(b);t.default=M},591:function(e,t,a){},592:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(39)),l=E(a(50)),r=E(a(26)),s=E(a(25)),o=E(a(18)),u=E(a(12)),i=E(a(4)),c=E(a(6)),d=E(a(3)),m=E(a(5)),f=E(a(27));a(38),a(49),a(29);var p=a(1),h=E(p),v=a(11);E(a(23));function E(e){return e&&e.__esModule?e:{default:e}}a(591);var g=f.default.Option,y=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.filterValueChange=function(e,t){var n="object"==(void 0===t?"undefined":(0,o.default)(t))?t.target.value:t,l=a.state.filterValues;"all"!==n?l[e]=n:delete l[e],v.actions.host.filterAlertsList(l),a.setState({filterValues:l})},a.columns=function(){var e=a.state.filterValues;return[{title:h.default.createElement("span",{className:"tableHeaderOperate"},"服务:",h.default.createElement(f.default,{allowClear:!0,value:e.service_name||"all",onChange:a.filterValueChange.bind(a,"service_name")},h.default.createElement(g,{value:"all"},"全部"))),dataIndex:"HostRoles.service_name"},{title:h.default.createElement("span",{className:"tableHeaderOperate"},"组件:",h.default.createElement(f.default,{allowClear:!0,value:e.display_name||"all",onChange:a.filterValueChange.bind(a,"display_name")},h.default.createElement(g,{value:"all"},"全部"))),dataIndex:"HostRoles.display_name"},{title:h.default.createElement("span",{className:"tableHeaderOperate"},"扩展:",h.default.createElement(f.default,{allowClear:!0,value:e.state||"all",onChange:a.filterValueChange.bind(a,"state")},h.default.createElement(g,{value:"all"},"全部"))),dataIndex:"logging",render:function(e){return h.default.createElement("div",null,h.default.createElement("a",{href:"#",style:{marginRight:5}},e.logs[0].name),h.default.createElement("a",{href:"#",title:e.logFileTailURL},"在搜索日志中打开"))}}]},a.state={filterValues:{}},a.stateToCN={CURRENT:"当前的"},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.actions.host.getVersions();case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.host_components,t=[];return e&&e.map(function(e){e.logging&&t.push(e)}),t?h.default.createElement("div",{className:"hostAlerts"},h.default.createElement(n.default,{dataSource:t,columns:this.columns(),rowKey:function(e){return e.href}})):h.default.createElement(l.default,{style:{width:"100%",height:"100%"}})}}]),t}(p.Component);t.default=(0,v.connect)(function(e){return{host_components:e.host.summaryInfo&&e.host.summaryInfo.host_components}})(y)},594:function(e,t,a){},595:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(39)),l=y(a(50)),r=y(a(26)),s=y(a(25)),o=y(a(17)),u=y(a(18)),i=y(a(2)),c=y(a(12)),d=y(a(4)),m=y(a(6)),f=y(a(3)),p=y(a(5)),h=y(a(27));a(38),a(49),a(20),a(29);var v=a(1),E=y(v),g=a(11);y(a(23));function y(e){return e&&e.__esModule?e:{default:e}}a(594);var _=h.default.Option,S=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.formatVersionData=function(e){return e.map(function(e){return(0,i.default)({},e.HostStackVersions,e.repository_versions[0].RepositoryVersions)})},a.filterValueChange=function(e,t){var n="object"==(void 0===t?"undefined":(0,u.default)(t))?t.target.value:t,l=a.state.filterValues;"all"!==n?l[e]=n:delete l[e],g.actions.host.filterAlertsList({filterValues:l,type:"version"}),a.setState({filterValues:l})},a.columns=function(){var e=a.props.versionFilter,t=a.state.filterValues;return[{title:E.default.createElement("span",{className:"tableHeaderOperate"},"服务:",E.default.createElement(h.default,{allowClear:!0,value:t.stack_name||"all",onChange:a.filterValueChange.bind(a,"stack_name")},E.default.createElement(_,{value:"all"},"全部"),e&&e.server.map(function(e){return E.default.createElement(_,{value:e,key:e},e)}))),dataIndex:"stack_name"},{title:E.default.createElement("span",{className:"tableHeaderOperate"},"名称:",E.default.createElement(h.default,{allowClear:!0,value:t.display_name||"all",onChange:a.filterValueChange.bind(a,"display_name")},E.default.createElement(_,{value:"all"},"全部"),e&&e.display_name.map(function(e){return E.default.createElement(_,{value:e,key:e},e)}))),dataIndex:"display_name"},{title:E.default.createElement("span",{className:"tableHeaderOperate"},"状态:",E.default.createElement(h.default,{allowClear:!0,value:t.state||"all",onChange:a.filterValueChange.bind(a,"state")},E.default.createElement(_,{value:"all"},"全部"),e&&e.state.map(function(e){return E.default.createElement(_,{value:e,key:e},e)}))),dataIndex:"state",render:function(e){return E.default.createElement("span",{className:"statusBtn "+e},e)}},{title:"",dataIndex:"host_name",render:function(e){return E.default.createElement(o.default,{disabled:"CURRENT"==e.state},"安装")}}]},a.state={filterValues:{}},a.stateToCN={CURRENT:"当前的"},a}return(0,p.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t,a,n,l;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.state.summaryInfo)||!t.stack_versions){e.next=6;break}a=this.formatVersionData(t.stack_versions),g.actions.host.getVersions(a),e.next=11;break;case 6:return n=this.props.match.path.split("/")[2],e.next=9,g.actions.host.getHostSummary({host_name:n});case 9:(t=e.sent)&&t.stack_versions?(l=this.formatVersionData(t.stack_versions),g.actions.host.getVersions(l)):g.actions.host.getVersions([]);case 11:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.versions;e.summaryInfo;return t?E.default.createElement("div",{className:"hostAlerts hostVersions"},E.default.createElement(n.default,{dataSource:t,columns:this.columns(),rowKey:function(e){return e.href}})):E.default.createElement(l.default,{style:{width:"100%",height:"100%"}})}}]),t}(v.Component);t.default=(0,g.connect)(function(e){return{versions:e.host.versions,summaryInfo:e.host.summaryInfo,versionFilter:e.host.versionFilter}})(S)},597:function(e,t,a){},598:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Alerts=void 0;var n=_(a(39)),l=_(a(50)),r=_(a(26)),s=_(a(25)),o=_(a(44)),u=_(a(40)),i=_(a(18)),c=_(a(12)),d=_(a(4)),m=_(a(6)),f=_(a(3)),p=_(a(5)),h=_(a(27));a(38),a(49),a(48),a(34),a(29);var v=a(1),E=_(v),g=a(11),y=_(a(23));function _(e){return e&&e.__esModule?e:{default:e}}a(597);var S=h.default.Option,N=function(e){function t(e){(0,d.default)(this,t);var a=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return a.filterValueChange=function(e,t){var n="object"==(void 0===t?"undefined":(0,i.default)(t))?t.target.value:t,l=a.state.filterValues;"all"!==n?l[e]=n:delete l[e],g.actions.host.filterAlertsList(l),a.setState({filterValues:l})},a.columns=function(){var e=a.props.alertFilter,t=a.state.filterValues;return[{title:E.default.createElement("span",{className:"tableHeaderOperate"},"服务:",E.default.createElement(h.default,{allowClear:!0,value:t.service_name||"all",onChange:a.filterValueChange.bind(a,"service_name")},E.default.createElement(S,{value:"all"},"全部"),e&&e.server.map(function(e){return E.default.createElement(S,{value:e,key:e},e)}))),dataIndex:"service_name",width:160},{title:E.default.createElement("span",{className:"tableHeaderOperate"},"告警定义名称:",E.default.createElement(u.default,{placeholder:"Any",value:t.fuzzy_definition_name||"",onChange:a.filterValueChange.bind(a,"fuzzy_definition_name")})),dataIndex:"label",width:360,render:function(e){return E.default.createElement("a",{href:"#"},e)}},{title:E.default.createElement("span",{className:"tableHeaderOperate"},"状态:",E.default.createElement(h.default,{allowClear:!0,value:t.state||"all",onChange:a.filterValueChange.bind(a,"state")},E.default.createElement(S,{value:"all"},"全部"),E.default.createElement(S,{value:"OK"},"OK"),E.default.createElement(S,{value:"warning"},"WARNING"),E.default.createElement(S,{value:"CRITICAL"},"CRITICAL"),E.default.createElement(S,{value:"UNKONWON"},"UNKONWON"))),key:"original_timestamp",width:240,render:function(e){var t="",a=new Date(e.original_timestamp).getTime(),n=new Date(e.latest_timestamp).getTime(),l=Math.ceil((n-a)/864e5),r=(l/365).toFixed(1),s=Math.floor(l/30);r>=1?t="for  "+(r>1?r+" years":" about a year")+" ":s>=1?t="for "+(s>1?s+" months":" about a month")+" ":l>=1&&(t="for "+(l>1?l+" days":" about a day")+" ");var u=(0,y.default)(new Date(e.original_timestamp)).format("YYYY/MM/DD hh:mm"),i=(0,y.default)(new Date(e.latest_timestamp)).format("YYYY/MM/DD hh:mm");return E.default.createElement("div",null,E.default.createElement("label",{className:"statusBtn "+e.state},e.state.length>4?e.state.substring(0,4):e.state),E.default.createElement(o.default,{placement:"top",title:E.default.createElement("span",null,"状态改变: ",u,E.default.createElement("br",null),"最后选中: ",i)},t))}},{title:E.default.createElement("span",{className:"tableHeaderOperate"},"响应:",E.default.createElement(u.default,{placeholder:"Any",value:t.fuzzy_text||"",onChange:a.filterValueChange.bind(a,"fuzzy_text")})),dataIndex:"text",render:function(e){return E.default.createElement("p",{className:"alertContent",title:e},e)}}]},a.state={filterValues:{}},a}return(0,p.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=(0,s.default)(r.default.mark(function e(){var t;return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.match.path.split("/")[2],e.next=3,g.actions.host.getAlertsLists({hostName:t});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props.alertsList;return e?E.default.createElement("div",{className:"hostAlerts"},E.default.createElement(n.default,{dataSource:e,columns:this.columns(),rowKey:function(e){return e.id}})):E.default.createElement(l.default,{style:{width:"100%",height:"100%"}})}}]),t}(v.Component);t.Alerts=N,t.default=(0,g.connect)(function(e){return{alertsList:e.host.alertsList,alertFilter:e.host.alertFilter}})(N)},600:function(e,t,a){},601:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=g(a(2)),l=g(a(27)),r=g(a(44)),s=g(a(96)),o=g(a(17)),u=g(a(14)),i=g(a(12)),c=g(a(4)),d=g(a(6)),m=g(a(3)),f=g(a(5)),p=g(a(57)),h=g(a(40));a(29),a(48),a(95),a(20),a(22),a(56),a(34);var v=a(1),E=g(v);function g(e){return e&&e.__esModule?e:{default:e}}var y=h.default.Search,_=p.default.TabPane,S=function(e){function t(){var e,a,n,l;(0,c.default)(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=(0,m.default)(this,(e=t.__proto__||(0,i.default)(t)).call.apply(e,[this].concat(s))),n.filterList=function(){return E.default.createElement("ul",{className:"leapConfigFilterMenu"},E.default.createElement("li",null,"修改的属性"),E.default.createElement("li",null,"最终的属性"),E.default.createElement("li",null,"显示有问题的属性"))},n.warningOperate=function(){return E.default.createElement("ul",{className:"leapConfigWarnOperate"},E.default.createElement("li",null,"重启所有被影响的"),E.default.createElement("li",null,"重启 DataNodes"))},n.tabChange=function(e){console.log(e)},l=a,(0,m.default)(n,l)}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return E.default.createElement("div",{className:"leapServiceConfig"},E.default.createElement("div",{className:"needRestart warning"},E.default.createElement("span",null,"重新启动要求: ",E.default.createElement("label",null,"4台主机")," 上的 ",E.default.createElement("label",null,"14个组件")),E.default.createElement(s.default,{content:this.warningOperate(),placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".needRestart")},trigger:"click"},E.default.createElement(o.default,{className:"restartBtn fr"},"重新启动",E.default.createElement(u.default,{type:"caret-down"})))),E.default.createElement("div",{className:"serviceAllVersions"},E.default.createElement(N,null,E.default.createElement("li",null,E.default.createElement(r.default,{placement:"top",title:"1111"},E.default.createElement("div",null,E.default.createElement("p",{className:"clearfix version"},E.default.createElement("label",{className:"fl"},"V4"),E.default.createElement("label",{className:"fr",title:"当前"},E.default.createElement(u.default,{type:"retweet"}))),E.default.createElement("p",{className:"timeAgo"},"about day ago"),E.default.createElement("p",{className:"clearfix leapInfo"},E.default.createElement("label",{className:"fl",title:"internaladmin"},"internaladmin"),E.default.createElement("label",{className:"fr",title:"LEAP-3.4.4"},"LEAP-3.4.4"))))),E.default.createElement("li",null,E.default.createElement("p",{className:"clearfix version"},E.default.createElement("label",{className:"fl"},"V4")),E.default.createElement("p",{className:"timeAgo"},"about day ago"),E.default.createElement("p",{className:"clearfix leapInfo"},E.default.createElement("label",{className:"fl",title:"internaladmin"},"internaladmin"),E.default.createElement("label",{className:"fr",title:"LEAP-3.4.4"},"LEAP-3.4.4"))),E.default.createElement("li",null,E.default.createElement("p",{className:"clearfix version"},E.default.createElement("label",{className:"fl"},"V4")),E.default.createElement("p",{className:"timeAgo"},"about day ago"),E.default.createElement("p",{className:"clearfix leapInfo"},E.default.createElement("label",{className:"fl",title:"internaladmin"},"internaladmin"),E.default.createElement("label",{className:"fr",title:"LEAP-3.4.4"},"LEAP-3.4.4"))))),E.default.createElement("div",{className:"leapConfigHeader"},E.default.createElement("span",{className:"group"},"组 ",E.default.createElement(l.default,{value:"d"},E.default.createElement(l.default.Option,{value:"d"},"Default(4)"))),E.default.createElement(o.default,{className:"manageConfig",icon:"setting"},"管理配置组"),E.default.createElement("span",{className:"leapConfigFilter fr"},E.default.createElement(y,{placeholder:"过滤...",onSearch:function(e){return console.log(e)},style:{width:200}}),E.default.createElement(s.default,{placement:"bottomRight",getPopupContainer:function(){return document.querySelector(".leapConfigFilter")},content:this.filterList(),trigger:"click"},E.default.createElement(o.default,{className:"leapFilterBtn",icon:"filter"},E.default.createElement(u.default,{type:"caret-down"}))))),E.default.createElement("div",{className:"leapServiceConfCont"},this.props.match.params.service,E.default.createElement(p.default,{onChange:this.tabChange,type:"card"},E.default.createElement(_,{tab:"Setting",key:"Setting"}),E.default.createElement(_,{tab:"Advanced",key:"Advanced"}))))}}]),t}(v.Component);t.default=S;var N=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.domTranslate=function(e){var t=a.state,n=t.ulDomWidth,l=t.tranlateWidth,r=void 0===l?0:l,s=document.querySelector(".carouselWrapper").clientWidth,o=n-Math.abs(r),u=e.target.dataset.type||e.target.getAttribute("data-type"),i=parseInt(s/160),c=0;c="right"==u?o-s>=s?r-160*i:-n+s:Math.abs(r)>=s?r+160*i:0,a.setState({tranlateWidth:c,wrapperWidth:s,cantCursor:o-s>=s})},a.state={},a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=document.querySelector(".carouselWrapper").clientWidth,t=160*this.props.children.length-10;this.setState({wrapperWidth:e,ulDomWidth:t})}},{key:"render",value:function(){var e=this.state,t=e.ulDomWidth,a=e.wrapperWidth,l=e.tranlateWidth,r=void 0===l?0:l,s=a<t,o={transform:"translateX("+(r||0)+"px)",msTransform:"translateX("+(r||0)+"px)"},i={left:{cursor:r?"pointer":"no-drop"},right:{cursor:this.state.cantCursor?"pointer":"no-drop"}};return E.default.createElement("div",{className:"carousel "+(s?"needArrow":"")},s&&E.default.createElement(u.default,{onClick:this.domTranslate,"data-type":"left",type:"left",className:"carouselArrow arrowLeft",style:i.left}),E.default.createElement("div",{className:"carouselWrapper"},E.default.createElement("ul",{className:"clearfix",style:(0,n.default)({width:t},o)},this.props.children&&this.props.children.map(function(e){return e}))),s&&E.default.createElement(u.default,{onClick:this.domTranslate,"data-type":"right",type:"right",className:"carouselArrow arrowRight",style:i.right}))}}]),t}(v.Component)},602:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;p(a(358)),p(a(2));var n=p(a(70)),l=p(a(14)),r=p(a(12)),s=p(a(4)),o=p(a(6)),u=p(a(3)),i=p(a(5));a(353),a(79),a(22);var c=a(1),d=p(c),m=a(11),f=p(a(601));function p(e){return e&&e.__esModule?e:{default:e}}a(600);var h=function(e){function t(e){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.onMenuSelect=function(e){a.setState({selectedKeys:e.selectedKeys})},a.sliderChange=function(e,t,a){},a.state={},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentWillMount",value:function(){var e=this.props.location.pathname.split("/configs/")[1],t=v,a=void 0;t.map(function(t){t.displayName==e&&(a=[String(t.id)])}),this.setState({configMenu:t,selectedKeys:e?a:[String(v[0].id)]})}},{key:"render",value:function(){var e=this.state,t=e.configMenu,a=e.selectedKeys,r=this.props.location.pathname,s=r.split("/configs")[0].split("/hosts/")[1];return d.default.createElement("div",{className:"leapHostConfig clearfix"},d.default.createElement("div",{className:"leapConfigLeftMenu fl"},d.default.createElement(n.default,{className:"LeapConifgMenu",mode:"inline",onSelect:this.onMenuSelect,selectedKeys:a},t&&t.map(function(e){return d.default.createElement(n.default.Item,{key:e.id},d.default.createElement(m.Link,{to:"/hosts/"+s+"/configs/"+e.displayName},d.default.createElement("span",{className:"menuName"},e.displayName),d.default.createElement(l.default,{type:"right",className:"fr"})))}))),d.default.createElement("div",{className:"leapConfigRightCont"},d.default.createElement(m.Route,{path:"/hosts/"+s+"/configs/:service",component:f.default}),t&&"/hosts/host/configs"==r&&d.default.createElement(m.Redirect,{exact:!0,from:"/hosts/"+s+"/configs",to:"/hosts/"+s+"/configs/"+t[0].displayName})))}}]),t}(c.Component);t.default=h;var v=[{id:1,displayName:"HDFS"},{id:2,displayName:"YARN"},{id:3,displayName:"MapReduce2"},{id:4,displayName:"Hive"},{id:5,displayName:"HBase"},{id:6,displayName:"Sqoop"},{id:7,displayName:"ZooKeeper"},{id:8,displayName:"Flume"},{id:9,displayName:"ELK"},{id:10,displayName:"SQL Editor"},{id:11,displayName:"Impala"}]},603:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=E(a(165)),l=E(a(37)),r=E(a(40)),s=E(a(14)),o=E(a(26)),u=E(a(25)),i=E(a(12)),c=E(a(4)),d=E(a(6)),m=E(a(3)),f=E(a(5));a(164),a(36),a(34),a(22);var p=a(1),h=E(p),v=a(11);function E(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){var a=this;(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.rackChange=function(e){var t=e.target.value;0!==t.indexOf("/")&&(t="/"+t),n.setState({rackVal:t})},n.showEditRackModal=function(e,t){n.setState({isEditRack:!0,oldRack:e})},n.operateOk=(0,u.default)(o.default.mark(function e(){var t,l,r,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.state,l=t.rackVal,r=t.oldRack,l){e.next=4;break}return n.setState({isEditRack:!1}),e.abrupt("return");case 4:s={context:"设置Rack",rack:l,cluster_name:r.cluster_name,hosts:r.host_name},n.setState({modalLoading:!0}),v.actions.host.setHostRack(s).then(function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=t.code){e.next=4;break}return e.next=3,v.actions.host.getHostSummary({host_name:r.host_name});case 3:n.setState({oldRack:null,rackVal:null,isEditRack:!1,modalLoading:!1,modalHasErr:!1});case 4:case"end":return e.stop()}},e,a)}));return function(t){return e.apply(this,arguments)}}()).catch(function(e){n.setState({modalLoading:!1,modalHasErr:!0})});case 7:case"end":return e.stop()}},e,a)})),n.cancelOperate=function(){n.setState({isEditRack:!1})},n.state={},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"render",value:function(){var e=this,t=this.props.host_info,a=this.state,o=a.isEditRack,u=a.oldRack,i=a.rackVal,c=a.modalHasErr,d=a.modalLoading;return h.default.createElement(n.default,{className:"hostDetailCard hostDetail",title:"概览"},h.default.createElement("ul",null,h.default.createElement("li",null,h.default.createElement("span",null,"主机名:"),h.default.createElement("span",null,t.host_name)),h.default.createElement("li",null,h.default.createElement("span",null,"IP地址:"),h.default.createElement("span",null,t.ip)),h.default.createElement("li",null,h.default.createElement("span",null,"Rack:"),h.default.createElement("span",null,t.rack_info,h.default.createElement(s.default,{type:"edit",onClick:this.showEditRackModal.bind(this,t),style:{cursor:"pointer"}})," ")),h.default.createElement("li",null,h.default.createElement("span",null,"操作系统:"),h.default.createElement("span",null,t.os_type,"(",t.os_arch,")")),h.default.createElement("li",null,h.default.createElement("span",null,"内核(CPU):"),h.default.createElement("span",null,t.ph_cpu_count,"(",t.cpu_count,")")),h.default.createElement("li",null,h.default.createElement("span",null,"磁盘:"),h.default.createElement("span",null,"669.93GB/1775.48GB(37.73%使用)")),h.default.createElement("li",null,h.default.createElement("span",null,"内存:"),h.default.createElement("span",null,(t.total_mem/1024/1024).toFixed(2),"GB")),h.default.createElement("li",null,h.default.createElement("span",null,"平均负载:"),h.default.createElement("span",null,"3.31")),h.default.createElement("li",null,h.default.createElement("span",null,"心跳:"),h.default.createElement("span",null,t.last_heartbeat_time)),h.default.createElement("li",null,h.default.createElement("span",null,"当前版本:"),h.default.createElement("span",null,"3.3.4"))),h.default.createElement(l.default,{title:"设置Rack",wrapClassName:"setRackModal",visible:o,onOk:this.operateOk,onCancel:this.cancelOperate,confirmLoading:d,maskClosable:!1,okText:"确认",cancelText:"取消"},h.default.createElement("div",null,h.default.createElement("label",null,"Rack:"),h.default.createElement(r.default,{ref:function(t){return e.rackIpt=t},value:i||u&&u.rack_info,onChange:this.rackChange}),h.default.createElement("p",{style:{color:c?"red":"#999"}},c?"Rack更改失败":"应以斜杠开始，可以包含字母、数字、点、连字符和斜杠"))))}}]),t}(p.Component);t.default=g,g.defaultProps={host_info:{}}},604:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=R(a(165)),l=R(a(37)),r=R(a(65)),s=R(a(44)),o=R(a(14)),u=R(a(50)),i=R(a(195)),c=R(a(26)),d=R(a(8)),m=R(a(76)),f=R(a(25)),p=R(a(114)),h=R(a(96)),v=R(a(17)),E=R(a(219)),g=R(a(119)),y=R(a(12)),_=R(a(4)),S=R(a(6)),N=R(a(3)),C=R(a(5));a(164),a(36),a(48),a(22),a(49),a(95),a(20);var b=a(1),M=R(b),k=a(11),A=a(169),L=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(132));function R(e){return e&&e.__esModule?e:{default:e}}var w=function(e){function t(e){var a=this;(0,_.default)(this,t);var n,l=(0,N.default)(this,(t.__proto__||(0,y.default)(t)).call(this,e));return l.getComponentData=function(){var e=l.props,t=e.currentCluster,a=e.host_components,n=l.props.match.path.split("/")[2];l.host_name=n;var r={clusterID:t.clusterId},s=L.getClusterVmnodesWithComponents(r),o=L.getAvailableComponentOnVmnode(r),u=k.actions.host.getHostSummary({host_name:n});g.default.all([s,o,u]).then(function(e){var t=(0,E.default)(e,3),r=t[0],s=t[1],o=t[2],u=void 0,i=void 0,c=void 0,d=[];if(r&&1==r.code){c=(i=r.data)[n];var m=a.length>0||!o?a:o.host_components;m&&m.length>0&&(d=l.getNeedRestartService(c,m))}r&&1==r.code&&(u=s.data[n]),l.setState({canAddComponents:u,allComponents:i,needRestart:d,currComponents:c,summary:o})})},l.hostComponentsOperateMenu=function(e,t){return"client"===t?M.default.createElement("ul",{style:{width:"100px"},onClick:l.componentOperate.bind(l,e)},M.default.createElement("li",{"data-type":"updateClient"},"重启所有客户端")):M.default.createElement("ul",{style:{width:"100px"},onClick:l.componentOperate.bind(l,e)},"STARTED"===e.state&&M.default.createElement("li",{"data-type":"restart"},"重启"),"STARTED"!==e.state&&M.default.createElement("li",{"data-type":"start"},"启动"),"STARTED"===e.state&&M.default.createElement("li",{"data-type":"stop"},"停止"),M.default.createElement("li",{"data-type":"maintenance"},"ON"===e.maintenance_state?"关闭":"打开","维护模式"))},l.hostComponentsAddBtn=function(){return M.default.createElement(h.default,{placement:"bottomRight",overlayClassName:"hostTabOperate summaryOperate",content:l.hostComponentsAdd(),trigger:"click"},M.default.createElement(v.default,null,"添加"))},l.hostComponentsAdd=function(){var e=l.state.canAddComponents;return M.default.createElement("ul",null,e&&e.map(function(e){return M.default.createElement("li",{key:e.id,onClick:l.addClient.bind(l,e)},e.displayName)}))},l.addClient=function(e){l.setState({componentOperateData:[],curAddService:e})},l.componentOperate=function(e,t){var a=t.target.dataset.type||t.target.getAttribute("data-type");if(a.indexOf("Client")>=0)e=(0,p.default)(e);else if("start"==a||"stop"==a){var n="start"==a?"启动 "+e.displayName:"停止 "+e.displayName;e.text=n,e.action="startComponents"}else if("restart"==a){var r="重启"+e.displayName;e.text=r,e.action="restartComponents"}else if("maintenance"==a){var s="ON"==e.maintenance_state?"为"+e.displayName+"关闭维护模式":"为"+e.displayName+"打开维护模式";e.text=s,e.action="openOrCloseMaintenanceState"}else"restartNeedComponents"==a&&(e.text="重启"+e[0].host_name+"主机上具有Stale Config属性的组件",e.action="restartAllComponents");l.setState({componentOperateData:e,operateType:a})},l.operateOk=(n=(0,f.default)(c.default.mark(function e(t){var n,r,s,o,u,i,f,h,v,E;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.state,r=n.componentOperateData,s=n.curAddService,o=n.operateType,l.setState({confirmLoading:!0}),void 0,u=void 0,i=l.props.currentCluster,!Array.isArray(r)){e.next=21;break}if(0!=r.length){e.next=10;break}return e.next=9,k.actions.create.postReServiceList({services:(0,m.default)((0,d.default)({},s.belongServiceName,[(0,d.default)({},s.name,[l.host_name])])),clustername:i.clusterName,noCheck:!0}).then(function(e){setTimeout(function(){l.setState({confirmLoading:!1,componentOperateData:null},function(){k.actions.host.updateState({taskModalVisible:!0})})},3e3)});case 9:return e.abrupt("return");case 10:return f="updateClient"==o?(0,p.default)(r):r,h=f[0].host_name,v="updateClient"==o?"重启"+h+"上的所有客户端":"重启"+h+"主机上具有Stale Config属性的组件",E=f.map(function(e){return{service_name:e.belongServiceName,component_name:e.name,hosts:e.host_name}}),e.next=16,k.actions.host.restartAllComponents({clusterName:i.clusterName,context:v,filters:E});case 16:return u=e.sent,e.next=19,l.getComponentData();case 19:e.next=26;break;case 21:return e.next=23,k.actions.host[r.action](r);case 23:return u=e.sent,e.next=26,l.getComponentData();case 26:u&&1==u.code?l.setState({componentOperateData:{},confirmLoading:!1,errMsg:null}):l.setState({confirmLoading:!1,errMsg:"操作失败("+(200==u.statusCode?u.data:u.statusCode)+")"});case 27:case"end":return e.stop()}},e,a)})),function(e){return n.apply(this,arguments)}),l.cancelOperate=function(){l.setState({componentOperateData:{},confirmLoading:!1})},l.getNeedRestartService=function(e,t){var a={};t.map(function(e){a[e.HostRoles.component_name]=e.HostRoles});var n=[];return e&&e.filter(function(e){var t=a[e.name],l=(0,i.default)({},e,t);l.stale_configs&&n.push(l)}),n},l.state={componentOperateData:{}},l}return(0,C.default)(t,e),(0,S.default)(t,[{key:"componentDidMount",value:function(){var e=this;this.getComponentData(),this.timer=setInterval(function(){e.getComponentData()},5e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){var e=this,t=this.state,a=t.componentOperateData,c=t.confirmLoading,d=t.errMsg,m=t.needRestart,f=t.currComponents,p=t.summary,E=this.props.host_components||p,g={},y=void 0;Array.isArray(a)?y="确认":a&&a.text&&(y="确认"+a.text+"?");var _={};return E.map(function(e){_[e.HostRoles.component_name]=e.HostRoles}),E&&0==E.length?M.default.createElement(u.default,{spinning:!0}):M.default.createElement(n.default,{className:"hostDetailCard components",title:"组件",extra:this.hostComponentsAddBtn()},m&&m.length>0&&M.default.createElement("h2",{className:"componentNeedRestart"},"主机需要 ",m.length," 组件 重新启动",M.default.createElement(v.default,{onClick:this.componentOperate.bind(this,m),"data-type":"restartNeedComponents"},"重新启动")),M.default.createElement("ul",null,f&&f.map(function(t,a){var n=_[t.name],l=(0,i.default)({},t,n),u=void 0,c=void 0;if(l.displayName.indexOf("Client")>=0)g[l.displayName]=l;else{var d="warning",m=l.state;"STARTED"==m&&(d="check-circle"),c=M.default.createElement("li",{className:"clearfix",key:t.id},M.default.createElement("span",{className:"fl"},M.default.createElement(s.default,{placement:"top",title:"warning"==d?"已停止":"已启动"},M.default.createElement(o.default,{type:d,className:"stateIcon "+d})),l.displayName," /",M.default.createElement(k.Link,{to:"/monitor/services/"+l.belongServiceName}," ",A.services[l.belongServiceName].display_name),"ON"==l.maintenance_state&&M.default.createElement(s.default,{placement:"right",title:l.displayName+"组件已打开维护模式"},M.default.createElement(o.default,{type:"medicine-box",className:"stateIcon medicine-box noMargin"}))),M.default.createElement("div",{className:"operate fr"},M.default.createElement(h.default,{overlayClassName:"hostTabOperate componentOperateMenu",placement:"bottom",content:e.hostComponentsOperateMenu(l),trigger:"focus"},M.default.createElement(v.default,{style:{border:"none"}},"STARTED"==m?"已启动":"已停止",M.default.createElement(o.default,{type:"caret-down",style:{marginLeft:"10px"}})))))}if(a==f.length-1){var p=(0,r.default)(g);p.length>0&&(u=M.default.createElement("li",{className:"clearfix",key:"last"},M.default.createElement("span",{className:"fl",style:{marginLeft:22}},"客户端 /"),M.default.createElement("span",{className:"fl",style:{width:"47%",marginLeft:10}},p.join("，")),M.default.createElement("div",{className:"operate fr"},M.default.createElement(h.default,{overlayClassName:"hostTabOperate componentOperateMenu",placement:"bottom",content:e.hostComponentsOperateMenu(g,"client"),trigger:"focus"},M.default.createElement(v.default,{style:{border:"none"}},"已安装",M.default.createElement(o.default,{type:"caret-down",style:{marginLeft:"10px"}}))))))}return[c,u]})),M.default.createElement(l.default,{title:y,visible:!!y,onOk:this.operateOk,onCancel:this.cancelOperate,confirmLoading:c,okText:"确认",cancelText:"取消"},M.default.createElement("label",null,y),d&&M.default.createElement("p",{style:{color:"red"}},d)))}}]),t}(b.Component);t.default=w,w.defaultProps={host_components:[]}},605:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.echatOptions=void 0;var n=s(a(65)),l=s(a(23)),r=s(a(217));function s(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=e/1024;return t<1?e.toFixed(1)+"B":t/1024<1?t.toFixed(1)+"KB":t/1024/1024<1?(t/1024).toFixed(1)+"MB":t/1024/1024/1024<1?(t/1024/1024).toFixed(1)+"GB":t/1024/1024/1024/1024<1?(t/1024/1024/1024).toFixed(1)+"TB":(t/1024/1024/1024/1024).toFixed(1)+"PB"}t.echatOptions=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2],s={},u={};return"[object Object]"==Object.prototype.toString.call(e)&&(0,n.default)(e).map(function(t){var a=e[t],n=[],l=[],r=a[0][0],o=a[0][0];a.map(function(e,t){n.push({name:+(e[1]+"000"),value:[+(e[1]+"000"),e[0]]}),r<e[0]&&(r=e[0]),o>e[0]&&(o=e[0]),l.push(e[0])});var i=0;l.map(function(e){i+=e});var c=i/l.length;u[t]={avg:0!=c?c.toFixed(2):c,max:r,min:o},s[t]=n}),{title:{show:!1},tooltip:{trigger:"axis",show:!1,formatter:function(e){var t="";return e.map(function(e){var n=r.default[a][e.seriesName],l=e.marker,s=e.value[1];if("memory"===a&&(s=o(s)),"network"===a&&(s=o(s)),"disk"===a){var u=s/1024;s=0!=u?u>1?u.toFixed(1)+"TB":s.toFixed(1)+"GB":s}"cpu"===a&&(s=s?s.toFixed(4)+"%":s),t+=l+n+": "+s+" <br/>"}),"<span style='text-align: center; margin-left: 15px;'>    "+(0,l.default)(e[0].axisValue).format("YYYY/MM/DD HH:mm:ss")+"</span><br />"+t},axisPointer:{animation:!1}},legend:{data:(0,n.default)(s),formatter:function(e){return r.default[a][e]+"           |       min:  "+u[e].min+" "+("cpu"==a?"%":"")+"       avg:  "+u[e].avg+" "+("cpu"==a?"%":"")+"       max:  "+u[e].max+" "+("cpu"==a?"%":"")},show:!1,padding:[15,60],backgroundColor:"#E6EAEC",textStyle:{fontWeight:"bolder",color:"#666"}},grid:{top:10,left:20,right:20,bottom:0,containLabel:!0},xAxis:{type:"time",splitLine:{show:!1},axisLabel:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],zlevel:10,splitLine:{show:!0,interval:25,lineStyle:{type:"dotted"}},axisTick:{inside:!0},max:"dataMax",axisLabel:{inside:!0,fontSize:10,fontWeight:"bold",formatter:function(e,t){if("memory"===a)return o(e);if("network"===a)return o(e);if("disk"===a){var n=e/1024;return 0!=n?n>=1?n.toFixed(1)+"TB":e.toFixed(1)+"GB":e}return e}}},series:(0,n.default)(s).reverse().map(function(e){var a={name:e,type:"line",symbol:"none",data:s[e]};return t&&(a.areaStyle={normal:{}}),a})}}},648:function(e,t,a){},649:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var a,n=e.toFixed(1),l=navigator.userAgent.toLowerCase();return l.indexOf("msie")>-1&&(a=l.match(/msie ([\d.]+)/)[1]),a<=n&&t&&t(),a<=n}},653:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(a(76)),l=o(a(65)),r=o(a(652)),s=o(a(217));o(a(649));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t,a,o){t=t||(new Date).getTime(),a=a||"json";var u=Array.isArray(o)&&o.map(function(e){return s.default[t][e]}).join(",");u="时间戳,"+u+"\r\n";var i=e;if("csv"==a){var c=(0,l.default)(e);i=e[c[0]].map(function(t,a){var n=c.map(function(t,n){return""+e[c[n]][a][0]}).join(",");return t[1]+","+n}).join("\r\n")}else"json"==a&&(i=(0,l.default)(e).map(function(a){return{name:s.default[t][a],data:e[a]}}));var d=new Blob(["csv"==a?"\ufeff"+u+i:(0,n.default)(i)],{type:"text/plain;charset=utf-8"});r.default.saveAs(d,t+"."+a)}},66:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(17)),l=u(a(14));a(20),a(22);var r=u(a(1));a(776);var s=u(a(774)),o=a(89);function u(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return r.default.createElement("div",{className:"jumpToCreate"},r.default.createElement("img",{src:s.default,style:{height:"238px"},className:"switcher",alt:"创建集群"}),r.default.createElement("h1",null,"您还没有创建集群"),r.default.createElement(n.default,{onClick:function(){return o.history.push("/createCluster")},type:"primary"},r.default.createElement(l.default,{type:"plus"}),"创建集群"))}},69:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(17)),l=h(a(14)),r=h(a(12)),s=h(a(4)),o=h(a(6)),u=h(a(3)),i=h(a(5)),c=h(a(27));a(20),a(22),a(29);var d=a(1),m=h(d),f=a(11);a(1078);var p=a(89);function h(e){return e&&e.__esModule?e:{default:e}}var v=c.default.Option,E=function(e){function t(e){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.handleChange=function(e){var t=a.props.clusterList;t&&t.map(function(t){t.clusterName==e&&(f.actions.app.changeCluster(t),a.props.selectChange&&a.props.selectChange(t))})},a.getHelpHandle=function(){},a.toggleIpt=function(e){var t=a.state.width||0;a.setState({width:200-t})},a.state={selectValue:"",width:0,isCreate:"/createCluster"!=p.history.location.pathname},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentWillMount",value:function(){this.props.clusterList||f.actions.app.getClusterList()}},{key:"render",value:function(){var e=this.props,t=e.currentCluster,a=e.clusterList,r=e.refresh,s=(e.getHelpHandle,this.state),o=s.selectValue,u=(s.width,t&&t.clusterName);return m.default.createElement("div",{className:"devToolsHeader"},a&&a.length>0&&m.default.createElement("span",{className:"fl"},m.default.createElement("label",null,"当前集群: "),m.default.createElement(c.default,{value:o||u,onChange:this.handleChange,style:{width:200}},a&&a.map(function(e){return m.default.createElement(v,{key:e.clusterId,value:e.clusterName},e.clusterAlias)}))),m.default.createElement("ul",{className:"fr"},m.default.createElement("li",{title:"刷新",onClick:r||function(){return location.reload()}},m.default.createElement(l.default,{type:"sync"})),m.default.createElement("li",{title:"帮助",onClick:this.getHelpHandle},m.default.createElement(l.default,{type:"question-circle-o"})),m.default.createElement("li",null,m.default.createElement(n.default,{icon:"plus",className:"createBtn"},m.default.createElement(f.Link,{to:"/createCluster"},"创建集群")))))}}]),t}(d.Component),g=(0,f.connect)(function(e){return{currentCluster:e.app.currentCluster,clusterList:e.app.clusterList}})(E);t.default=g},694:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=I(a(37)),l=I(a(165)),r=I(a(50)),s=I(a(44)),o=I(a(26)),u=I(a(195)),i=I(a(18)),c=I(a(25)),d=I(a(65)),m=I(a(219)),f=I(a(119)),p=I(a(12)),h=I(a(4)),v=I(a(6)),E=I(a(3)),g=I(a(5)),y=I(a(324)),_=I(a(27));a(36),a(164),a(49),a(48),a(314),a(29);var S=a(1),N=I(S),C=a(11),b=a(217),M=I(a(116)),k=I(a(653));a(648);var A=I(a(31));a(646),a(626),a(230),a(616),a(610);var L=a(605),R=I(a(604)),w=I(a(603));function I(e){return e&&e.__esModule?e:{default:e}}var T=_.default.Option,x=y.default.RangePicker,H=function(e){function t(e){var a=this;(0,h.default)(this,t);var n,l,r=(0,E.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return r.setTimer=function(e,t){var a=C.actions.host.getHostSummary,n=C.actions.host.getHostStatus,l=r.host_name;clearInterval(r.timer),r.timer=null,r.timer=setInterval(function(){var e=r.state;e.start_timestamp,e.end_timestamp;f.default.all([a({host_name:l}),n({host_name:l})]).then(function(e){var t=(0,m.default)(e,2),a=(t[0],t[1]);a&&(r.renderChats(a),r.setState({hostStatus:a}))})},5e3)},r.renderChats=function(e,t){var a=r.state.curBigChartType;a?r.setBigChart(e,a):(0,d.default)(r.chartsEl).map(function(a){r.charts[a]=A.default.init(r.chartsEl[a]),r.chartsOptions[a]=(0,L.echatOptions)(e[a],"cpu"===a,a,t),r.charts[a].setOption(r.chartsOptions[a])})},r.showBigChart=function(e,t){return n=(0,c.default)(o.default.mark(function t(n,l){var s,c,d,m;return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("object"!=(void 0===n?"undefined":(0,i.default)(n))||"A"!=n.target.nodeName){t.next=2;break}return t.abrupt("return");case 2:if(s=r.state,c=s.start_timestamp,d=s.end_timestamp,m={bigChartShow:!0,chatsLoading:!1,bigChartLoading:!1,curModalName:b.chartName[e],curBigChartType:e},"object"==(void 0===n?"undefined":(0,i.default)(n))||!n&&!l){t.next=10;break}return r.setState({bigChartLoading:!0}),t.next=8,C.actions.host.getHostStatus({host_name:r.host_name,start:n||c,end:l||d}).then(function(t){t?r.setBigChart(t,e):m.hostStatus=null});case 8:t.next=12;break;case 10:r.setBigChart(r.props.hostStatus,e),m=(0,u.default)({},m,{old_start_timestamp:n,old_end_timestamp:l,old_agoValue:r.state.agoValue});case 12:r.setState(m);case 13:case"end":return t.stop()}},t,a)})),function(e,t){return n.apply(this,arguments)};var n},r.setBigChart=function(e,t){var a=A.default.init(r.bigChart),n=(0,L.echatOptions)(M.default.cloneDeep(e[t]),"cpu"===t,t);n.legend.show=!0,n.tooltip.show=!0,n.xAxis.axisLabel.show=!0,n.legend.bottom=10,n.legend.left=0,n.legend.orient="vertical";var l=(0,d.default)(e[t]).length,s=30*l+30/l*1.5;n.grid.bottom=s,a.setOption(n)},r.hideBigChart=function(){A.default.dispose(r.bigChart);var e=r.state,t=e.old_start_timestamp,a=e.old_end_timestamp,n=e.old_agoValue;r.setState({bigChartShow:!1,curBigChartType:null,start:t,end:a,agoValue:n},function(){r.setTimer()})},r.hostCharts=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"out",t=r.state,a=t.start,n=t.end;return N.default.createElement(_.default,{key:e,className:"timeAgo",dropdownClassName:"timeAgo",value:r.state.agoValue||"1h",onChange:r.agoChange,style:{width:120}},N.default.createElement(T,{value:"1h",hours:"1"},"过去的1小时"),N.default.createElement(T,{value:"2h",hours:"2"},"过去的2小时"),N.default.createElement(T,{value:"4h",hours:"4"},"过去的4小时"),N.default.createElement(T,{value:"12h",hours:"12"},"过去的12小时"),N.default.createElement(T,{value:"24h",hours:"24"},"过去的24小时"),N.default.createElement(T,{value:"1w",hours:"168"},"过去的一星期"),N.default.createElement(T,{value:"1m",hours:"720"},"过去的一个月"),N.default.createElement(T,{value:"1y",hours:"8760"},"过去的一年"),N.default.createElement(T,{value:"custom"},"自定义"),N.default.createElement(T,{value:"customVal",style:{display:r.state.customVal?"block":"none"}},N.default.createElement(s.default,{placement:"bottom",trigger:"hover",title:"开始时间: "+a+" \r\n结束时间: "+n+"\r\n总计时长: "+r.timesFormat(a,n),overlayStyle:{whiteSpace:"pre"}},r.state.customVal||null)))},r.timesFormat=function(e,t){var a=new Date(t).getTime()-new Date(e).getTime(),n=Math.floor(a/1e3/60);return n/60>=1?n/60/24>=1?(n/60/24).toFixed(1)+" 天":(n/60).toFixed(1)+" 小时":n+" 分钟"},r.rangeOk=function(e,t){var a=e[0].format("YYYY/MM/DD HH:mm"),n=e[1].format("YYYY/MM/DD HH:mm");r.setState({start:a,end:n})},r.timeAgoSure=(n=(0,c.default)(o.default.mark(function e(t){var n,l,s,i,c,d,m,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.state,l=n.start,s=n.end,l&&s&&"cancle"!=t){e.next=4;break}return r.setState({agoValue:r.state.lastAgoVal}),e.abrupt("return");case 4:if(!l||!s){e.next=23;break}if(i=String(new Date(l).getTime()).substr(0,10),c=String(new Date(s).getTime()).substr(0,10),clearInterval(r.timer),r.timer=null,d={agoValue:"customVal",customVal:"自定义: "+l,chatsLoading:!1},!r.state.bigChartShow){e.next=15;break}m=r.state.curBigChartType,r.showBigChart(m)(i,c),e.next=22;break;case 15:return r.setState({chatsLoading:!0}),e.next=18,C.actions.host.getHostStatus({host_name:r.host_name,start:i,end:c});case 18:f=e.sent,r.renderChats(f),r.setTimer(i,c),d=(0,u.default)({},d,{start_timestamp:i,end_timestamp:c});case 22:r.setState(d);case 23:case"end":return e.stop()}},e,a)})),function(e){return n.apply(this,arguments)}),r.agoChange=(l=(0,c.default)(o.default.mark(function e(t,n){var l,s,i,c,d;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l=n.props.hours,s=void 0,i=void 0,c={lastAgoVal:r.state.agoValue,agoValue:t,customVal:null,chatsLoading:!1},!t||!l){e.next=21;break}if(i=String((new Date).getTime()).substr(0,10),s=i-3600*l,clearInterval(r.timer),r.timer=null,!r.state.bigChartShow){e.next=14;break}r.props.hostStatus,r.showBigChart(r.state.curBigChartType)(s,i),e.next=21;break;case 14:return r.setState({chatsLoading:!0}),e.next=17,C.actions.host.getHostStatus({host_name:r.host_name,start:s,end:i});case 17:d=e.sent,r.renderChats(d),r.setTimer(s,i),c=(0,u.default)({},c,{start_timestamp:s,end_timestamp:i});case 21:r.setState(c);case 22:case"end":return e.stop()}},e,a)})),function(e,t){return l.apply(this,arguments)}),r.hide=function(){r.setState({visible:!1})},r.handleVisibleChange=function(e){r.setState({visible:e})},r.downloadToFile=function(e,t,a){(0,k.default)(e[t],t,a,(0,d.default)(e[t])),r.hide()},r.state={chatsLoading:!1,bigChartShow:!1},r.charts={},r.chartsEl={},r.chartsOptions={},r}return(0,g.default)(t,e),(0,v.default)(t,[{key:"componentDidMount",value:function(){var e=(0,c.default)(o.default.mark(function e(){var t,a,n,l=this;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.currentCluster,t=this.props.match.path.split("/")[2],this.host_name=t,a=C.actions.host.getHostSummary,n=C.actions.host.getHostStatus,this.setState({isloading:!0}),e.next=8,f.default.all([a({host_name:t}),n({host_name:t})]).then(function(e){var t=(0,m.default)(e,2),a=(t[0],t[1]);a&&l.renderChats(a),l.setState({hostStatus:a||[],isloading:!1}),l.setTimer()});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=this;clearTimeout(this.timer),this.timer=null,A.default.dispose(this.bigChart),(0,d.default)(this.chartsEl).map(function(t){A.default.dispose(e.chartsEl[t])})}},{key:"render",value:function(){var e=this,t=this.props,a=t.summaryInfo,o=t.currentCluster,u=this.state,i=u.bigChartShow,c=u.curModalName,m=u.agoValue,f=u.chatsLoading,p=u.curBigChartType,h=u.isloading,v=this.state.hostStatus||this.props.hostStatus,E=void 0,g=void 0;a&&(E=M.default.cloneDeep(a.host_components),g=a.Hosts);var y=i?"block":"none";return N.default.createElement("div",{className:"hostSummary clearfix"},N.default.createElement(r.default,{spinning:h||!a},N.default.createElement("div",{className:"hostSummaryLeft half"},N.default.createElement(R.default,{host_components:E,match:this.props.match,currentCluster:o}),N.default.createElement(w.default,{host_info:g})),N.default.createElement("div",{className:"hostSummaryRight half"},N.default.createElement(l.default,{className:"hostDetailCard hostCharts",title:"主机指标",extra:this.hostCharts()},N.default.createElement("ul",{className:"clearfix"},(0,d.default)(b.chartName).map(function(t){return N.default.createElement(s.default,{key:t,placement:"left",trigger:"hover",title:v&&0!=v.length?"点击可查看大图":"没有可用数据, Metrics可能没有安装"},N.default.createElement("li",{key:t,className:v&&0!=v.length?"echartWrapper":"echartWrapper noData",onClick:e.showBigChart(t)},N.default.createElement(r.default,{spinning:h||f||!v},(!v||0==v.length)&&N.default.createElement("p",{className:"noDataTitle"},"没有可用数据"),N.default.createElement("div",{className:"chart",ref:function(a){return e.chartsEl[t]=a}}),N.default.createElement("p",{className:"chartName download2FileMenu"},"load"!=t&&"process"!=t?b.chartName[t]+"使用情况":b.chartName[t],v&&N.default.createElement(s.default,{placement:"bottom",title:N.default.createElement("div",null,N.default.createElement("a",{href:"javascript:;",onClick:e.downloadToFile.bind(e,v,t,"json")},"json"),N.default.createElement("a",{href:"javascript:;",onClick:e.downloadToFile.bind(e,v,t,"csv")},"csv")),getPopupContainer:function(){return document.querySelector(".download2FileMenu")}},N.default.createElement("a",{href:"javascript:;",className:"downloadDatatoFile"},"下载"))))))})))),N.default.createElement(n.default,{title:c,visible:!0,style:{display:y},bodyStyle:{display:y},maskStyle:{display:y},wrapClassName:"hostWrapClassName echartWrapper "+y,onOk:this.hideBigChart,onCancel:this.hideBigChart,okText:"确认",cancelText:"",width:800},N.default.createElement("div",{className:"chooseTime download2FileMenu",style:{margin:"0 auto"}},this.hostCharts("modal"),N.default.createElement(s.default,{placement:"bottom",title:N.default.createElement("div",null,N.default.createElement("a",{href:"javascript:;",onClick:this.downloadToFile.bind(this,v,p,"json")},"json"),N.default.createElement("a",{href:"javascript:;",onClick:this.downloadToFile.bind(this,v,p,"csv")},"csv")),getPopupContainer:function(){return document.querySelector(".download2FileMenu")}},N.default.createElement("a",{href:"javascript:;",className:"downloadDatatoFile fr"},"下载"))),N.default.createElement(r.default,{spinning:this.state.bigChartLoading},N.default.createElement("div",{className:"chart",ref:function(t){return e.bigChart=t}}))),N.default.createElement(n.default,{title:"选择时间范围",visible:"custom"===m,onOk:this.timeAgoSure,onCancel:this.timeAgoSure.bind(this,"cancle"),okText:"确认",cancelText:"取消"},N.default.createElement("p",null,"请选择起止时间"),N.default.createElement(x,{showTime:{format:"HH:mm"},format:"YYYY-MM-DD HH:mm",placeholder:["开始时间","结束时间"],onChange:this.rangeChange,onOk:this.rangeOk}))))}}]),t}(S.Component),D=(0,C.connect)(function(e){return{summaryInfo:e.host.summaryInfo,hostStatus:e.host.hostStatus,currentCluster:e.app.currentCluster}})(H);t.default=D},696:function(e,t,a){},707:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=R(a(37)),l=R(a(40)),r=R(a(706)),s=R(a(704)),o=R(a(50)),u=R(a(14)),i=R(a(17)),c=R(a(96)),d=R(a(26)),m=R(a(25)),f=R(a(12)),p=R(a(4)),h=R(a(6)),v=R(a(3)),E=R(a(5)),g=R(a(57));a(36),a(34),a(702),a(699),a(49),a(22),a(20),a(95),a(56);var y=a(1),_=R(y),S=a(11),N=a(89);a(696);var C=R(a(694)),b=(R(a(602)),R(a(598))),M=R(a(595)),k=(R(a(592)),R(a(66))),A=R(a(326)),L=R(a(69));function R(e){return e&&e.__esModule?e:{default:e}}var w=g.default.TabPane,I=function(e){function t(e){var a=this;(0,p.default)(this,t);var n=(0,v.default)(this,(t.__proto__||(0,f.default)(t)).call(this,e));return n.componentWillMount=(0,m.default)(d.default.mark(function e(){var t,l,r,s;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props.hostLists,l=n.props.match.params.host=n.props.match.params.host,e.next=4,S.actions.app.getClusterList({host_name:l}).then(function(e){0==e.length&&N.history.push("/noCluster"),e&&e.length>0&&!t&&S.actions.host.getHostList({clusterName:e[0].clusterName,host_name:l})});case 4:(r=n.props.location.pathname).indexOf("/hosts/")>=0&&((s=r.split("/hosts/")[1]).indexOf("/")&&(s=s.split("/")[1]),n.setState({activeKey:s}));case 6:case"end":return e.stop()}},e,a)})),n.clusterChange=function(e){n.props.history.push("/hosts")},n.popover=function(){return _.default.createElement(c.default,{placement:"bottomRight",overlayClassName:"hostTabOperate summaryOperate",content:n.hostComponentsOperate(),trigger:"click"},"告警")},n.tabChange=function(e){n.setState({activeKey:e})},n.tabBarExtraContent=function(){return _.default.createElement(c.default,{placement:"bottomRight",overlayClassName:"hostTabOperate",content:n.tabBarOperate(),trigger:"click"},_.default.createElement(i.default,null,"操作"))},n.tabBarOperate=function(){var e=n.props.hostinfo;return _.default.createElement("ul",{onClick:n.operateHost},_.default.createElement("li",{"data-type":"startAll","data-text":"启动全部主机组件"},_.default.createElement(u.default,{type:"caret-right"})," 启动所有组件"),_.default.createElement("li",{"data-type":"stopAll","data-text":"停止全部主机组件",className:"stopAllComponent"},_.default.createElement(u.default,{type:"caret-right"})," 停止所有组件"),_.default.createElement("li",{"data-type":"restartAll"},_.default.createElement(u.default,{type:"retweet"})," 重启所有组件"),_.default.createElement("li",{"data-type":"setRack","data-text":"设置Rack"},_.default.createElement(u.default,{type:"setting"})," 设置Rack"),e&&e.Hosts&&"OFF"==e.Hosts.maintenance_state?_.default.createElement("li",{"data-type":"open","data-text":"打开维护模式为主机"},_.default.createElement(u.default,{type:"camera"})," 打开维护模式"):_.default.createElement("li",{"data-type":"close","data-text":"关闭维护模式为主机"},_.default.createElement(u.default,{type:"camera"})," 关闭维护模式"))},n.operateHost=function(e){if("LI"==e.target.nodeName||"I"==e.target.nodeName){var t=n.props.hostinfo,a=e.target.dataset.type||e.target.getAttribute("data-type"),l=e.target.dataset.text||e.target.getAttribute("data-text");"restartAll"==a&&(l="重启"+t.Hosts.host_name+"上的全部组件"),n.setState({operateType:a,operateText:l})}},n.modalSureHandle=function(){var e=n.state,t=e.operateType,a=e.operateText,l=e.newRack,r=n.props.hostinfo;if("startAll"==t||"stopAll"==t){var s=r&&r.host_components.map(function(e){return e.HostRoles.component_name});S.actions.host.postOperate({state:t.indexOf("start")>=0?"STARTED":"INSTALLED",clusterName:r.Hosts.cluster_name,host_name:r.Hosts.host_name,context:a,level:"HOST",query:"HostRoles/component_name.in("+s.join(",")+")",fromHost:!0}).then(function(e){1==e.code&&n.setState({operateText:null})})}else if("restartAll"==t){var o=(0,A.default)([r],1);S.actions.host.restartAllComponents({clusterName:r.Hosts.cluster_name,filters:o.data,context:a}).then(function(e){1==e.code&&n.setState({operateText:null})})}else if("close"==t||"open"==t){var u=(0,A.default)([r],0);S.actions.host.openOrCloseMaintenance({clusterName:r.Hosts.cluster_name,context:a,hostsStr:u.data,isOpen:"open"==t?"ON":"OFF"}).then(function(e){1==e.code&&n.setState({operateText:null})})}else if("setRack"==t){if(!l)return;var i=(0,A.default)([r],0);S.actions.host.setHostRack({cluster_name:r.Hosts.cluster_name,context:a,hosts:i.data,rack:l}).then(function(e){1==e.code&&n.setState({operateText:null,modalHasErr:!1})}).catch(function(e){n.setState({modalLoading:!1,modalHasErr:!0})})}},n.closeOperateModal=function(){n.setState({operateText:null})},n.rackChange=function(e){var t=e.target.value;t=0==t.indexOf("/")?t:"/"+t,n.setState({newRack:t})},n.state={loading:!1},n}return(0,E.default)(t,e),(0,h.default)(t,[{key:"componentWillReceiveProps",value:function(e){e&&e.currentCluster&&(this.old&&this.old.clusterName!==e.currentCluster.clusterName&&this.props.history.push("/hosts"),this.old=e.currentCluster)}},{key:"render",value:function(){var e=this,t=this.props.match.url,a=location.pathname,u=this.props.match.params.host,c=this.state,d=c.activeKey,m=c.operateText,f=c.newRack,p=c.modalHasErr,h=this.props.currentCluster,v=this.props.warningNumber&&this.props.warningNumber.CRITICAL||0;return h&&0==h.length?_.default.createElement(k.default,null):h?_.default.createElement("div",{className:"hostPage"},_.default.createElement(L.default,{selectChange:this.clusterChange}),_.default.createElement("div",{className:"hostPageContent"},_.default.createElement(s.default,{separator:" > ",className:"hostPageBreadcrumb"},_.default.createElement(s.default.Item,null,_.default.createElement(S.Link,{to:"/hosts"},"主机")),_.default.createElement(s.default.Item,null,u)),t===a&&_.default.createElement(S.Redirect,{exact:!0,from:"/hosts/"+u,to:"/hosts/"+u+"/summary"}),_.default.createElement(g.default,{activeKey:d||"summary",className:"leapHostsTabs",onChange:this.tabChange,type:"card",tabBarExtraContent:this.tabBarExtraContent()},_.default.createElement(w,{tab:_.default.createElement(S.Link,{to:"/hosts/"+u+"/summary"},"概览"),key:"summary"},_.default.createElement(S.Route,{path:"/hosts/"+u+"/summary",component:C.default})),_.default.createElement(w,{tab:_.default.createElement(S.Link,{to:"/hosts/"+u+"/alerts"},_.default.createElement(r.default,{className:"tabWarnBadge",count:v},"告警")),key:"alerts"},_.default.createElement(S.Route,{path:"/hosts/"+u+"/alerts",component:b.default})),_.default.createElement(w,{tab:_.default.createElement(S.Link,{to:"/hosts/"+u+"/versions"},"版本"),key:"versions"},_.default.createElement(S.Route,{path:"/hosts/"+u+"/versions",component:M.default})))),_.default.createElement(n.default,{title:"设置Rack"==m?m:"确认批量操作",className:"设置Rack"==m?"setRackModal":"hostOperateModal",visible:!!m,onCancel:this.closeOperateModal,maskClosable:!1,footer:_.default.createElement(i.default,{type:"primary",onClick:this.modalSureHandle},"确定")},m&&"设置Rack"!=m?_.default.createElement("div",null,"确认?"):_.default.createElement("div",null,_.default.createElement("label",null,"Rack:"),_.default.createElement(l.default,{ref:function(t){return e.rackIpt=t},value:f,onChange:this.rackChange}),_.default.createElement("p",{style:{color:p?"red":"#999"}},p?"Rack更改失败":"应以斜杠开始，可以包含字母、数字、点、连字符和斜杠")))):_.default.createElement(o.default,{spinning:!0,style:{width:"100%",height:"100%"}})}}]),t}(y.Component),T=(0,S.connect)(function(e){return{warningNumber:e.host.summaryInfo&&e.host.summaryInfo.alerts_summary,hostinfo:e.host.hostinfo,clusterList:e.app.clusterList,currentCluster:e.app.currentCluster}})(I);t.default=T},708:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={INFRA_MYSQL_SERVER:{id:1,name:"INFRA_MYSQL_SERVER",displayName:"Infra MySQL Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:1,service_name:"AMBARI_INFRA",service_dname:"Leap Infra",service_id:1},METRICS_COLLECTOR:{id:2,name:"METRICS_COLLECTOR",displayName:"Metrics Collector",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:2,service_name:"AMBARI_METRICS",service_dname:"Metrics",service_id:2},METRICS_GRAFANA:{id:3,name:"METRICS_GRAFANA",displayName:"Grafana",cardinality:"0-1",detailUrl:null,category:"MASTER",minMemory:1024,maxMemory:1024,belongService:2,service_name:"AMBARI_METRICS",service_dname:"Metrics",service_id:2},METRICS_MONITOR:{id:4,name:"METRICS_MONITOR",displayName:"Metrics Monitor",cardinality:"ALL",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:524288,belongService:2,service_name:"AMBARI_METRICS",service_dname:"Metrics",service_id:2},ELASTICSEARCH:{id:5,name:"ELASTICSEARCH",displayName:"Elastic Search Node",cardinality:"0+",detailUrl:null,category:"SLAVE",minMemory:262144,maxMemory:1048576,belongService:3,service_name:"ELK",service_dname:"ELK",service_id:3},KIBANA_SERVER:{id:6,name:"KIBANA_SERVER",displayName:"Kibana Server",cardinality:"0+",detailUrl:null,category:"SLAVE",minMemory:262144,maxMemory:524288,belongService:3,service_name:"ELK",service_dname:"ELK",service_id:3},LOGSTASH_AGENT:{id:7,name:"LOGSTASH_AGENT",displayName:"Logstash Agent",cardinality:"0+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:524288,belongService:3,service_name:"ELK",service_dname:"ELK",service_id:3},FLUME_HANDLER:{id:8,name:"FLUME_HANDLER",displayName:"Flume",cardinality:"1+",detailUrl:null,category:"SLAVE",minMemory:131072,maxMemory:1048576,belongService:4,service_name:"FLUME",service_dname:"Flume",service_id:4},HADOOP_KMS_SERVER:{id:9,name:"HADOOP_KMS_SERVER",displayName:"Hadoop KMS Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:5,service_name:"HADOOP_KMS",service_dname:"KMS",service_id:5},HBASE_CLIENT:{id:10,name:"HBASE_CLIENT",displayName:"HBase Client",cardinality:"1+",detailUrl:null,category:"CLIENT",minMemory:1024,maxMemory:1024,belongService:6,service_name:"HBASE",service_dname:"HBase",service_id:6},HBASE_MASTER:{id:11,name:"HBASE_MASTER",displayName:"HBase Master",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:4194304,belongService:6,service_name:"HBASE",service_dname:"HBase",service_id:6},HBASE_REGIONSERVER:{id:12,name:"HBASE_REGIONSERVER",displayName:"RegionServer",cardinality:"1+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:4194304,belongService:6,service_name:"HBASE",service_dname:"HBase",service_id:6},DATANODE:{id:13,name:"DATANODE",displayName:"DataNode",cardinality:"1+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:1048576,belongService:7,service_name:"HDFS",service_dname:"HDFS",service_id:7},HDFS_CLIENT:{id:14,name:"HDFS_CLIENT",displayName:"HDFS Client",cardinality:"1+",detailUrl:null,category:"CLIENT",minMemory:1024,maxMemory:1024,belongService:7,service_name:"HDFS",service_dname:"HDFS",service_id:7},JOURNALNODE:{id:15,name:"JOURNALNODE",displayName:"JournalNode",cardinality:"0+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:1048576,belongService:7,service_name:"HDFS",service_dname:"HDFS",service_id:7},NAMENODE:{id:16,name:"NAMENODE",displayName:"NameNode",cardinality:"1-2",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:7,service_name:"HDFS",service_dname:"HDFS",service_id:7},NFS_GATEWAY:{id:17,name:"NFS_GATEWAY",displayName:"NFSGateway",cardinality:"0+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:1048576,belongService:7,service_name:"HDFS",service_dname:"HDFS",service_id:7},SECONDARY_NAMENODE:{id:18,name:"SECONDARY_NAMENODE",displayName:"SNameNode",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:7,service_name:"HDFS",service_dname:"HDFS",service_id:7},ZKFC:{id:19,name:"ZKFC",displayName:"ZKFailoverController",cardinality:"0+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:1048576,belongService:7,service_name:"HDFS",service_dname:"HDFS",service_id:7},HCAT:{id:20,name:"HCAT",displayName:"HCat Client",cardinality:"0+",detailUrl:null,category:"CLIENT",minMemory:1024,maxMemory:1024,belongService:8,service_name:"HIVE",service_dname:"Hive",service_id:8},HIVE_CLIENT:{id:21,name:"HIVE_CLIENT",displayName:"Hive Client",cardinality:"1+",detailUrl:null,category:"CLIENT",minMemory:1024,maxMemory:1024,belongService:8,service_name:"HIVE",service_dname:"Hive",service_id:8},HIVE_METASTORE:{id:22,name:"HIVE_METASTORE",displayName:"Hive Metastore",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:262144,maxMemory:262144,belongService:8,service_name:"HIVE",service_dname:"Hive",service_id:8},HIVE_SERVER:{id:23,name:"HIVE_SERVER",displayName:"HiveServer2",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:8,service_name:"HIVE",service_dname:"Hive",service_id:8},WEBHCAT_SERVER:{id:25,name:"WEBHCAT_SERVER",displayName:"WebHCat Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:8,service_name:"HIVE",service_dname:"Hive",service_id:8},IMPALA_CATALOG_SERVICE:{id:26,name:"IMPALA_CATALOG_SERVICE",displayName:"Impala_Catalog_Service",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:9,service_name:"IMPALA",service_dname:"Impala",service_id:9},IMPALA_DAEMON:{id:27,name:"IMPALA_DAEMON",displayName:"Impala_Daemon",cardinality:"1+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:524288,belongService:9,service_name:"IMPALA",service_dname:"Impala",service_id:9},IMPALA_STATE_STORE:{id:28,name:"IMPALA_STATE_STORE",displayName:"Impala_State_Store",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:131072,maxMemory:262144,belongService:9,service_name:"IMPALA",service_dname:"Impala",service_id:9},KAFKA_BROKER:{id:29,name:"KAFKA_BROKER",displayName:"Kafka Broker",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:1048576,maxMemory:1048576,belongService:10,service_name:"KAFKA",service_dname:"Kafka",service_id:10},KERBEROS_CLIENT:{id:30,name:"KERBEROS_CLIENT",displayName:"Kerberos Client",cardinality:"ALL",detailUrl:null,category:"CLIENT",minMemory:524288,maxMemory:524288,belongService:11,service_name:"KERBEROS",service_dname:"Kerberos",service_id:11},DATAHUB:{id:31,name:"DATAHUB",displayName:"DATA HUB",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:12,service_name:"LEAPDATAHUB",service_dname:"DATA HUB",service_id:12},LEAPID_ADMIN:{id:32,name:"LEAPID_ADMIN",displayName:"User Admin",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:13,service_name:"LEAPID",service_dname:"User Admin",service_id:13},PROCESS:{id:33,name:"PROCESS",displayName:"Task Scheduler",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:14,service_name:"LEAPPROCESS",service_dname:"Task Scheduler",service_id:14},SQLS:{id:34,name:"SQLS",displayName:"SQL Editor",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:15,service_name:"LEAPSQL",service_dname:"SQL Editor",service_id:15},LOGSEARCH_LOGFEEDER:{id:35,name:"LOGSEARCH_LOGFEEDER",displayName:"Log Feeder",cardinality:"ALL",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:1048576,belongService:16,service_name:"LOGSEARCH",service_dname:"Log Search",service_id:16},LOGSEARCH_SERVER:{id:36,name:"LOGSEARCH_SERVER",displayName:"Log Search Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:16,service_name:"LOGSEARCH",service_dname:"Log Search",service_id:16},LOGSEARCH_SOLR:{id:37,name:"LOGSEARCH_SOLR",displayName:"Log Search Solr Instance",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:16,service_name:"LOGSEARCH",service_dname:"Log Search",service_id:16},LOGSEARCH_SOLR_CLIENT:{id:38,name:"LOGSEARCH_SOLR_CLIENT",displayName:"Log Search Solr Client",cardinality:"0+",detailUrl:null,category:"CLIENT",minMemory:524288,maxMemory:524288,belongService:16,service_name:"LOGSEARCH",service_dname:"Log Search",service_id:16},HISTORYSERVER:{id:39,name:"HISTORYSERVER",displayName:"History Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:17,service_name:"MAPREDUCE2",service_dname:"MapReduce2",service_id:17},MAPREDUCE2_CLIENT:{id:40,name:"MAPREDUCE2_CLIENT",displayName:"MapReduce2 Client",cardinality:"0+",detailUrl:null,category:"CLIENT",minMemory:524288,maxMemory:524288,belongService:17,service_name:"MAPREDUCE2",service_dname:"MapReduce2",service_id:17},SENTRY_STORE:{id:41,name:"SENTRY_STORE",displayName:"Sentry_Store",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:2097152,belongService:18,service_name:"SENTRY",service_dname:"Sentry",service_id:18},REDIS_SERVER:{id:42,name:"REDIS_SERVER",displayName:"Redis Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:19,service_name:"SPARK2",service_dname:"Spark2",service_id:19},SPARK2_CLIENT:{id:43,name:"SPARK2_CLIENT",displayName:"Spark2 Client",cardinality:"1+",detailUrl:null,category:"CLIENT",minMemory:1024,maxMemory:1024,belongService:19,service_name:"SPARK2",service_dname:"Spark2",service_id:19},SPARK2_JOBHISTORYSERVER:{id:44,name:"SPARK2_JOBHISTORYSERVER",displayName:"Spark2 History Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:19,service_name:"SPARK2",service_dname:"Spark2",service_id:19},SPARK2_THRIFTSERVER:{id:45,name:"SPARK2_THRIFTSERVER",displayName:"Spark2 Thrift Server",cardinality:"0+",detailUrl:null,category:"SLAVE",minMemory:524288,maxMemory:4194304,belongService:19,service_name:"SPARK2",service_dname:"Spark2",service_id:19},SQOOP:{id:46,name:"SQOOP",displayName:"Sqoop Client",cardinality:"1+",detailUrl:null,category:"CLIENT",minMemory:1024,maxMemory:1024,belongService:20,service_name:"SQOOP",service_dname:"Sqoop",service_id:20},DRPC_SERVER:{id:47,name:"DRPC_SERVER",displayName:"DRPC Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:524288,belongService:21,service_name:"STORM",service_dname:"Storm",service_id:21},NIMBUS:{id:48,name:"NIMBUS",displayName:"Nimbus",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:1048576,maxMemory:2097152,belongService:21,service_name:"STORM",service_dname:"Storm",service_id:21},STORM_UI_SERVER:{id:49,name:"STORM_UI_SERVER",displayName:"Storm UI Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:1048576,maxMemory:2097152,belongService:21,service_name:"STORM",service_dname:"Storm",service_id:21},SUPERVISOR:{id:50,name:"SUPERVISOR",displayName:"Supervisor",cardinality:"1+",detailUrl:null,category:"SLAVE",minMemory:1048576,maxMemory:2097152,belongService:21,service_name:"STORM",service_dname:"Storm",service_id:21},APP_TIMELINE_SERVER:{id:51,name:"APP_TIMELINE_SERVER",displayName:"App Timeline Server",cardinality:"1",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:22,service_name:"YARN",service_dname:"YARN",service_id:22},NODEMANAGER:{id:52,name:"NODEMANAGER",displayName:"NodeManager",cardinality:"1+",detailUrl:null,category:"SLAVE",minMemory:1024,maxMemory:1024,belongService:22,service_name:"YARN",service_dname:"YARN",service_id:22},RESOURCEMANAGER:{id:53,name:"RESOURCEMANAGER",displayName:"ResourceManager",cardinality:"1-2",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:22,service_name:"YARN",service_dname:"YARN",service_id:22},YARN_CLIENT:{id:54,name:"YARN_CLIENT",displayName:"YARN Client",cardinality:"1+",detailUrl:null,category:"CLIENT",minMemory:524288,maxMemory:524288,belongService:22,service_name:"YARN",service_dname:"YARN",service_id:22},ZOOKEEPER_CLIENT:{id:55,name:"ZOOKEEPER_CLIENT",displayName:"ZooKeeper Client",cardinality:"1+",detailUrl:null,category:"CLIENT",minMemory:1024,maxMemory:1024,belongService:23,service_name:"ZOOKEEPER",service_dname:"ZooKeeper",service_id:23},ZOOKEEPER_SERVER:{id:56,name:"ZOOKEEPER_SERVER",displayName:"ZooKeeper Server",cardinality:"1+",detailUrl:null,category:"MASTER",minMemory:524288,maxMemory:1048576,belongService:23,service_name:"ZOOKEEPER",service_dname:"ZooKeeper",service_id:23}};t.allComponents=n,t.default=n},709:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=y(a(37)),l=y(a(40)),r=y(a(96)),s=y(a(17)),o=y(a(14)),u=y(a(12)),i=y(a(4)),c=y(a(6)),d=y(a(3)),m=y(a(5)),f=y(a(134));a(36),a(34),a(95),a(20),a(22),a(133);var p=a(1),h=y(p),v=a(11),E=y(a(327)),g=y(a(326));function y(e){return e&&e.__esModule?e:{default:e}}f.default.config({top:200});var _=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.menuChange=function(e){var t=e.keyPath,n=e.domEvent.target.dataset.text||e.domEvent.target.getAttribute("data-text"),l=a.props,r=l.hostLists,s=l.selectedRowKeys,o=l.chooseHost,u=[];"choose"==t[2]&&s&&s.length>0?r.map(function(e){s.includes(e.Hosts.host_name)&&u.push(e)}):u="filter"==t[2]?o:r;var i={operateText:n,operateData:u,operateType:t};a.setState(i)},a.modalSureHandle=function(){var e=a.state,t=e.operateText,n=e.operateData,l=e.operateType,r=l[0],s=l[1];if(0==r.indexOf("start")||r.indexOf("stop")>=0||"reinstall"==r){var o=void 0,u=void 0;"host"==s&&"reinstall"!=r?u=o=(0,g.default)(n,2):"reinstall"==r&&(o=(0,g.default)(n,0),"reinstall"==r&&(u="HostRoles/host_name.in("+o.hostsStr+")&HostRoles/state=INSTALL_FAILED")),v.actions.host.postOperate({state:r.indexOf("start")>=0?"STARTED":"INSTALLED",clusterName:n[0].Hosts.cluster_name,context:t,level:"host"==s?"CLUSTER":"SERVICE",query:u}).then(function(e){1==e.code&&a.setState({operateText:null})})}if("restartAll"==r){var i=(0,g.default)(n,1);v.actions.host.restartAllComponents({clusterName:n[0].Hosts.cluster_name,filters:i.data}).then(function(e){1==e.code&&a.setState({operateText:null})})}if("open"==r||"close"==r){var c=(0,g.default)(n,0),d="",m="open"==r?"ON":"OFF";if(n.map(function(e,t){e.Hosts.maintenance_state==m&&(d+=(0!=t?",":"")+e.Hosts.host_name)}),d==c.data)return f.default.error("open"==r?"所选主机已处于维护模式":"所选主机已关闭维护模式"),void a.setState({operateText:null});v.actions.host.openOrCloseMaintenance({clusterName:n[0].Hosts.cluster_name,context:t,hostsStr:c.data,isOpen:"open"==r?"ON":"OFF"}).then(function(e){1==e.code&&a.setState({operateText:null})})}if("setRack"==r){var p=a.state,h=p.operateData,E=p.operateText,y=p.newRack;if(!y)return;var _=(0,g.default)(h,0);v.actions.host.setHostRack({cluster_name:h[0].Hosts.cluster_name,context:E,hosts:_.data,rack:y}).then(function(e){1==e.code&&a.setState({operateText:null})})}},a.closeOerateModal=function(){a.setState({operateText:null})},a.rackChange=function(e){var t=e.target.value;t=0==t.indexOf("/")?t:"/"+t,a.setState({newRack:t})},a.state={newRack:"/"},a}return(0,m.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.hostLists,u=t.selectedRowKeys,i=t.chooseHost,c=this.state,d=c.operateText,m=c.newRack,f=i||a;return h.default.createElement("div",null,h.default.createElement(r.default,{overlayClassName:"hostOperate",placement:"bottomLeft",content:h.default.createElement(E.default,{onChange:this.menuChange,all:a&&a.length,choose:u.length||0}),trigger:"click"},h.default.createElement(s.default,{style:{marginBottom:"10px"}},"操作 ",h.default.createElement(o.default,{type:"caret-down"}))),h.default.createElement(n.default,{title:"设置Rack"==d?d:"确认批量操作",className:"设置Rack"==d?"setRackModal":"hostOperateModal",visible:!!d,onCancel:this.closeOerateModal,maskClosable:!1,footer:h.default.createElement(s.default,{type:"primary",loading:!d,onClick:this.modalSureHandle},"确定")},d&&"设置Rack"!=d?h.default.createElement("div",null,"确认要在下面",f&&f.length,"个主机上",h.default.createElement("b",null,d),"吗?",h.default.createElement("ul",null,f&&f.map(function(e){return h.default.createElement("li",{key:e.href},e.Hosts.host_name)}))):h.default.createElement("div",null,h.default.createElement("label",null,"Rack:"),h.default.createElement(l.default,{ref:function(t){return e.rackIpt=t},value:m,onChange:this.rackChange}))))}}]),t}(p.Component);t.default=_},711:function(e,t,a){},712:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=L(a(78)),l=L(a(40)),r=L(a(37)),s=L(a(17)),o=L(a(39)),u=L(a(50)),i=L(a(76)),c=L(a(168)),d=L(a(44)),m=L(a(14)),f=L(a(26)),p=L(a(25)),h=L(a(12)),v=L(a(4)),E=L(a(6)),g=L(a(3)),y=L(a(5));a(99),a(34),a(36),a(20),a(38),a(49),a(167),a(48),a(22);var _=a(1),S=L(_),N=a(11),C=(L(a(327)),a(89));a(711);var b=L(a(66)),M=L(a(709)),k=a(708),A=L(a(69));function L(e){return e&&e.__esModule?e:{default:e}}var R=function(e){function t(e){var a=this;(0,v.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,h.default)(t)).call(this,e));return n.clusterChange=function(e){n.setState({loading:!0}),N.actions.host.getHostList({clusterName:e.clusterName}).then(function(e){n.setState({loading:!1})})},n.chooseHost=function(e){var t;N.actions.host.setCurrentHost(e).then((t=(0,p.default)(f.default.mark(function t(l){var r;return f.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.Hosts.host_name,clearInterval(n.timer),n.timer=null,n.props.history.push("hosts/"+r);case 4:case"end":return t.stop()}},t,a)})),function(e){return t.apply(this,arguments)}))},n.columns=function(){return[{title:"名称",key:"Hosts.host_name",render:function(e){var t=e.alerts_summary,a=t.CRITICAL,l=(t.UNKNOWN,t.WARNING,"所有组件正常"),r="check-circle",s=n.formatData(e.host_components),o=s.master.length>0?"master":"slave";return a>0&&(l="以下"+o+"组件有故障: \r\n "+s[o].join(", "),r="master"==o?"warning":"minus-circle"),"ON"==e.Hosts.maintenance_state&&(l="该主机处于维护模式",r="medicine-box"),S.default.createElement("span",{className:"goHostDetail",onClick:n.chooseHost.bind(n,e)},S.default.createElement(d.default,{overlayClassName:"progressTooltip",placement:"right",title:l,getPopupContainer:function(){return document.querySelector(".goHostDetail")}},S.default.createElement(m.default,{type:r,className:"stateIcon "+r})),S.default.createElement("span",null,e.Hosts.host_name))}},{title:"IP地址",dataIndex:"Hosts.ip"},{title:"Pack",dataIndex:"Hosts.rack_info"},{title:"内核",key:"Hosts.ph_cpu_count",render:function(e){return S.default.createElement("span",null,e.Hosts.cpu_count,"(",e.Hosts.ph_cpu_count,")")}},{title:"RAM",dataIndex:"Hosts.total_mem",render:function(e){return S.default.createElement("span",null,(e/1024/1024).toFixed(2),"GB")}},{title:"磁盘用量",dataIndex:"metrics.disk",render:function(e){if(!e)return S.default.createElement(d.default,{overlayClassName:"progressTooltip",placement:"top",title:"数据不可用"},S.default.createElement(c.default,{className:"diskPercent",percent:0,showInfo:!1}));var t=e.disk_total-e.disk_free,a=t/e.disk_total*100;return S.default.createElement(d.default,{overlayClassName:"progressTooltip",placement:"top",title:t.toFixed(2)+"GB/"+e.disk_total.toFixed(2)+"GB("+a.toFixed(2)+"%使用)"},S.default.createElement(c.default,{className:"diskPercent",percent:+a.toFixed(2),showInfo:!1}))}},{title:"平均负载",dataIndex:"metrics.load.load_one",render:function(e){return e||0==e?S.default.createElement("span",{style:{paddingLeft:"6px"}},e):S.default.createElement(d.default,{placement:"left",title:"没有可用数据, Metrics可能没有安装"},S.default.createElement(m.default,{style:{color:"red",fontSize:"20px"},type:"question"}))}},{title:"版本",dataIndex:"stack_versions",render:function(e){var t=e[0].repository_versions[0].RepositoryVersions.display_name;return S.default.createElement("span",null,t)}},{title:"组件",dataIndex:"host_components",render:function(e){return S.default.createElement("span",{className:"lookAtComponents",onClick:n.showAllComponents(e)},e.length," 组件")}}]},n.formatData=function(e){var t=[],a=[];return e.map(function(e){var n=e.HostRoles;"INSTALLED"==n.state&&("MASTER"!=k.allComponents[n.component_name].category?t.push(n.display_name):a.push(n.display_name))}),{master:a,slave:t}},n.showAllComponents=function(e){return function(){n.setState({host_components:e,modalTile:"组件",modalClass:"componentsModal"})}},n.closeModal=function(){n.setState({host_components:null})},n.getComponentData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=[],n=e.map(function(e){return e.Hosts.host_name}).join(",");return 1==t?e&&e.map(function(e){var t=e.host_components,n=e.Hosts.host_name;t&&t.map(function(e){(0,i.default)(a).includes()&&a.push({service_name:e.HostRoles.service_name,component_name:e.HostRoles.component_name,hosts:n})})}):2==t?e&&e.map(function(e){var t="",n=e.host_components;n&&n.map(function(e){t+=e.HostRoles.component_name}),a.push(t)}):a=n,{data:a,hostsStr:n}},n.menuChange=function(e){var t=e.keyPath,a=e.domEvent.target.dataset.text||e.domEvent.target.getAttribute("data-text"),l=n.props.hostLists,r=n.state,s=r.selectedRowKeys,o=r.chooseHost,u=[];"choose"==t[2]&&s&&s.length>0?l.map(function(e){s.includes(e.Hosts.host_name)&&u.push(e)}):u="filter"==t[2]?o:l;var i={operateText:a,operateData:u,operateType:t};"setRack"==t[0]&&(i.setRackModal=!0),n.setState(i,function(){n.rackIpt&&n.rackIpt.focus()})},n.modalSureHandle=function(){var e=n.state,t=e.operateData,a=e.operateText,l=e.operateType,r=l[0],s=l[1];if(0==r.indexOf("start")||r.indexOf("stop")>=0){var o=n.getComponentData(t,2),u=o.data,i=o.hostsStr;N.actions.host.postOperate({state:r.indexOf("start")>=0?"STARTED":"INSTALLED",clusterName:t[0].Hosts.cluster_name,context:a,hostsStr:i,components:u,level:"host"==s?"CLUSTER":"SERVICE"}).then(function(e){console.log(e)})}if("reinstall"==r){var c=n.getComponentData(t,0),d=(c.data,c.hostsStr);N.actions.host.installFailedComponents({clusterName:t[0].Hosts.cluster_name,context:a,hostsStr:d}).then(function(e){console.log(e)})}if("DataNode"!=s&&"Regionserver"!=s||n.setState({curOperateService:s}),"open"==r||"close"==r){var m=n.getComponentData(t,1),f=(m.data,m.hostsStr);N.actions.host.openOrCloseMaintenance({clusterName:t[0].Hosts.cluster_name,context:a,hostsStr:f,isOpen:"open"==r?"ON":"OFF"}).then(function(e){console.log(e)})}var p=n.props.currentCluster;N.actions.host.getHostList({clusterName:p.clusterName})},n.closeRestartModal=function(){n.setState({curOperateService:null,operateText:null})},n.restartSure=function(){n.setState({curOperateService:null,operateText:null})},n.formChange=function(e,t){var a=n.state.restartData,l=t.target.checked||t.target.value;a[e]=l,n.setState({restartData:a})},n.rackChange=function(e){n.setState({newRack:e.target.value})},n.setRackSure=function(){var e=n.state.newRack;if(e){var t,l=n.state,r=l.operateData,s=l.operateText,o=(l.operateType,n.getComponentData(r,0).hostsStr);n.setState({loading:!0}),N.actions.host.setHostRack({clusterName:r[0].Hosts.cluster_name,context:s,hostsStr:o,rack:e}).then((t=(0,p.default)(f.default.mark(function e(t){return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.actions.host.getHostList({clusterName:r[0].Hosts.cluster_name});case 2:n.setState({setRackModal:!1,operateText:null,loading:!1});case 3:case"end":return e.stop()}},e,a)})),function(e){return t.apply(this,arguments)}))}},n.closeRackModal=function(){n.setState({setRackModal:!1,operateText:null})},n.closeOerateModal=function(){n.setState({operateText:null})},n.rowSelection=function(){return{onChange:function(e,t){n.setState({selectedRowKeys:e,chooseHost:t})},selectedRowKeys:n.state.selectedRowKeys}},n.state={selectedRowKeys:[],restartData:{}},n.host_components=["startAll","stopAll"],n.requests=["restart"],n}return(0,y.default)(t,e),(0,E.default)(t,[{key:"componentDidMount",value:function(){var e=(0,p.default)(f.default.mark(function e(){var t,a=this;return f.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.hostLists,e.next=3,N.actions.app.getClusterList().then(function(e){0==e.length&&C.history.push("/noCluster"),e&&e.length>0&&(!t&&N.actions.host.getHostList({clusterName:e[0].clusterName}),a.timer=setInterval(function(){var e=a.props.currentCluster;N.actions.host.getHostList({clusterName:e.clusterName})},4e3))});case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.timer),this.timer=null}},{key:"render",value:function(){var e=this,t=this.props,a=t.hostLists,i=t.clusterList,c=t.currentCluster,d=this.state,m=d.selectedRowKeys,f=d.loading,p=d.restartData,h=d.curOperateService,v=d.setRackModal,E=d.newRack,g=d.host_components,y=d.chooseHost,_=d.operateText,N=y||a;return i&&0==i.length?S.default.createElement(b.default,null):c?S.default.createElement("div",{className:"hostManage"},S.default.createElement(A.default,{selectChange:this.clusterChange}),S.default.createElement(u.default,{spinning:f||!a,wrapperClassName:"hostSpin"},S.default.createElement("div",{className:"hM_content"},S.default.createElement(M.default,{hostLists:a,selectedRowKeys:m,chooseHost:y}),S.default.createElement(o.default,{bordered:!0,dataSource:a,columns:this.columns(),rowSelection:this.rowSelection(),rowKey:function(e){return e.Hosts.host_name},Pagination:!1}))),S.default.createElement(r.default,{title:"组件",className:"componentsModal",visible:!!g,onCancel:this.closeModal,footer:S.default.createElement(s.default,{type:"primary",onClick:this.closeModal},"确定")},S.default.createElement("p",null,g&&g[0].HostRoles.host_name),S.default.createElement("ul",null,g&&g.map(function(e){return S.default.createElement("li",{key:e.href},e.HostRoles.component_name)}))),S.default.createElement(r.default,{title:"确认批量操作",className:"hostOperateModal",visible:!(!_||v),onCancel:this.closeOerateModal,footer:S.default.createElement(s.default,{type:"primary",onClick:this.modalSureHandle},"确定")},"确认要在下面",N&&N.length,"个主机上",S.default.createElement("b",null,_),"吗?",S.default.createElement("ul",null,N&&N.map(function(e){return S.default.createElement("li",{key:e.href},e.Hosts.host_name)}))),S.default.createElement(r.default,{title:"设置Rack",className:"setRackModal",visible:v,onCancel:this.closeRackModal,footer:S.default.createElement(s.default,{loading:f,type:"primary",onClick:this.setRackSure},"确定")},S.default.createElement("div",null,S.default.createElement("label",null,"Rack:"),S.default.createElement(l.default,{ref:function(t){return e.rackIpt=t},value:E,onChange:this.rackChange}))),S.default.createElement(r.default,{title:"重启 "+h+"s",className:"restartServiceModal",visible:!!h,onCancel:this.closeRestartModal,footer:S.default.createElement(s.default,{type:"primary",onClick:this.restartSure},"确定")},S.default.createElement("div",null,S.default.createElement("div",{className:"tips"},S.default.createElement("p",null,"这会启动指定数量的 ",h,"。"),S.default.createElement("p",null,"提示: 这将触发告警. 要防止告警，请在触发滚动重启前，为HDFS开启维护模式")),S.default.createElement("div",{className:"row times"},S.default.createElement("label",null,"重启:"),S.default.createElement(l.default,{onChange:this.formChange.bind(this,"restart"),value:p.restart}),h,"/每次"),S.default.createElement("div",{className:"row wait"},S.default.createElement("label",null,"批次之间等待:"),S.default.createElement(l.default,{onChange:this.formChange.bind(this,"wait"),value:p.wait}),"秒"),S.default.createElement("div",{className:"row send"},S.default.createElement("label",null,"发送:"),S.default.createElement(l.default,{onChange:this.formChange.bind(this,"send"),value:p.send}),"次失败重启"),S.default.createElement("div",{className:"row checked"},S.default.createElement(n.default,{onChange:this.formChange.bind(this,"overdue"),checked:p.overdue},"只重启配置过期的DataNode"),S.default.createElement(n.default,{onChange:this.formChange.bind(this,"HDFS"),checked:p.HDFS},"为HDFS打开维护模式"))))):S.default.createElement(u.default,{spinning:!0,style:{width:"100%",height:"100%"}})}}]),t}(_.Component),w=(0,N.connect)(function(e){return{hostLists:e.host.hostLists,clusterList:e.app.clusterList,currentCluster:e.app.currentCluster}})(R);t.default=w},714:function(e,t,a){},717:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=A(a(17)),l=A(a(229)),r=A(a(39)),s=A(a(40)),o=A(a(26)),u=A(a(134)),i=A(a(25)),c=A(a(65)),d=A(a(8)),m=A(a(18)),f=A(a(2)),p=A(a(12)),h=A(a(4)),v=A(a(6)),E=A(a(3)),g=A(a(5)),y=A(a(27)),_=A(a(120)),S=A(a(136));a(20),a(226),a(38),a(34),a(133),a(29),a(142),a(135);var N=a(1),C=A(N),b=(A(a(97)),a(11));a(714);var M=a(220),k=A(a(116));function A(e){return e&&e.__esModule?e:{default:e}}S.default.Step;var L=_.default.Group,R=y.default.Option,w=_.default.Button,I=function(e){function t(e){var a=this;(0,h.default)(this,t);var n,l=(0,E.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return l.componentWillMount=function(){var e=l.props.value;e?l.setState((0,f.default)({},e)):b.actions.create.getClusterType().then(function(e){if(e){var t=l.formatData(e,l.state.serviceType),a=l.getFilterData(t);l.setState({datalist:t,filters:a,tableRadioValue:t[0].id,tableRadioData:t[0]})}})},l.setFormValue=function(e,t){var a,n="object"==(void 0===t?"undefined":(0,m.default)(t))?t.target.value:t;if("serviceType"!=e)l.setState((a={},(0,d.default)(a,e,n),(0,d.default)(a,"clusterNameIsEmpty",!1),a));else{var r,s=l.filterData(l.state.instanceConf,n),o=l.getFilterData(s);l.setState((r={},(0,d.default)(r,e,n),(0,d.default)(r,"datalist",s),(0,d.default)(r,"filters",o),r))}},l.selectListChange=function(e,t){var a=l.state.instanceConf;t?a[e]=t:delete a[e];var n=l.filterData(a),r=l.getFilterData(n);if(1==(0,c.default)(a).length){var s=l.props.clusterTypes,o=k.default.cloneDeep(s),u=l.formatData(o,l.state.serviceType),i=[],d=(0,c.default)(a)[0];u.map(function(e){i.includes(e[d])||i.push(e[d])}),r[d]=i}l.setState({instanceConf:a,datalist:n,filters:r})},l.submitHandle=(n=(0,i.default)(o.default.mark(function e(t){var n,r,s,i,c,d,m,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.state,r=n.clustername,s=n.servertype,i=n.servercount,c=n.serviceType,d=n.tableRadioValue,m=n.tableRadioData,r){e.next=4;break}return l.setState({clusterNameIsEmpty:!0}),e.abrupt("return");case 4:if(f={clustername:r,servertype:s,servercount:i,serviceType:c,tableRadioValue:d,tableRadioData:m},!l.props.value){e.next=8;break}return l.props.onsubmit(l.props.value,1,"config"),e.abrupt("return");case 8:return l.setState({loading:!0}),e.next=11,(0,M.createCluster)({clusterAlias:r,servercount:i,servertype:d}).then(function(e){l.setState({loading:!1}),1===e.code?(b.actions.create.setHostList(e.data.vmNodes),f._clusterName=e.data.clusterName,l.props.onsubmit&&l.props.onsubmit(f,1,"config")):u.default.error("创建失败")});case 11:case"end":return e.stop()}},e,a)})),function(e){return n.apply(this,arguments)}),l.setOptions=function(e){return e.map(function(e){return"[object Object]"===Object.prototype.toString.call(e)?C.default.createElement(R,{key:e.value,value:e.value},e.name):C.default.createElement(R,{key:e,value:e},e)})},l.tableRadioChange=function(e){l.setState({tableRadioValue:e.target.value})},l.sortHandle=function(e,t,a){return+e[a].match(/[0-9]\d*/gi)[0]-+t[a].match(/[0-9]\d*/gi)[0]},l.columns=function(){return[{title:"",dataIndex:"id",render:function(e,t,a){return C.default.createElement(_.default,{value:t.id,checked:l.state.tableRadioValue==t.id,onChange:l.tableRadioChange})}},{title:"规格",dataIndex:"name",key:"name",sorter:function(e,t){return l.sortHandle(e,t,"name")}},{title:"vCPU",dataIndex:"vCPU",key:"vCPU",sorter:function(e,t){return l.sortHandle(e,t,"vCPU")}},{title:"内存",dataIndex:"memory",key:"memory",sorter:function(e,t){return l.sortHandle(e,t,"memory")}},{title:"存储",dataIndex:"storage",sorter:function(e,t){return l.sortHandle(e,t,"storage")}},{title:"操作系统",dataIndex:"system",key:"system",sorter:function(e,t){return e.system.charCodeAt()-t.system.charCodeAt()}}]},l.onRowSelectHandle=function(e){return{onClick:function(){l.setState({tableRadioValue:e.id,tableRadioData:e})}}},l.state={tableRadioValue:0,servercount:3,instanceConf:{},selectlist:null,serviceType:"g",servertype:"bigData"},l.tipsObj={},l.ENtoCN={vCPU:"vCPU",memory:"内存",storage:"存储",system:"系统"},l}return(0,g.default)(t,e),(0,v.default)(t,[{key:"formatData",value:function(e,t){var a=[];Array.isArray(e)&&e.length&&e.map(function(e,t){var n=e.split("-"),l=n[0]+" vCPU",r=n[1]+" GB",s=n[2]+" GB";a.push({id:e,vCPU:l,memory:r,storage:s,system:"centos"})});var n=0;return(a=a.map(function(e){var a=e.id.split("-");return"c"==t&&a[1]>=32?(n++,e.name="计算型"+n,e):"m"==t&&a[2]>=100?(n++,e.name="内存型"+n,e):"g"==t&&a[2]<100&&a[1]<32?(n++,e.name="通用型"+n,e):void 0})).filter(function(e){return void 0!=e})}},{key:"filterData",value:function(e,t){var a=this.props.clusterTypes,n=k.default.cloneDeep(a),l=this.formatData(n,t||this.state.serviceType),r=(0,c.default)(e);return 0==r.length||r.map(function(t){var a=e[t];a&&(l=l.filter(function(e){return e[t]===a}))}),l=l.length?l:null,l||[]}},{key:"getFilterData",value:function(e){var t={vCPU:[],memory:[],storage:[],system:[]};return Array.isArray(e)&&e.length&&e.map(function(e){var a=e.id?e.id.split("-"):e.split("-"),n=a[0]+" vCPU",l=a[1]+" GB",r=a[2]+" GB";t.vCPU.includes(n)||t.vCPU.push(n),t.memory.includes(l)||t.memory.push(l),t.storage.includes(r)||t.storage.push(r),t.system.includes("centos")||t.system.push("centos")}),t}},{key:"render",value:function(){var e=this,t=this.state,a=t.clustername,o=(t.servertype,t.servercount),u=t.instanceConf,i=t.loading,d=t.datalist,m=t.filters,f=t.clusterNameIsEmpty,p=t.serviceType,h=t.tableRadioData;return C.default.createElement("div",{className:"configuration stepContent"},C.default.createElement("div",{className:"formItem clusterName "+(f?"error":"")},C.default.createElement("label",null,"集群名称: "),C.default.createElement(s.default,{className:"inputInline clusterNameIpt",placeholder:"",value:a,onChange:this.setFormValue.bind(this,"clustername"),disabled:!!this.props.value}),C.default.createElement("p",{className:"errorTips"},"请输入集群名称")),C.default.createElement("div",{className:"formItem serviceType instance"},C.default.createElement("label",null,"创建服务实例: "),m&&(0,c.default)(m).map(function(t,a){var n=m[t];return C.default.createElement("span",{key:a,className:"selectItem"},C.default.createElement("label",null,e.ENtoCN[t]," "),C.default.createElement(y.default,{value:u[t],allowClear:!0,onChange:e.selectListChange.bind(e,t),placeholder:"请选择"+e.ENtoCN[t]},e.setOptions(n)))})),C.default.createElement("div",{className:"formItem serviceType chooseProduct"},C.default.createElement("span",{className:"classify"},C.default.createElement("label",null,"分类: "),C.default.createElement(L,{defaultValue:"g",size:"large",value:p||"g",onChange:this.setFormValue.bind(this,"serviceType"),className:"buttonSelect"},C.default.createElement(w,{value:"g"},"通用型"),C.default.createElement(w,{value:"c"},"计算型"),C.default.createElement(w,{value:"m"},"内存型"))),!this.props.value&&C.default.createElement(r.default,{bordered:!0,onRow:this.onRowSelectHandle,pagination:!1,loading:!d,rowKey:function(e){return e.id},columns:this.columns(),dataSource:d}),C.default.createElement("div",{className:"currentSelect"},C.default.createElement("label",null,"当前实例选择:"),C.default.createElement("span",null,h?(0,c.default)(h).map(function(e,t){return"id"===e?"":1!=t?", "+h[e]:h[e]}):h)),C.default.createElement("div",{className:"createNumber"},C.default.createElement("label",null,"创建实例数量:"),C.default.createElement("span",null,C.default.createElement(l.default,{min:3,max:10,disabled:!!this.props.value,className:"inputNumber",value:o,onChange:this.setFormValue.bind(this,"servercount")})," 台")),C.default.createElement(n.default,{loading:i,type:"primary",onClick:this.submitHandle,className:"stepNext"},"下一步"),!a&&C.default.createElement("p",{style:{color:"#f5222d",margin:0}},"尚未输入集群名称")))}}]),t}(N.Component),T=(0,b.connect)(function(e){return{clusterTypes:e.create.clusterTypes,selectlist:e.create.clusterFilterList}})(I);t.default=T},718:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;_(a(17));var n=_(a(8)),l=_(a(12)),r=_(a(4)),s=_(a(6)),o=_(a(3)),u=_(a(5)),i=_(a(27)),c=_(a(120)),d=_(a(136));a(20),a(29),a(142),a(135);var m=a(1),f=_(m),p=_(a(717)),h=_(a(333)),v=_(a(332)),E=_(a(221)),g=_(a(331)),y=_(a(330));function _(e){return e&&e.__esModule?e:{default:e}}a(329);var S=d.default.Step,N=(c.default.Group,i.default.Option,c.default.Button,function(e){function t(e){(0,r.default)(this,t);var a=(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.stepHandle=function(e,t,l){var r=a.state.currentStep;r+=t,document.querySelector(".createstepWrapper").scrollTop=0,e=e||a.state[l],a.setState((0,n.default)({currentStep:r},l,e))},a.state={currentStep:0},a.tipsObj={},a}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.state,t=e.currentStep,a=e.config,n=e.installComponent,l=e.installDevTools,r=e.master,s=e.slave;return f.default.createElement("div",{className:"createLeapPlatForm"},f.default.createElement("div",{className:"createClusterInner"},f.default.createElement("h1",{className:"createHeader"},"创建LEAP平台 "),f.default.createElement("div",{className:"createstepWrapper"},f.default.createElement(C,{className:"createSteps",currentStep:t||0,steps:["配置服务器","安装组件","安装开发工具","指派Master","指派slave和client","创建完成"]},function(e,t){return f.default.createElement(S,{key:t,title:e,icon:f.default.createElement("i",null,t+1)})}),f.default.createElement("div",{className:"createClusterScorllWrapper"},0==t&&f.default.createElement(p.default,{value:a,onsubmit:this.stepHandle}),1==t&&f.default.createElement(h.default,{value:n,onsubmit:this.stepHandle}),2==t&&f.default.createElement(v.default,{value:l,components:n,onsubmit:this.stepHandle}),3==t&&f.default.createElement(g.default,{value:r,onsubmit:this.stepHandle}),4==t&&f.default.createElement(y.default,{value:s,master:r,clustername:a&&a._clusterName,onsubmit:this.stepHandle}),5==t&&f.default.createElement(E.default,{title:"创建已完成",pathTo:"/"})))))}}]),t}(m.Component));function C(e){return f.default.createElement(d.default,{current:e.currentStep,className:e.className},e.steps.map(function(t,a){return e.children(t,a)}))}t.default=N},720:function(e,t,a){},722:function(e,t,a){},723:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(39)),l=p(a(84)),r=p(a(12)),s=p(a(4)),o=p(a(6)),u=p(a(3)),i=p(a(5));a(38),a(83);var c=a(1),d=p(c),m=a(11),f=p(a(328));function p(e){return e&&e.__esModule?e:{default:e}}var h=function(e){function t(e){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.showVersionDetail=function(){a.setState({showVersionModal:!0})},a.hideVersionModal=function(){a.setState({showVersionModal:!1})},a.getColumns=function(){return[{title:"",dataIndex:"name",key:"name",width:150},{title:d.default.createElement("div",null,a.props.version,"  ",d.default.createElement("span",{style:{color:"#999"}},"当前")),dataIndex:"versions",key:"versions",render:function(e,t,a){return d.default.createElement(l.default,{color:"#1ACB40"},e)}}]},a.state={showVersionModal:!1,versionModalInfo:123},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){m.actions.components.getHostInfo()}},{key:"render",value:function(){var e=this.props,t=e.componentsListData,a=e.status,l=this.state,r=l.showVersionModal,s=l.versionModalInfo;return d.default.createElement("div",null,d.default.createElement(n.default,{loading:a,bordered:!0,dataSource:t,columns:this.getColumns()}),d.default.createElement(f.default,{showVersionModal:r,versionModalInfo:s,hideVersionModal:this.hideVersionModal}))}}]),t}(c.Component),v=(0,m.connect)(function(e){return{version:e.components.version,status:e.components.status,componentsListData:e.components.componentsListData}})(h);t.default=v},724:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(37)),l=g(a(39)),r=g(a(26)),s=g(a(25)),o=g(a(14)),u=g(a(84)),i=g(a(12)),c=g(a(4)),d=g(a(6)),m=g(a(3)),f=g(a(5));a(36),a(38),a(22),a(83);var p=a(1),h=g(p),v=a(11),E=g(a(334));function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){var a=this;(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.uninstallService=function(e){return function(){n.setState({activeService:e.name,confirmModal:!0})}},n.installService=function(e){return function(){n.setState({modalVisible:!0,serviceName:e.name})}},n.getColumns=function(){return[{title:"组件",dataIndex:"display_name",key:"display_name",render:function(e,t,a){return h.default.createElement(v.Link,{to:"/monitor/services/"+t.name},e)}},{title:"版本",dataIndex:"versions",key:"versions"},{title:"类别",dataIndex:"releaseVersion",key:"releaseVersion",render:function(e,t,a){return h.default.createElement("div",null,"大数据基础组件")}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t,a){return h.default.createElement(u.default,{color:e?"#1ACB40":"#FF5858"},e?"已安装":"未安装")}},{title:"描述",dataIndex:"comment",key:"comment",width:350},{title:"操作",key:"action",width:80,render:function(e,t){return t.status?h.default.createElement("a",{href:"javascript:;",onClick:n.uninstallService(t)},h.default.createElement(o.default,{type:"delete"})," 卸载"):h.default.createElement("a",{href:"javascript:;",style:{color:"#1ACB40"},onClick:n.installService(t)},h.default.createElement(o.default,{type:"plus-circle"})," 安装")}}]},n.modalClose=function(){n.setState({modalVisible:!1})},n.cancelOperate=function(){n.setState({confirmModal:!1})},n.operateOk=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({confirmSubmitLoading:!0}),e.next=3,v.actions.components.uninstallService({serviceName:n.state.activeService,type:"tools"});case 3:n.setState({confirmModal:!1,confirmSubmitLoading:!1});case 4:case"end":return e.stop()}},e,a)})),n.state={modalVisible:!1,serviceName:"",installedServices:[],activeService:"",confirmSubmitLoading:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){0==this.props.hostList.length&&(v.actions.app.getHostList(),v.actions.app.getHostComponents())}},{key:"render",value:function(){var e=this.state,t=e.modalVisible,a=e.serviceName,r=e.confirmModal,s=e.confirmSubmitLoading,o=this.props,u=o.status,i=o.componentsListData,c=o.servicesList,d=o.hostList,m=o.hostComponentsList,f=[];c.forEach(function(e){e.status&&f.push(e.name)});var p=m.master,v=m.slave;return h.default.createElement("div",{className:"devToolWrap"},h.default.createElement(l.default,{rowKey:function(e){return e.name},loading:u,bordered:!0,dataSource:i,columns:this.getColumns()}),h.default.createElement(E.default,{modalVisible:t,callbackParent:this.modalClose,serviceName:a,installType:"component",installedServices:f,installedMaster:p,installedSlave:v,hostList:d}),h.default.createElement(n.default,{title:"提示",visible:r,onOk:this.operateOk,onCancel:this.cancelOperate,confirmLoading:s,okText:"确认",cancelText:"取消"},h.default.createElement("label",null,"确认要卸载吗？")))}}]),t}(p.Component),_=(0,v.connect)(function(e){return{status:e.components.status,componentsListData:e.components.componentsListData,servicesList:e.components.servicesList,currentCluster:e.app.currentCluster,hostList:e.app.hostList,hostComponentsList:e.app.hostComponentsList}})(y);t.default=_},725:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=N(a(37)),l=N(a(14)),r=N(a(96)),s=N(a(17)),o=N(a(12)),u=N(a(4)),i=N(a(6)),c=N(a(3)),d=N(a(5)),m=N(a(27)),f=N(a(57));a(36),a(22),a(95),a(20),a(29),a(56);var p=a(1),h=N(p),v=N(a(724)),E=N(a(723)),g=a(11),y=(a(103),N(a(66))),_=a(166),S=N(a(69));a(720);a(169);function N(e){return e&&e.__esModule?e:{default:e}}var C=f.default.TabPane,b=(m.default.Option,function(e){function t(e){(0,u.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.toggleSearchInput=function(e){var t=a.state.searchInputWidth||0;a.setState({searchInputWidth:200-t})},a.clusterChange=function(e){g.actions.components.getComponentsList("components")},a.operateMenu=function(){return h.default.createElement(r.default,{placement:"bottomRight",overlayClassName:"operateService",content:a.menuContent(),trigger:"hover"},h.default.createElement(s.default,null,"操作"))},a.menuContent=function(){var e=a.props.servicesList;e&&e.map(function(e){return e.serviceStatus});return h.default.createElement("ul",{onClick:a.operate,className:"devToolsOperatMenu"},h.default.createElement("li",{"data-key":"start"},h.default.createElement(l.default,{type:"caret-right"}),"启动所有"),h.default.createElement("li",{"data-key":"stop"},h.default.createElement(l.default,{type:"caret-right stopIcon"}),"停止所有"))},a.operate=function(e){var t=e.target.dataset.key||e.target.getAttribute("data-key");"LI"!==e.target.nodeName&&(t=e.target.parentNode.dataset.key||e.target.parentNode.getAttribute("data-key")),a.setState({type:t})},a.closeOperateModal=function(){a.setState({type:null})},a.modalSureHandle=function(){var e=a.props,t=(e.devTools,e.currentCluster),n=a.state.type;a.setState({loading:!0}),(0,_.startAllService)({cluster_name:t.clusterName,type:n}).then(function(e){1==e.code&&(g.actions.host.updateState({taskModalVisible:!0}),a.setState({type:null,loading:!1}))})},a.state={keyword:"",searchInputWidth:0},a.en2cn={start:"启动",stop:"停止",restart:"重启"},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.props.currentCluster?g.actions.components.getComponentsList("components"):g.actions.app.getClusterList().then(function(e){e&&e.length>0&&g.actions.components.getComponentsList("components")})}},{key:"tabChange",value:function(e){}},{key:"render",value:function(){var e=this.props,t=(e.keyword,e.clusterList),a=this.state,l=a.type,r=a.loading;return t&&0!=t.length?h.default.createElement("div",{className:"componentsWrap"},h.default.createElement(S.default,{selectChange:this.clusterChange}),h.default.createElement(f.default,{className:"tabContent",onChange:this.tabChange.bind(this),type:"card",tabBarExtraContent:this.operateMenu()},h.default.createElement(C,{tab:"组件",key:"1"},h.default.createElement(v.default,null)),h.default.createElement(C,{tab:"版本",key:"2"},h.default.createElement(E.default,null))),h.default.createElement(n.default,{title:"确认",className:"hostOperateModal",visible:!!l,onCancel:this.closeOperateModal,footer:h.default.createElement(s.default,{loading:r,type:"primary",onClick:this.modalSureHandle},"确定")},"确认 ",this.en2cn[l]," 所有服务?")):h.default.createElement(y.default,null)}}]),t}(p.Component)),M=(0,g.connect)(function(e){return{clusterList:e.app.clusterList,currentCluster:e.app.currentCluster,servicesList:e.components.servicesList}})(b);t.default=M},727:function(e,t,a){},728:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=f(a(39)),l=f(a(84)),r=f(a(12)),s=f(a(4)),o=f(a(6)),u=f(a(3)),i=f(a(5));a(38),a(83);var c=a(1),d=f(c),m=a(11);function f(e){return e&&e.__esModule?e:{default:e}}var p=function(e){function t(e){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.getColumns=function(){return[{title:"",dataIndex:"name",key:"name",width:150},{title:d.default.createElement("div",null,a.props.version,"  ",d.default.createElement("span",{style:{color:"#999"}},"当前")),dataIndex:"versions",key:"versions",render:function(e,t,a){return d.default.createElement(l.default,{color:"#1ACB40"},e)}}]},a.state={},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){var e=this.props,t=e.status,a=e.componentsListData;return d.default.createElement("div",null,d.default.createElement(n.default,{loading:t,bordered:!0,dataSource:a,columns:this.getColumns(),pagination:!1}))}}]),t}(c.Component),h=(0,m.connect)(function(e){return{version:e.components.version,status:e.components.status,componentsListData:e.components.componentsListData}})(p);t.default=h},731:function(e,t,a){},733:function(e,t,a){},738:function(e,t,a){},740:function(e,t,a){},742:function(e,t,a){},75:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(2)),l=c(a(119));t.default=function(e){if(e.url&&e.url.indexOf("//")>-1)e.url.split("//")[0],e.url.split("//")[1].split("/")[0];return d(e).then(function(e){var t=e.statusText,a=e.status,r=e.data;return l.default.resolve((0,n.default)({success:!0,message:t,statusCode:a},r))}).catch(function(e){var t=e.response,a=void 0,n=void 0;if(t&&t instanceof Object){var r=t.data,s=t.statusText;n=t.status,a=r.message||s}else n=600,a=e.message||"Network Error";return l.default.reject({success:!1,statusCode:n,message:a})})};var r=c(a(97)),s=c(a(781)),o=c(a(116)),u=a(89),i=c(a(115));function c(e){return e&&e.__esModule?e:{default:e}}r.default.interceptors.request.use(function(e){return"GET"==e.method&&(e.url=e.url.indexOf("?")>0?e.url+"&clearCache="+(new Date).valueOf():e.url+"?clearCache="+(new Date).valueOf()),"post"!=e.method&&"put"!=e.method||e.headers["Content-Type"]||(e.isDataString||(e.data=s.default.stringify(e.data)),e.headers["Content-Type"]="application/x-www-form-urlencoded",e.headers["X-Requested-By"]="X-Requested-By",e.headers["X-Requested-With"]="X-Requested-With"),e},function(e){return l.default.reject(e)}),r.default.interceptors.response.use(function(e){return e.request.responseURL.indexOf("/loginPage")>=0&&-2==e.data.data&&(i.default.remove("LEAP-CLOUD-USERNAME"),sessionStorage.removeItem("currentCluster"),sessionStorage.removeItem("clusterList"),u.history.go("/signin")),e});var d=function(e){var t=e.method,a=void 0===t?"get":t,n=e.data,l=(e.fetchType,e.url),s=o.default.cloneDeep(n);switch(a.toLowerCase()){case"get":return r.default.get(l,{params:s});case"delete":return r.default.delete(l,{data:s},{isDataString:e.isDataString});case"post":return r.default.post(l,s,{isDataString:e.isDataString});case"put":return r.default.put(l,s,{isDataString:e.isDataString});case"patch":return r.default.patch(l,s,{isDataString:e.isDataString});default:return(0,r.default)(e)}}},753:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(37)),l=g(a(39)),r=g(a(26)),s=g(a(25)),o=g(a(14)),u=g(a(84)),i=g(a(12)),c=g(a(4)),d=g(a(6)),m=g(a(3)),f=g(a(5));a(36),a(38),a(22),a(83);var p=a(1),h=g(p),v=a(11),E=g(a(334));function g(e){return e&&e.__esModule?e:{default:e}}var y=function(e){function t(e){var a=this;(0,c.default)(this,t);var n=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return n.getColumns=function(){return[{title:"工具",dataIndex:"display_name",key:"display_name",width:120,render:function(e,t,a){return h.default.createElement(v.Link,{to:"/monitor/services/"+t.name},e)}},{title:"版本",dataIndex:"versions",key:"versions"},{title:"组件分类",dataIndex:"releaseVersion",key:"releaseVersion",render:function(e,t,a){return h.default.createElement("div",null,"大数据基础组件")}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t,a){return h.default.createElement(u.default,{color:e?"#1ACB40":"#FF5858"},e?"已安装":"未安装")}},{title:"描述",dataIndex:"comment",key:"comment",width:350},{title:"操作",key:"action",width:80,render:function(e,t){return t.status?h.default.createElement("a",{href:"javascript:;",onClick:n.uninstallService(t)},h.default.createElement(o.default,{type:"delete"})," 卸载"):h.default.createElement("a",{href:"javascript:;",style:{color:"#1ACB40"},onClick:n.installService(t)},h.default.createElement(o.default,{type:"plus-circle"})," 安装")}}]},n.uninstallService=function(e){return function(){n.setState({activeService:e.name,confirmModal:!0})}},n.installService=function(e){return function(){n.setState({modalVisible:!0,serviceName:e.name})}},n.modalClose=function(){n.setState({modalVisible:!1})},n.cancelOperate=function(){n.setState({confirmModal:!1})},n.operateOk=(0,s.default)(r.default.mark(function e(){return r.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.setState({confirmSubmitLoading:!0}),e.next=3,v.actions.components.uninstallService({serviceName:n.state.activeService,type:"tools"});case 3:n.setState({confirmModal:!1,confirmSubmitLoading:!1});case 4:case"end":return e.stop()}},e,a)})),n.state={modalVisible:!1,serviceName:"",confirmModal:!1,installedServices:[],activeService:"",confirmSubmitLoading:!1},n}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentWillMount",value:function(){0==this.props.hostList.length&&(v.actions.app.getHostList(),v.actions.app.getHostComponents())}},{key:"render",value:function(){var e=this.state,t=e.modalVisible,a=e.serviceName,r=e.confirmModal,s=e.confirmSubmitLoading,o=this.props,u=o.status,i=o.componentsListData,c=o.servicesList,d=o.hostList,m=o.hostComponentsList,f=[];c.forEach(function(e){e.status&&f.push(e.name)});var p=m.master,v=m.slave;return h.default.createElement("div",{className:"devToolWrap"},h.default.createElement(l.default,{loading:u,rowKey:function(e){return e.display_name},bordered:!0,dataSource:i,columns:this.getColumns(),pagination:!1}),h.default.createElement(E.default,{modalVisible:t,callbackParent:this.modalClose,serviceName:a,installType:"tools",installedServices:f,installedMaster:p,installedSlave:v,hostList:d}),h.default.createElement(n.default,{title:"提示",visible:r,onOk:this.operateOk,onCancel:this.cancelOperate,confirmLoading:s,okText:"确认",cancelText:"取消"},h.default.createElement("label",null,"确认要卸载吗？")))}}]),t}(p.Component),_=(0,v.connect)(function(e){return{status:e.components.status,componentsListData:e.components.componentsListData,servicesList:e.components.servicesList,currentCluster:e.app.currentCluster,hostList:e.app.hostList,hostComponentsList:e.app.hostComponentsList}})(y);t.default=_},754:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=N(a(37)),l=N(a(14)),r=N(a(96)),s=N(a(17)),o=N(a(12)),u=N(a(4)),i=N(a(6)),c=N(a(3)),d=N(a(5)),m=N(a(27)),f=N(a(57));a(36),a(22),a(95),a(20),a(29),a(56);var p=a(1),h=N(p),v=N(a(753)),E=N(a(728));a(103);a(727);var g=a(166),y=a(11),_=N(a(66)),S=N(a(69));function N(e){return e&&e.__esModule?e:{default:e}}var C=f.default.TabPane,b=(m.default.Option,function(e){function t(e){(0,u.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.toggleSearchInput=function(e){var t=a.state.searchInputWidth||0;a.setState({searchInputWidth:200-t})},a.clusterChange=function(e){y.actions.components.getComponentsList("tools")},a.operateMenu=function(){return h.default.createElement(r.default,{placement:"bottomRight",overlayClassName:"operateService",content:a.menuContent(),trigger:"hover"},h.default.createElement(s.default,null,"操作"))},a.menuContent=function(){var e=a.props.servicesList;e&&e.map(function(e){return e.serviceStatus});return h.default.createElement("ul",{onClick:a.operate,className:"devToolsOperatMenu"},h.default.createElement("li",{"data-key":"start"},h.default.createElement(l.default,{type:"caret-right"}),"启动所有"),h.default.createElement("li",{"data-key":"stop"},h.default.createElement(l.default,{type:"caret-right stopIcon"}),"停止所有"))},a.operate=function(e){var t=e.target.dataset.key||e.target.getAttribute("data-key");"LI"!==e.target.nodeName&&(t=e.target.parentNode.dataset.key||e.target.parentNode.getAttribute("data-key")),a.setState({type:t})},a.closeOperateModal=function(){a.setState({type:null})},a.modalSureHandle=function(){var e=a.props,t=(e.devTools,e.currentCluster),n=a.state.type;a.setState({loading:!0}),(0,g.startAllService)({cluster_name:t.clusterName,type:n}).then(function(e){1==e.code&&(y.actions.host.updateState({taskModalVisible:!0}),a.setState({type:null,loading:!1}))})},a.state={keyword:"",searchInputWidth:0},a.en2cn={start:"启动",stop:"停止",restart:"重启"},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentWillMount",value:function(){this.props.currentCluster?y.actions.components.getComponentsList("tools"):y.actions.app.getClusterList().then(function(e){e&&e.length>0&&y.actions.components.getComponentsList("tools")})}},{key:"tabChange",value:function(e){}},{key:"render",value:function(){var e=this.props,t=(e.keyword,e.clusterList),a=(e.devTools,this.state),l=a.type,r=a.loading;return t&&0!=t.length?h.default.createElement("div",{className:"componentsWrap"},h.default.createElement(S.default,{selectChange:this.clusterChange}),h.default.createElement(f.default,{className:"tabContent",onChange:this.tabChange.bind(this),type:"card",tabBarExtraContent:this.operateMenu()},h.default.createElement(C,{tab:"工具",key:"1"},h.default.createElement(v.default,null)),h.default.createElement(C,{tab:"版本",key:"2"},h.default.createElement(E.default,null)),h.default.createElement(n.default,{title:"确认",className:"hostOperateModal",visible:!!l,onCancel:this.closeOperateModal,footer:h.default.createElement(s.default,{loading:r,type:"primary",onClick:this.modalSureHandle},"确定")},"确认 ",this.en2cn[l]," 所有服务?"))):h.default.createElement(_.default,null)}}]),t}(p.Component)),M=(0,y.connect)(function(e){return{clusterList:e.app.clusterList,currentCluster:e.app.currentCluster,servicesList:e.components.servicesList}})(b);t.default=M},756:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=v(a(17)),l=v(a(40)),r=v(a(14)),s=v(a(12)),o=v(a(4)),u=v(a(6)),i=v(a(3)),c=v(a(5)),d=v(a(27));a(20),a(34),a(22),a(29);var m=a(1),f=v(m),p=a(103),h=a(11);function v(e){return e&&e.__esModule?e:{default:e}}a(335);var E=d.default.Option,g=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.showSearchIpt=function(){a.setState({showSearch:!0},function(){a.searchIpt.input.focus()})},a.searhCluster=function(e){a.setState({keyword:e})},a.searchBlur=function(){a.setState({showSearch:!1})},a.state={keyword:"",showSearch:!1},a.searchIpt=null,a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.state,a=(t.keyword,t.showSearch);return f.default.createElement("div",{className:"dealHeaderWrap"},f.default.createElement("div",null,f.default.createElement(p.FormattedMessage,{id:"cluster.current"}),"：",f.default.createElement(d.default,{showSearch:!0,style:{width:200},placeholder:"选择集群",optionFilterProp:"children",onChange:this.handleChange,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},f.default.createElement(E,{value:"cluster1"},"开发集群1"),f.default.createElement(E,{value:"cluster2"},"开发集群2"),f.default.createElement(E,{value:"cluster3"},"开发集群3"))),f.default.createElement("div",{className:"rightHead"},f.default.createElement(r.default,{className:"icon",type:"search",onClick:this.showSearchIpt}),a&&f.default.createElement(l.default,{ref:function(t){return e.searchIpt=t},placeholder:"请输入搜索内容",onBlur:this.searchBlur,onChange:this.searhCluster}),f.default.createElement(r.default,{className:"icon",type:"sync"}),f.default.createElement(r.default,{className:"icon",type:"question-circle-o"}),f.default.createElement(h.Link,{to:"/createCluster"},f.default.createElement(n.default,{icon:"plus"},"创建集群"))))}}]),t}(m.Component),y=(0,h.connect)(function(e){return{}})(g);t.default=y},758:function(e,t,a){},763:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(40)),l=E(a(106)),r=E(a(14)),s=E(a(12)),o=E(a(4)),u=E(a(6)),i=E(a(3)),c=E(a(5)),d=E(a(70)),m=E(a(57)),f=E(a(27));a(34),a(122),a(22),a(79),a(56),a(29);var p=a(1),h=E(p),v=(a(141),a(11));function E(e){return e&&e.__esModule?e:{default:e}}var g=f.default.Option,y=(m.default.TabPane,h.default.createElement("div",null,"sss")),_=h.default.createElement(d.default,null,h.default.createElement(d.default.Item,null,h.default.createElement("a",null,"修改的熟悉")),h.default.createElement(d.default.Item,null,h.default.createElement("a",null,"最终的熟悉")),h.default.createElement(d.default.Item,null,h.default.createElement("a",null,"显示有问题的熟悉"))),S=function(e){function t(e){(0,o.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.handleChange=function(){},a.emitEmpty=function(){a.filterIpt.focus(),a.setState({filterKey:""})},a.onChangeFilterKey=function(e){a.setState({filterKey:e.target.value})},a.state={filterKey:""},a.filterIpt=null,a}return(0,c.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this,t=this.state.filterKey;return h.default.createElement("div",{className:"configurationPage"},h.default.createElement("div",{className:"alertTip"},h.default.createElement("div",null,h.default.createElement("i",{className:"warnIcon"}),h.default.createElement("span",null,"重新启动要求：2台主机上的2个组件")),h.default.createElement("div",{className:"reStartBtn flexVerticalCenter"},h.default.createElement(l.default,{overlay:y,trigger:["click"]},h.default.createElement("a",{className:"ant-dropdown-link",href:"#"},"重新启动 ",h.default.createElement(r.default,{type:"down"}))))),h.default.createElement("div",{className:"groupPartContent"},h.default.createElement("div",{className:"contentHead groupPartHead"},h.default.createElement("div",{className:"left flexVerticalCenter"},h.default.createElement("span",null,"组"),h.default.createElement(f.default,{className:"noBorderSelect",defaultValue:"Default",style:{width:120},onChange:this.handleChange},h.default.createElement(g,{value:"Default"},"Default(5)"),h.default.createElement(g,{value:"leap"},"leap(6)"),h.default.createElement(g,{value:"datahub"},"datahub(4)")),h.default.createElement("div",{className:"manageConfig flexVerticalCenter"},h.default.createElement("i",null),h.default.createElement("span",null,"管理配置组"))),h.default.createElement("div",{className:"right flexVerticalCenter"},h.default.createElement(n.default,{placeholder:"过滤",prefix:h.default.createElement(r.default,{type:"search",style:{color:"rgba(0,0,0,.25)"}}),suffix:t?h.default.createElement(r.default,{type:"close-circle",onClick:this.emitEmpty}):null,value:t,onChange:this.onChangeFilterKey,ref:function(t){return e.filterIpt=t}}),h.default.createElement(l.default,{overlay:_,trigger:["click"]},h.default.createElement("a",{className:"ant-dropdown-link flexVerticalCenter ml20",href:"#"},h.default.createElement(r.default,{type:"filter",style:{fontSize:18,color:"#006cff"}}),h.default.createElement(r.default,{type:"caret-down",style:{fontSize:12,color:"#82868b"}}))))),h.default.createElement("div",{className:"carouselBox"})))}}]),t}(p.Component),N=(0,v.connect)(function(e){return{}})(S);t.default=N},766:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(224)),l=g(a(96)),r=g(a(17)),s=g(a(223)),o=g(a(229)),u=g(a(50)),i=g(a(12)),c=g(a(4)),d=g(a(6)),m=g(a(3)),f=g(a(5)),p=g(a(27));a(338),a(95),a(20),a(337),a(226),a(49),a(29);var h=a(1),v=g(h),E=a(11);function g(e){return e&&e.__esModule?e:{default:e}}var y=p.default.Option,_=function(e,t){return(e/t*100).toFixed(1)+"%"},S=function(e){var t=e.host,a=e.activeWidgetInfo;return v.default.createElement("div",{className:"hostPopPanel"},v.default.createElement("h3",null,t.publicHostName),v.default.createElement("div",null,v.default.createElement("span",null,"IP地址"),":",v.default.createElement("span",null,t.ip)),v.default.createElement("div",null,v.default.createElement("span",null,"Rack"),":",v.default.createElement("span",null,t.rack)),v.default.createElement("div",null,v.default.createElement("span",null,a.widget_name),":",v.default.createElement("span",null,a.widget_name)),v.default.createElement("div",null,v.default.createElement("span",null,"磁盘"),":",v.default.createElement("span",null,_(t.diskTotal-t.diskFree,t.diskTotal))),v.default.createElement("div",null,v.default.createElement("span",null,"CPU"),":",v.default.createElement("span",null,t.cpuSystem+t.cpuUser+"%")),v.default.createElement("div",null,v.default.createElement("span",null,"内存"),":",v.default.createElement("span",null,_(t.memTotal-t.memFree,t.memTotal))),v.default.createElement("div",{className:"flexWrap"},v.default.createElement("span",null,"组件"),":",t.hostComponents.map(function(e,t){return v.default.createElement("span",{key:t},e)})))},N=function(e){function t(e){(0,c.default)(this,t);var a=(0,m.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return a.handleBlur=function(){},a.onFocus=function(){},a.changeDisplayWidget=function(e){E.actions.heatMap.changeDisplayWidgetName(e)},a.changeMax=function(e){E.actions.heatMap.updateIptMax(e)},a.getBackGroundColor=function(e){if(a.props.loadRack&&a.props.loadMetrics)return E.actions.heatMap.hostTemperatureStyle(e)},a}return(0,f.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){E.actions.heatMap.getActiveWidget(this.props.servicesName),E.actions.heatMap.getRackList(),E.actions.heatMap.getUserDropDownWidgetLayouts(this.props.servicesName)}},{key:"render",value:function(){var e=this,t=this.props,a=t.rackList,i=t.loadRack,c=t.inputMaximum,d=t.activeWidgetInfo,m=t.slotDefinitions,f=t.dropDownLayoutInfo;return v.default.createElement("div",{className:"heatMapPage"},this.props.isLoaded?v.default.createElement(n.default,null,v.default.createElement(s.default,{span:8,xs:24,md:12,lg:8},v.default.createElement(p.default,{showSearch:!0,style:{width:258},placeholder:"选择指标",optionFilterProp:"children",notFoundContent:f.loaded?v.default.createElement(u.default,{size:"small"}):null,onChange:this.changeDisplayWidget,value:d.widget_name,onFocus:this.handleFocus,onBlur:this.handleBlur,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},f.list.map(function(e){return v.default.createElement(y,{key:e.WidgetInfo.id},e.WidgetInfo.widget_name)})),v.default.createElement("div",{className:"colorContent"},v.default.createElement("table",{className:"legend"},v.default.createElement("tbody",null,m.map(function(e,t){return v.default.createElement("tr",{key:t},v.default.createElement("td",null,v.default.createElement("div",{className:"tile",style:{background:e.cssStyle}})),v.default.createElement("td",null,e.label))})))),v.default.createElement("div",{className:"maxContent"},v.default.createElement("span",null,"最大值:"),v.default.createElement(o.default,{onChange:this.changeMax,value:c}),v.default.createElement("span",null,d.displayUnit))),v.default.createElement(s.default,{span:16,xs:24,md:12,lg:16},v.default.createElement("div",{className:" heatMapContent"},v.default.createElement("h3",{className:"widgetName"},d.widget_name),i?a.map(function(t,a){return v.default.createElement("div",{className:"rack",key:a},v.default.createElement("div",{className:"rackHeader "},v.default.createElement("div",{className:"statusName"},v.default.createElement("h3",{className:"panel-title rackName"},t.name))),v.default.createElement("div",{className:"rackContent"},t.hosts.map(function(t,a){return v.default.createElement(l.default,{placement:"bottom",content:v.default.createElement(S,{host:t,activeWidgetInfo:d}),trigger:"hover",key:a},v.default.createElement(r.default,{className:"hostBlock",style:{background:e.getBackGroundColor(t)}}))})))}):v.default.createElement("div",{className:"flexVerticalCenter"},v.default.createElement(u.default,null))))):v.default.createElement("div",{className:"flexVerticalCenter"},v.default.createElement(u.default,null)))}}]),t}(h.Component),C=(0,E.connect)(function(e){return{isLoaded:e.heatMap.isLoaded,loadRack:e.heatMap.loadRack,loadMetrics:e.heatMap.loadMetrics,rackList:e.heatMap.rackList,activeWidgetInfo:e.heatMap.activeWidgetInfo,inputMaximum:e.heatMap.inputMaximum,slotDefinitions:e.heatMap.slotDefinitions,dropDownLayoutInfo:e.heatMap.dropDownLayoutInfo}})(N);t.default=C},772:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=g(a(50)),l=g(a(12)),r=g(a(4)),s=g(a(6)),o=g(a(3)),u=g(a(5)),i=g(a(14)),c=g(a(224)),d=g(a(223)),m=g(a(70)),f=g(a(57));a(49),a(22),a(338),a(337),a(79),a(56);var p=a(1),h=g(p),v=a(141),E=a(11);function g(e){return e&&e.__esModule?e:{default:e}}f.default.TabPane,h.default.createElement("div",null,"sss"),h.default.createElement(m.default,null,h.default.createElement(m.default.Item,{key:"0"},h.default.createElement("div",null,"过去两个小时")),h.default.createElement(m.default.Item,{key:"1"},h.default.createElement("div",null,"过去三个小时"))),h.default.createElement(m.default,null,h.default.createElement(m.default.Item,{key:"0"},h.default.createElement("i",null),h.default.createElement("span",null,"创建控件")),h.default.createElement(m.default.Item,{key:"1"},h.default.createElement("i",null),h.default.createElement("span",null,"浏览器窗口"))),(0,v.SortableContainer)(function(e){var t=e.items;return h.default.createElement("div",{className:"sortContainer"},t.map(function(e,t){return h.default.createElement(y,{key:"item-"+t,index:t,value:e})}),h.default.createElement("div",{className:"sortItemContent addBox flexVerticalCenter"}))});var y=(0,v.SortableElement)(function(e){var t=e.value;e.threshold;return h.default.createElement("div",{className:"sortItemContent"},h.default.createElement("h4",null,t.WidgetInfo.widget_name))}),_=function(e){var t,a=e.serviceBaseInfo,n=e.servicesName;if("HDFS"==n){var l=a.NAMENODE.host_components[0],r="STARTED"==l.HostRoles.state?"已启动":"已停止",s=l.metrics.dfs?JSON.parse(l.metrics.dfs.namenode.DeadNodes).length:"a / n",o=l.metrics.dfs?JSON.parse(l.metrics.dfs.namenode.LiveNodes).length:"a / n",u=l.metrics.dfs?JSON.parse(l.metrics.dfs.namenode.DecomNodes).length:"a / n",m="STARTED"==a.SECONDARY_NAMENODE.host_components[0].HostRoles.state?"已启动":"已停止",f=l.metrics.runtime?(new Date).getTime()-l.metrics.runtime.StartTime:"未运行";return f="未运行"==f?f:t=null!=(t=parseFloat(f)/1e3)&&""!=t?t>60&&t<3600?parseInt(t/60)+"分钟"+parseInt(60*(parseFloat(t/60)-parseInt(t/60)))+"秒":t>=3600&&t<86400?parseInt(t/3600)+"小时"+parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))+"分钟"+parseInt(60*(parseFloat(60*(parseFloat(t/3600)-parseInt(t/3600)))-parseInt(60*(parseFloat(t/3600)-parseInt(t/3600)))))+"秒":parseInt(t)+"秒":"0 时 0 分0 秒",h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"NameNode"),h.default.createElement("td",null,r)),h.default.createElement("tr",null,h.default.createElement("td",null,"SecondaryNameNode"),h.default.createElement("td",null,m)),h.default.createElement("tr",null,h.default.createElement("td",null,"DataNode状态"),h.default.createElement("td",null,h.default.createElement("span",null,s," 活跃 / ",o," 离线 / ",u," 停用"))),h.default.createElement("tr",null,h.default.createElement("td",null,"NameNode运行时间"),h.default.createElement("td",null,f)),h.default.createElement("tr",null,h.default.createElement("td",null,"NameNode堆"),h.default.createElement("td",null,"138.1 MB / 1004.0 MB (已用13.8%)")),h.default.createElement("tr",null,h.default.createElement("td",null,"HDFS磁盘使用率(DFS使用)"),h.default.createElement("td",null,"590.6 MB / 192.4 GB (0.30%)")),h.default.createElement("tr",null,h.default.createElement("td",null,"磁盘使用(非DFS使用)"),h.default.createElement("td",null,"43.3 GB / 192.4 GB (22.49%)"))))),h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"磁盘剩余"),h.default.createElement("td",null,"148.5 GB / 192.4 GB (77.20%)")),h.default.createElement("tr",null,h.default.createElement("td",null,"数据块 (共计)"),h.default.createElement("td",null,"20")),h.default.createElement("tr",null,h.default.createElement("td",null,"数据块错误"),h.default.createElement("td",null,"损坏：0 / 丢失：0 / 正在复制：0")),h.default.createElement("tr",null,h.default.createElement("td",null,"文件总数"),h.default.createElement("td",null,"+ 目录总数 1104")),h.default.createElement("tr",null,h.default.createElement("td",null,"升级状态"),h.default.createElement("td",null,"没有未完成的升级")),h.default.createElement("tr",null,h.default.createElement("td",null,"安全模式状态"),h.default.createElement("td",null,"不在安全模式下")),h.default.createElement("tr",null,h.default.createElement("td",null,"平衡 HDFS状态"),h.default.createElement("td",null,"未操作"))))))}return"YARN"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"App Timeline Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"ResourceManager"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"NodeManagers"),h.default.createElement("td",null,"4/4 已启动")),h.default.createElement("tr",null,h.default.createElement("td",null,"NodeManager状态"),h.default.createElement("td",null,"活跃：4 / 丢失：0 / 异常：0 / 重启：0 / 停用：0")),h.default.createElement("tr",null,h.default.createElement("td",null,"YARN客户端"),h.default.createElement("td",null,"4 YARN客户端 已安装")),h.default.createElement("tr",null,h.default.createElement("td",null,"ResourceManager运行时间"),h.default.createElement("td",null,"1.19 days")))))):"MAPREDUCE2"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"History Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"MapReduce2 Client"),h.default.createElement("td",null,"4 MapReduce2 Client 已安装")))))):"HIVE"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Hive Metastore"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"HiveServer2"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"WebHCat Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"HCat Client"),h.default.createElement("td",null,"4 HCat Client 已安装")),h.default.createElement("tr",null,h.default.createElement("td",null,"Hive Client"),h.default.createElement("td",null,"4 Hive Client 已安装")),h.default.createElement("tr",null,h.default.createElement("td",null,"HiveServer2 JDBC URL"),h.default.createElement("td",null,"jdbc:hive2://dujz-null-2-agent1.leapcloud.com:2181")))))):"HBASE"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"活跃的HBase Master"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"RegionServers"),h.default.createElement("td",null,"4/4 活跃的RegionServers")),h.default.createElement("tr",null,h.default.createElement("td",null,"Region状态迁移"),h.default.createElement("td",null,"0"))))),h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Master启动"),h.default.createElement("td",null,"2.00 days")),h.default.createElement("tr",null,h.default.createElement("td",null,"Master激活"),h.default.createElement("td",null,"2.00 days")),h.default.createElement("tr",null,h.default.createElement("td",null,"平均负载"),h.default.createElement("td",null,"每个RegionServer 1个Region")),h.default.createElement("tr",null,h.default.createElement("td",null,"Master堆"),h.default.createElement("td",null,"28.5 MB / 4.0 GB (已用0.7%)")))))):"SQOOP"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Sqoop Client"),h.default.createElement("td",null,"4 Sqoop Client 已安装")))))):"ZOOKEEPER"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"ZooKeeper Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"ZooKeeper Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"ZooKeeper Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"ZooKeeper Client"),h.default.createElement("td",null,"4 ZooKeeper Client 已安装"))))),h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Master启动"),h.default.createElement("td",null,"2.00 days")),h.default.createElement("tr",null,h.default.createElement("td",null,"Master激活"),h.default.createElement("td",null,"2.00 days")),h.default.createElement("tr",null,h.default.createElement("td",null,"平均负载"),h.default.createElement("td",null,"每个RegionServer 1个Region")),h.default.createElement("tr",null,h.default.createElement("td",null,"Master堆"),h.default.createElement("td",null,"28.5 MB / 4.0 GB (已用0.7%)")))))):"AMBARI_INFRA"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Infra MySQL Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"AMBARI_METRICS"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Metrics Collector"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Grafana"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Metrics Monitor"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"KAFKA"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Kafka Broker"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"LOGSEARCH"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Log Search Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Log Search Solr Instance"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Log Feeder"),h.default.createElement("td",null,"4/4 Log Feeder 活跃数")),h.default.createElement("tr",null,h.default.createElement("td",null,"Log Search Solr Client"),h.default.createElement("td",null,"4 Log Search Solr Client 已安装")))))):"SPARK2"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Redis Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Spark2 History Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Spark2 Thrift Server"),h.default.createElement("td",null,"1/1 Spark2 Thrift Server 活跃数")),h.default.createElement("tr",null,h.default.createElement("td",null,"Spark2 Client"),h.default.createElement("td",null,"4 Spark2 Client 已安装")))))):"ELK"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Elastic Search Node"),h.default.createElement("td",null,"1/2 Elastic Search Node 活跃数")),h.default.createElement("tr",null,h.default.createElement("td",null,"Kibana Server"),h.default.createElement("td",null,"1/1 Kibana Server 活跃数")),h.default.createElement("tr",null,h.default.createElement("td",null,"Logstash Agent"),h.default.createElement("td",null,"1/1 Logstash Agent 活跃数")))))):"HADOOP_KMS"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Hadoop KMS Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"IMPALA"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Impala_Catalog_Service"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Impala_State_Store"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Impala_Daemon"),h.default.createElement("td",null,"2/2 Impala_Daemon 活跃数")))))):"STORM"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"DRPC Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Nimbus"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Nimbus"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Storm UI Server"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))),h.default.createElement("tr",null,h.default.createElement("td",null,"Supervisors"),h.default.createElement("td",null,"2/2 活跃的Supervisors"))))),h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"空闲时隙"),h.default.createElement("td",null,"4 / 4 (100% 空闲)")),h.default.createElement("tr",null,h.default.createElement("td",null,"任务"),h.default.createElement("td",null,"0")),h.default.createElement("tr",null,h.default.createElement("td",null,"Executors"),h.default.createElement("td",null,"0")),h.default.createElement("tr",null,h.default.createElement("td",null,"拓扑"),h.default.createElement("td",null,"0")),h.default.createElement("tr",null,h.default.createElement("td",null,"Nimbus运行时间"),h.default.createElement("td",null,"2d 4h 9m 2s")))))):"LEAPDATAHUB"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"DATA HUB"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"LEAPID"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"User Admin"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"LEAPPROCESS"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Task Scheduler"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"LEAPSQL"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"SQL Editor"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):"SENTRY"==n?h.default.createElement(c.default,{className:"baseInfo"},h.default.createElement(d.default,{span:12},h.default.createElement("table",{className:"baseInfoTable"},h.default.createElement("tbody",null,h.default.createElement("tr",null,h.default.createElement("td",null,"Sentry_Store"),h.default.createElement("td",null,h.default.createElement(i.default,{className:"iconSuccess",type:"check-circle"}),"已启动 ",h.default.createElement("span",{className:"noAlert"},"没有告警"))))))):h.default.createElement("div",null,"null")},S=function(e){function t(e){return(0,r.default)(this,t),(0,o.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"onSortEnd",value:function(){}},{key:"componentWillMount",value:function(){var e=this;E.actions.summary.getSummaryBaseInfo(this.props.servicesName),setInterval(function(){E.actions.summary.getSummaryBaseInfo(e.props.servicesName)},4e3)}},{key:"render",value:function(){var e=this.props,t=(e.widgetLayoutInfo,e.loadLayout,e.servicesName),a=e.loadingBaseInfo,l=e.serviceBaseInfo;return h.default.createElement("div",{className:"summaryWrap"},h.default.createElement("div",{className:"serviceContent"},a?h.default.createElement(n.default,{className:"loading",tip:"Loading..."}):h.default.createElement(_,{aa:"123",serviceBaseInfo:l,servicesName:t})))}}]),t}(p.Component),N=(0,E.connect)(function(e,t){t.match,t.location;return{loadLayout:e.summary.loadLayout,widgetLayoutInfo:e.summary.widgetLayoutInfo,loadingBaseInfo:e.summary.loadingBaseInfo,serviceBaseInfo:e.summary.serviceBaseInfo}})(S);t.default=N},773:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(106)),l=y(a(14)),r=y(a(12)),s=y(a(4)),o=y(a(6)),u=y(a(3)),i=y(a(5)),c=y(a(70)),d=y(a(57));a(122),a(22),a(79),a(56);var m=a(1),f=y(m),p=a(11),h=y(a(772)),v=y(a(766)),E=(y(a(763)),y(a(66))),g=y(a(69));function y(e){return e&&e.__esModule?e:{default:e}}a(758);var _=d.default.TabPane,S=f.default.createElement(c.default,null,f.default.createElement(c.default.Item,{key:"0"},f.default.createElement("i",{className:"dealIcon start"}),f.default.createElement("span",null,"启动")),f.default.createElement(c.default.Item,{key:"1"},f.default.createElement("i",{className:"dealIcon stop"}),f.default.createElement("span",null,"停止")),f.default.createElement(c.default.Item,{key:"3"},f.default.createElement("i",{className:"dealIcon restartAll"}),f.default.createElement("span",null,"重启所有"))),N=function(e){function t(e){(0,s.default)(this,t);var a=(0,u.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.quickLink=function(){alert(a.props.servicesName)},a.state={hasHeatmapSection:["HDFS","YARN","HBASE"]},a}return(0,i.default)(t,e),(0,o.default)(t,[{key:"componentWillMount",value:function(){this.props.currentCluster?(p.actions.alerts.getAlertsList(),p.actions.summary.getServicesStatusInfo()):p.actions.app.getClusterList().then(function(e){e&&e.length>0&&(p.actions.alerts.getAlertsList(),p.actions.summary.getServicesStatusInfo())})}},{key:"tabChange",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.servicesName,a=e.clusterList,r=e.servicesStatusInfo;if(!a||0==a.length)return f.default.createElement(E.default,null);f.default.createElement(c.default,null,f.default.createElement(c.default.Item,{key:"0"},f.default.createElement("a",{href:"http://www.alipay.com/"},"1st menu item")),f.default.createElement(c.default.Item,{key:"1"},f.default.createElement("a",{href:"http://www.taobao.com/"},"2nd menu item")),f.default.createElement(c.default.Divider,null),f.default.createElement(c.default.Item,{key:"3"},"3rd menu item"));return f.default.createElement("div",null,f.default.createElement(g.default,null),f.default.createElement("div",{className:"serviceInfoWrap pageContent"},f.default.createElement("div",{className:"breadcrumbsWrap"},t),f.default.createElement(d.default,{onChange:this.tabChange.bind(this),type:"card"},f.default.createElement(_,{tab:"概览",key:"1"},f.default.createElement(h.default,{servicesName:t})),this.state.hasHeatmapSection.indexOf(t)>-1&&f.default.createElement(_,{tab:"热图",key:"2"},f.default.createElement(v.default,{servicesName:t}))),f.default.createElement("div",{className:"serviceButton"},"LEAPSQL"==t&&r.LEAPSQL&&r.LEAPSQL.status&&f.default.createElement("a",{href:"http://sql."+r.LEAPSQL.host+":8080",target:"_blank"},f.default.createElement("span",null,"快速链接")),"LEAPDATAHUB"==t&&r.LEAPDATAHUB&&r.LEAPDATAHUB.status&&f.default.createElement("a",{href:"http://datahub."+r.LEAPDATAHUB.host+":8080",target:"_blank"},f.default.createElement("span",null,"快速链接")),"LEAPID"==t&&r.LEAPID&&r.LEAPID.status&&f.default.createElement("a",{href:"http://id."+r.LEAPID.host+":8080/leapid-admin/view/login.html",target:"_blank"},f.default.createElement("span",null,"快速链接")),"LEAPPROCESS"==t&&r.LEAPPROCESS&&r.LEAPPROCESS.status&&f.default.createElement("a",{href:"http://ts."+r.LEAPPROCESS.host+":8080/TaskSchedule",target:"_blank"},f.default.createElement("span",null,"快速链接")),f.default.createElement("div",{className:"dropDownBtnItem"},f.default.createElement(n.default,{overlay:S,trigger:["click"]},f.default.createElement("a",{className:"ant-dropdown-link",href:"#"},f.default.createElement("span",null,"操作"),f.default.createElement(l.default,{type:"caret-down"})))))))}}]),t}(m.Component),C=(0,p.connect)(function(e,t){var a=t.match;t.location;return{servicesName:a.params.servicesName,currentCluster:e.app.currentCluster,clusterList:e.app.clusterList,servicesStatusInfo:e.summary.servicesStatusInfo}})(N);t.default=C},774:function(e,t,a){e.exports=a.p+"static/media/create_pic.b391980a.png"},776:function(e,t,a){},777:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=m(a(12)),l=m(a(4)),r=m(a(6)),s=m(a(3)),o=m(a(5)),u=(0,m(a(354)).default)(["\n    display:flex;\n    height:140px;\n    align-items:center;\n    justify-content:center;\n"],["\n    display:flex;\n    height:140px;\n    align-items:center;\n    justify-content:center;\n"]),i=a(1),c=m(i),d=m(a(88));function m(e){return e&&e.__esModule?e:{default:e}}var f=a(31);a(361),a(230);var p=d.default.div(u),h=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.setPieOption=a.setPieOption.bind(a),a.initPie=a.initPie.bind(a),a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"initPie",value:function(){var e=this.props.data,t=f.init(this.pieReact),a=this.setPieOption(e);t.setOption(a)}},{key:"componentDidMount",value:function(){this.initPie()}},{key:"componentDidUpdate",value:function(){this.initPie()}},{key:"setPieOption",value:function(e){return{legend:{orient:"vertical",x:"right",data:["内存占比","待升级组件","组件数量"]},series:[{name:"访问来源",type:"pie",radius:"80%",center:["50%","50%"],data:[{value:125,name:"内存占比"},{value:135,name:"待升级组件",selected:!0},{value:335,name:"组件数量"}],label:{normal:{show:!1}}}],color:["#0caf33","#ff9b00","#006cff"]}}},{key:"render",value:function(){var e=this;return c.default.createElement(p,{className:"pie-react"},c.default.createElement("div",{ref:function(t){return e.pieReact=t},style:{width:"400px",height:"140px"}}))}}]),t}(i.Component);t.default=h},778:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(a(12)),l=c(a(4)),r=c(a(6)),s=c(a(3)),o=c(a(5)),u=a(1),i=c(u);a(11),c(a(88)),c(a(777));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return i.default.createElement("div",{className:"infoWrap"})}}]),t}(u.Component);t.default=d},801:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(a(12)),l=d(a(4)),r=d(a(6)),s=d(a(3)),o=d(a(5)),u=a(1),i=d(u),c=d(a(351));function d(e){return e&&e.__esModule?e:{default:e}}var m=function(e){function t(){return(0,l.default)(this,t),(0,s.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return i.default.createElement(c.default,{currentType:"devtools"})}}]),t}(u.Component);t.default=m},825:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=y(a(37)),l=y(a(229)),r=y(a(358)),s=y(a(818)),o=y(a(12)),u=y(a(4)),i=y(a(6)),c=y(a(3)),d=y(a(5)),m=y(a(354)),f=y(a(70)),p=(0,m.default)(["\n    margin-top: 40px;\n    margin-bottom: 40px;\n    margin-left: 38px;\n    max-width: 630px;\n    max-height: 42px;\n    .ant-slider{\n      .ant-slider-step,.ant-slider-rail{\n        height:15px;\n      }\n      .ant-slider-rail{\n        background-image: -webkit-linear-gradient(left, #16bf00, #16bf00 ","%, #ff9c00 ","%, #ff9c00 ","%, #ff4849 ","%, #ff4849);\n      }\n      .ant-slider-track{\n        height:15px;\n        background:#ff9c00\n      }\n      .ant-slider-dot{\n        display:none;\n      }\n      .ant-slider-handle{\n        position: absolute;\n        z-index: 2;\n        width: 1.2em;\n        height: 1.2em;\n        cursor: default;\n        background-color: #e6e6e6;\n        background-repeat: no-repeat;\n        background-image: linear-gradient(#ffffff, #ffffff 25%, #e6e6e6);\n        color: #333;\n        font-size: 13px;\n        line-height: normal;\n        border: 1px solid #ccc;\n        border-bottom-color: #bbb;\n        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n        transition: 0.1s linear background-image;\n        overflow: visible;\n        border-radius:1px;\n        margin-top:0\n      }\n      &:hover .ant-slider-track {\n        background-color: #ff9c00;\n        }\n      \n    }\n"],["\n    margin-top: 40px;\n    margin-bottom: 40px;\n    margin-left: 38px;\n    max-width: 630px;\n    max-height: 42px;\n    .ant-slider{\n      .ant-slider-step,.ant-slider-rail{\n        height:15px;\n      }\n      .ant-slider-rail{\n        background-image: -webkit-linear-gradient(left, #16bf00, #16bf00 ","%, #ff9c00 ","%, #ff9c00 ","%, #ff4849 ","%, #ff4849);\n      }\n      .ant-slider-track{\n        height:15px;\n        background:#ff9c00\n      }\n      .ant-slider-dot{\n        display:none;\n      }\n      .ant-slider-handle{\n        position: absolute;\n        z-index: 2;\n        width: 1.2em;\n        height: 1.2em;\n        cursor: default;\n        background-color: #e6e6e6;\n        background-repeat: no-repeat;\n        background-image: linear-gradient(#ffffff, #ffffff 25%, #e6e6e6);\n        color: #333;\n        font-size: 13px;\n        line-height: normal;\n        border: 1px solid #ccc;\n        border-bottom-color: #bbb;\n        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);\n        transition: 0.1s linear background-image;\n        overflow: visible;\n        border-radius:1px;\n        margin-top:0\n      }\n      &:hover .ant-slider-track {\n        background-color: #ff9c00;\n        }\n      \n    }\n"]);a(36),a(226),a(353),a(805),a(79);var h=a(1),v=y(h),E=y(a(88)),g=a(11);function y(e){return e&&e.__esModule?e:{default:e}}f.default.SubMenu;var _=E.default.div(p,function(e){return e.value[0]},function(e){return e.value[0]},function(e){return e.value[1]},function(e){return e.value[1]}),S={0:{style:{color:"#000",fontSize:"16px"},label:v.default.createElement("strong",null,"0")},100:{style:{color:"#000",fontSize:"16px"},label:v.default.createElement("strong",null,"100")}},N=function(e){function t(e){(0,u.default)(this,t);var a=(0,c.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.modifyFirstRange=function(e){var t=a.props.modelInfo;g.actions.monitor.editThreshold([e,t.range[1]])},a.modifyLastRange=function(e){var t=a.props.modelInfo;g.actions.monitor.editThreshold([t.range[0],e])},a.confirmApplyBtn=function(){g.actions.monitor.changeVisibleOfComponent(),g.actions.monitor.toggleEditDialog()},a.cancelBtn=function(){g.actions.monitor.toggleEditDialog()},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"render",value:function(){var e=this.props,t=e.showDialog,a=e.modelInfo;return v.default.createElement(n.default,{title:"自定义控件",visible:t,onOk:this.confirmApplyBtn,onCancel:this.cancelBtn,width:"60%",okText:"应用",cancelText:"取消"},v.default.createElement(s.default,{type:"info",description:v.default.createElement("div",null,v.default.createElement("div",null,"编辑阈值更改当前控件的颜色。"),v.default.createElement("div",null,"输入两个介于0到100之间的数字。"))}),v.default.createElement(_,{value:a.range},v.default.createElement(r.default,{range:!0,value:a.range,marks:S,onChange:g.actions.monitor.editThreshold}),a.range&&v.default.createElement("div",{className:"flexBetween"},v.default.createElement(l.default,{value:a.range[0],onChange:this.modifyFirstRange}),v.default.createElement(l.default,{value:a.range[1],onChange:this.modifyLastRange}))))}}]),t}(h.Component),C=(0,g.connect)(function(e){return{showDialog:e.monitor.showDialog,modelInfo:e.monitor.modelInfo}})(N);t.default=C},89:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.history=void 0;var n,l=a(197);var r=(0,((n=l)&&n.__esModule?n:{default:n}).default)();t.history=r},890:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=c(a(12)),l=c(a(4)),r=c(a(6)),s=c(a(3)),o=c(a(5)),u=a(1),i=c(u);c(a(88));function c(e){return e&&e.__esModule?e:{default:e}}var d=a(31);a(361),a(230);var m=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.setPieOption=a.setPieOption.bind(a),a.initPie=a.initPie.bind(a),a}return(0,o.default)(t,e),(0,r.default)(t,[{key:"initPie",value:function(){var e=this.props,t=e.data,a=e.color,n=d.init(this.pieReact),l=this.setPieOption(t,a);n.setOption(l)}},{key:"componentDidMount",value:function(){this.initPie()}},{key:"componentDidUpdate",value:function(){this.initPie()}},{key:"setPieOption",value:function(e,t){return{title:{text:e.length>0?Math.ceil(e[0].value/e[1].value*100)+"%":"N/A",textStyle:{color:"#16bf00"},x:"center",y:"center"},series:[{name:"使用情况",type:"pie",radius:["75%","90%"],avoidLabelOverlap:!0,data:e,label:{normal:{show:!1,position:"center",textStyle:{fontSize:"18"},emphasis:{show:!0,textStyle:{fontSize:"30",fontWeight:"bold"}}}},labelLine:{normal:{show:!1}}}],color:[t,"#e5e5e5"]}}},{key:"render",value:function(){var e=this;return i.default.createElement("div",{className:"chartReact"},i.default.createElement("div",{ref:function(t){return e.pieReact=t},style:{width:"100px",height:"100px"}}))}}]),t}(u.Component);t.default=m},891:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PxfUpView=t.HawqSegmentUpView=t.YARNLinksView=t.FlumeAgentUpView=t.SuperVisorUpView=t.ResourceManagerUptimeView=t.YARNMemoryPieChartView=t.NodeManagersLiveView=t.ResourceManagerHeapPieChartView=t.HBaseMasterUptimeView=t.HBaseRegionsInTransitionView=t.HBaseAverageLoadView=t.HBaseMasterHeapPieChartView=t.HBaseLinksView=t.HDFSLinksView=t.NameNodeUptimeView=t.NameNodeRpcView=t.DataNodeUpView=t.NameNodeCpuPieChartView=t.NameNodeCapacityPieChartView=t.NameNodeHeapPieChartView=void 0;var n=p(a(106)),l=p(a(12)),r=p(a(4)),s=p(a(6)),o=p(a(3)),u=p(a(5)),i=p(a(70));a(122),a(79);var c=a(1),d=p(c),m=p(a(890)),f=(p(a(88)),a(103));function p(e){return e&&e.__esModule?e:{default:e}}var h=i.default.SubMenu,v=d.default.createElement(i.default,null,d.default.createElement(h,{title:"demo1.leap.com:8080"},d.default.createElement(i.default.Item,null,"Hbase Log")),d.default.createElement(h,{title:"demo2.leap.com:8080"},d.default.createElement(i.default.Item,null,"Hbase Log"))),E=d.default.createElement(i.default,null,d.default.createElement(h,{title:"demo1.leap.com:8080"},d.default.createElement(i.default.Item,null,"NameNode")),d.default.createElement(h,{title:"demo2.leap.com:8080"},d.default.createElement(i.default.Item,null,"Hbase Log"))),g=(d.default.createElement(i.default,null,d.default.createElement(i.default.Item,null,d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://demo1.leap.com:8088"},"ResourceManager UI")),d.default.createElement(i.default.Item,null,d.default.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"http://demo1.leap.com:8088/logs"},"ResourceManager logs")),d.default.createElement(i.default.Item,null,"Hbase Log")),[{value:1,name:"使用"},{value:2,name:"总额"}]),y=function(e){var t=e.children;return d.default.createElement("div",{className:"verticalCenter"},t)},_=function(e){function t(){return(0,r.default)(this,t),(0,o.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=(e.value,e.data);e.threshold;return d.default.createElement("div",{className:"widgetWrap"},t,a?d.default.createElement("div",{className:"contentText"},a):d.default.createElement("div",{className:"naText"},"N/A"))}}]),t}(c.Component),S=function(e){function t(){return(0,r.default)(this,t),(0,o.default)(this,(t.__proto__||(0,l.default)(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.value,n=e.data,l=function(e,t){return t<e[0]?"#16bf00":t>e[1]?"#f83b3b":"#fe8f04"}(e.threshold[a],function(e){if(e.length>0)return Math.floor(e[0].value/e[1].value*100)}(n));return d.default.createElement("div",{className:"widgetWrap"},t,n.length>0?d.default.createElement(m.default,{color:l,data:n}):d.default.createElement("div",{className:"naText"},"N/A"))}}]),t}(c.Component);t.NameNodeHeapPieChartView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=(void 0===n?{}:n).heapChart,r=void 0===l?[]:l;return d.default.createElement(S,{data:r,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.NameNodeHeap"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"196.8 MB of 1004.0 MB"))))},t.NameNodeCapacityPieChartView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=(void 0===n?{}:n).dfsInfo,r=function(e){if(0===e)return"0 B";var t=Math.floor(Math.log(e)/Math.log(1e3));return(e/Math.pow(1e3,t)).toPrecision(3)+["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t]};if(!l)return"";var s=[{value:l.CapacityUsed+l.CapacityNonDFSUsed,name:"使用"},{value:l.CapacityTotal,name:"总额"}];return d.default.createElement(S,{data:s,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HDFSDiskUsage"})),d.default.createElement("div",{className:"opcWrap"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HDFSDiskUsage.DFSused"}),d.default.createElement("div",null,r(l.CapacityUsed),"()"),d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HDFSDiskUsage.nonDFSused"}),d.default.createElement("div",null,r(l.CapacityNonDFSUsed)),d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HDFSDiskUsage.remaining"}),d.default.createElement("div",null,r(l.CapacityRemaining))))},t.NameNodeCpuPieChartView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=(void 0===n?{}:n).chartData,r=void 0===l?[]:l;return d.default.createElement(S,{data:r,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.NameNodeCpu"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"10%"),d.default.createElement("div",null,"CPU wait I/O"))))},t.DataNodeUpView=function(e){var t=e.value,a=e.threshold;return d.default.createElement(_,{data:"4/4",value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.DataNodeUp"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"4 活跃"),d.default.createElement("div",null,"0 离线"),d.default.createElement("div",null,"0 停用"))))},t.NameNodeRpcView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=(void 0===n?{}:n).rpcContent;return d.default.createElement(_,{data:l,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.NameNodeRpc"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,l," average RPC"),d.default.createElement("div",null,"queue wait time"))))},t.NameNodeUptimeView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=void 0===n?{}:n,r=l.contentTime,s=l.hiddenInfo,o=void 0===s?[]:s;return d.default.createElement(_,{data:r,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.NameNodeUptime"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,o.length>0?o.map(function(e,t){return d.default.createElement("div",{key:t},e)}):d.default.createElement("div",null,"loading"))))},t.HDFSLinksView=function(){return d.default.createElement("div",{className:"widgetWrap"},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HDFSLinks"})),d.default.createElement(y,null,d.default.createElement("a",{href:"#",className:"link"},"Name Node"),d.default.createElement("a",{href:"#",className:"link"},"Name Node"),d.default.createElement("a",{href:"#",className:"link"},"Name Node"),d.default.createElement(n.default,{overlay:E},d.default.createElement("a",{className:"ant-dropdown-link link",href:"#"},"更多 "))))},t.HBaseLinksView=function(){return d.default.createElement("div",{className:"widgetWrap"},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HBaseLinks"})),d.default.createElement(y,null,d.default.createElement("a",{href:"#",className:"link"},"HBASE MASTER"),d.default.createElement("a",{href:"#",className:"link"},"HBASE MASTER"),d.default.createElement("a",{href:"#",className:"link"},"HBASE MASTER"),d.default.createElement(n.default,{overlay:v},d.default.createElement("a",{className:"ant-dropdown-link link",href:"#"},"更多 "))))},t.HBaseMasterHeapPieChartView=function(e){var t=e.value,a=e.threshold;return d.default.createElement(S,{data:g,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HBaseMasterHeap"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"3.0% used"),d.default.createElement("div",null,"125.9 MB of 3.9 GB"))))},t.HBaseAverageLoadView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=(void 0===n?{}:n).averageLoad;return d.default.createElement(_,{data:l,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HBaseAverageLoad"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"每个RegionServer 0个Region"))))},t.HBaseRegionsInTransitionView=function(e){var t=e.value,a=e.threshold;return d.default.createElement(_,{data:"0",value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HBaseRegionsInTransition"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"0 regions"),d.default.createElement("div",null,"in transition"))))},t.HBaseMasterUptimeView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=void 0===n?{}:n,r=l.contentTime,s=l.hiddenInfo,o=void 0===s?[]:s;return d.default.createElement(_,{data:r,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HBaseMasterUptime"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,o.length>0?o.map(function(e,t){return d.default.createElement("div",{key:t},e)}):d.default.createElement("div",null,"loading"))))},t.ResourceManagerHeapPieChartView=function(e){var t=e.value,a=e.threshold;return d.default.createElement(S,{data:g,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.ResourceManagerHeap"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"3.2% used"),d.default.createElement("div",null,"28.0 MB of 910.5 MB"))))},t.NodeManagersLiveView=function(e){var t=e.value,a=e.threshold;return d.default.createElement(_,{data:"4/4",value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.NodeManagersLive"})),d.default.createElement("div",{className:"opcWrap"},d.default.createElement(y,null,d.default.createElement("div",null," 4 active"),d.default.createElement("div",null," 0 lost"),d.default.createElement("div",null," 0 unhealth"),d.default.createElement("div",null," 0 rebooted"),d.default.createElement("div",null," 0 decommissioned"))))},t.YARNMemoryPieChartView=function(e){var t=e.value,a=e.threshold;return d.default.createElement(S,{data:g,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.YARNMemory"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,"5% used"),d.default.createElement("div",null,"1.0 GB of 20GB"))))},t.ResourceManagerUptimeView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l=void 0===n?{}:n,r=l.contentTime,s=l.hiddenInfo,o=void 0===s?[]:s;return d.default.createElement(_,{data:r,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.ResourceManagerUptime"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,o.length>0?o.map(function(e,t){return d.default.createElement("div",{key:t},e)}):d.default.createElement("div",null,"loading"))))},t.SuperVisorUpView=function(e){e.value,e.threshold;return d.default.createElement(_,null,d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.SuperVisorUp"})))},t.FlumeAgentUpView=function(e){var t=e.value,a=e.threshold,n=e.sourceData,l="",r=0;return n&&(l=(r=n.flumeAgentsLive.length)+"/"+n.flumeAgentsAll.length),d.default.createElement(_,{data:l,value:t,threshold:a},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.FlumeAgentUp"})),d.default.createElement("div",{className:"opcWrap fs14"},d.default.createElement(y,null,d.default.createElement("div",null,r," 活跃"),d.default.createElement("div",null,0," 离线"))))},t.YARNLinksView=function(e){e.value,e.threshold;return d.default.createElement("div",{className:"widgetWrap"},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.YARNLinks"})),d.default.createElement(y,null,d.default.createElement("a",{href:"#",className:"link"},"ResourceManager"),d.default.createElement("a",{href:"#",className:"link"},"NodeManagers"),d.default.createElement(n.default,{overlay:E},d.default.createElement("a",{className:"ant-dropdown-link link",href:"#"},"更多 "))))},t.HawqSegmentUpView=function(e){e.value,e.threshold;return d.default.createElement("div",{className:"widgetWrap"},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.HawqSegmentUp"})))},t.PxfUpView=function(e){e.value,e.threshold;return d.default.createElement("div",{className:"widgetWrap"},d.default.createElement("div",{className:"itemName"},d.default.createElement(f.FormattedMessage,{id:"dashboard.widgets.PxfUp"})))}}});
//# sourceMappingURL=main.4606aa80.js.map